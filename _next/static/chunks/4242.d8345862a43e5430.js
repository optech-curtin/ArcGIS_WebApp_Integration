"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4242,4373,8288],{8288:(e,t,i)=>{i.d(t,{G:()=>n,S:()=>s});class n{*[Symbol.iterator](){let e=this.next();for(;e;)yield e,e=this.next()}}class s extends n{constructor(e){super(),this.m_iGeom=-1,this.m_aGeoms=e?e.slice():[]}next(){if(this.m_iGeom<this.m_aGeoms.length-1){let e=this.m_aGeoms[++this.m_iGeom];return this.m_aGeoms[this.m_iGeom]=null,e}return null}tock(){return!1}getGeometryID(){return this.m_iGeom}getRank(){return 1}}},11023:(e,t,i)=>{i.d(t,{D:()=>E,m:()=>o,s:()=>d,w:()=>y});var n=i(81856),s=i(16404),r=i(32045),a=i(40224),_=i(92656),h=i(73750),m=i(31632);function o(){return{outPoint:new _.P,index:-1,t:Number.NaN}}function l(e,t,i){return{outPoint:e.clone(),index:t,t:i}}function u(e,t,i,n){e.outPoint.assign(t),e.index=i,e.t=n}function g(e,t){e.outPoint.assign(t.outPoint),e.index=t.index,e.t=t.t}function p(e,t,i,n){e.index=i,e.t=n,t.queryCoord2D(e.t,e.outPoint)}function c(e,t){let i=o();g(i,e),g(e,t),g(t,i)}function y(e,t,i,n,r,_){if(e.getGeometryType()===s.G.enumPolygon){for(;n.nextPath();)if(n.hasNextSegment()){let t=n.nextSegment();if(0!==(0,a.i)(e,t.getEndXY(),0))return u(r,t.getEndXY(),-1,Number.NaN),u(_,t.getEndXY(),-1,Number.NaN),!0}n.resetToFirstPath()}if(t.getGeometryType()===s.G.enumPolygon){for(;i.nextPath();)if(i.hasNextSegment()){let e=i.nextSegment();if(0!==(0,a.i)(t,e.getEndXY(),0))return u(r,e.getEndXY(),-1,Number.NaN),u(_,e.getEndXY(),-1,Number.NaN),!0}i.resetToFirstPath()}return!1}function d(e){let t=e.getPathCount(),i=(0,_.d)(e.getSegmentCount(),0),n=0;for(let s=0;s<t;++s){let t=n+e.getSegmentCountPath(s);for(let r=n,a=e.getPathStart(s);r<t;++r,++a)i[r]=a;n=t}return(0,r.s)(e.getPointCount(),i),i}function P(e,t){return!!Number.isNaN(t)||e<=t}function f(e){let t=new r.a;return t.addEnvelope(e,!1),t}class E{constructor(e,t){if(this.m_env2DgeometryA=null,this.m_env2DgeometryB=null,this.m_progressCounter=0,this.m_progressTracker=t,this.m_maxSqrDistance=e*e,this.m_maxDistance=e,this.m_bIsNearCalc=!1,Number.isNaN(this.m_maxDistance)?this.m_maxDistance=Number.POSITIVE_INFINITY:this.m_maxDistance=e,this.m_maxSqrDistance=this.m_maxDistance*this.m_maxDistance,Number.isFinite(this.m_maxSqrDistance)){let e=Math.sqrt(this.m_maxSqrDistance);for(;e<this.m_maxDistance;)this.m_maxSqrDistance*=1+Number.EPSILON,e=Math.sqrt(this.m_maxSqrDistance)}}calculate(e,t,i,n){if((e.getGeometryType()!==m.P.type||t.getGeometryType()!==m.P.type)&&(this.m_env2DgeometryA=new h.J,this.m_env2DgeometryB=new h.J,e.queryEnvelope(this.m_env2DgeometryA),t.queryEnvelope(this.m_env2DgeometryB),!P(this.m_env2DgeometryA.distanceFromEnvelope(this.m_env2DgeometryB),this.m_maxDistance)))return Number.POSITIVE_INFINITY;let s=l(new _.P,(0,_.j)(),Number.NaN),r=l(new _.P,(0,_.j)(),Number.NaN),a=this._ExecuteBruteForce(e,t,s,r);return P(a,this.m_maxDistance)?(null!==i&&g(i,s),null!==n&&g(n,r),a):Number.POSITIVE_INFINITY}isNear(e,t){if(this.m_bIsNearCalc=!0,e.isEmpty()||t.isEmpty())return!1;if(e===t)return!0;let i=!0;if(e.getGeometryType()!==m.P.type&&e.getGeometryType()!==m.E.type||t.getGeometryType()!==m.P.type&&t.getGeometryType()!==m.E.type||(i=!1),i){if(this.m_env2DgeometryA=new h.J,this.m_env2DgeometryB=new h.J,e.queryEnvelope(this.m_env2DgeometryA),t.queryEnvelope(this.m_env2DgeometryB),!(this.m_env2DgeometryA.sqrMaxMinDistanceEnvelope(this.m_env2DgeometryB)>this.m_maxSqrDistance))return!0;if(this.m_env2DgeometryA.sqrDistanceEnvelope(this.m_env2DgeometryB,null,null)>this.m_maxSqrDistance)return!1}let n=l(new _.P,(0,_.j)(),Number.NaN),s=l(new _.P,(0,_.j)(),Number.NaN);return this._ExecuteBruteForce(e,t,n,s)<=this.m_maxDistance}progress_(e=!1){}_ExecuteBruteForce(e,t,i,n){switch(e.getGeometryType()){case s.G.enumPoint:return this.distancePointGeometry(e,t,i,n);case s.G.enumMultiPoint:return this.distanceMultipointGeometry(e,t,i,n);case s.G.enumEnvelope:return this.distanceEnvelopeGeometry(e,t,i,n);case s.G.enumPolyline:case s.G.enumPolygon:return this.distanceMultipathGeometry(e,t,i,n);default:return Number.NaN}}distancePointGeometry(e,t,i,n){switch(t.getGeometryType()){case s.G.enumPoint:return this.distancePointPoint(e,t,i,n);case s.G.enumMultiPoint:return this.distancePointMultipoint(e,t,i,n);case s.G.enumPolyline:case s.G.enumPolygon:return this.distancePointMultipath(e,t,i,n);case s.G.enumEnvelope:return this.distancePointEnvelope(e,t,i,n);default:return Number.NaN}}distancePointPoint(e,t,i,n){let s=e.getXY(),r=t.getXY();return u(i,s,0,0),u(n,r,0,0),Math.sqrt(_.P.sqrDistance(s,r))}distancePointMultipoint(e,t,i,n){let s=e.getXY(),r=this.m_maxSqrDistance,a=r,h=!1,m=t.getPointCount(),o=new _.P;for(let e=0;e<m;++e)if(t.queryXY(e,o),a=_.P.sqrDistance(s,o),this.m_bIsNearCalc){if(a<=r)return 0}else if(!(a>r)&&(!h&&a===r||a<r)&&(r=a,u(i,s,0,0),u(n,o,e,0),h=!0,0===r))return 0;return h?Math.sqrt(r):Number.POSITIVE_INFINITY}distancePointMultipath(e,t,i,n){let r=!this.m_env2DgeometryA.isIntersecting(this.m_env2DgeometryB),m=e.getXY();if(!r&&t.getGeometryType()===s.G.enumPolygon&&0!==(0,a.i)(t,m,0))return u(i,m,0,0),u(n,m,-1,Number.NaN),0;t.getImpl().getAccelerators();let o=this.m_maxSqrDistance,l=o,g=-1,p=new h.J,c=t.querySegmentIterator(),y=!1;for(;c.nextPath();)for(;c.hasNextSegment();){let e=c.nextSegment();e.queryEnvelope(p);let t=p.sqrDistance(m);if(t>o||!this.m_bIsNearCalc&&y&&t===o)continue;g=e.getClosestCoordinate(m,!1);let s=e.getCoord2D(g);if(l=_.P.sqrDistance(m,s),this.m_bIsNearCalc){if(l<=o)return 0}else if(!(l>o)&&(!y||l<o)&&(o=l,u(i,m,0,0),u(n,s,c.getStartPointIndex(),g),y=!0,0===o))return 0}return y?Math.sqrt(o):Number.POSITIVE_INFINITY}distancePointEnvelope(e,t,i,n){let s=e.getXY();u(i,s,0,0),u(n,s,-1,Number.NaN);let r=t.asEnvelope2D();return r.contains(s)?0:Math.sqrt(r.sqrDistance(s,n.outPoint))}distanceMultipointGeometry(e,t,i,n){switch(t.getGeometryType()){case s.G.enumPoint:{this.m_env2DgeometryB=(0,_.b)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB);let s=this.distancePointMultipoint(t,e,n,i);return this.m_env2DgeometryB=(0,_.b)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),s}case s.G.enumMultiPoint:return this.distanceMultipointMultipoint(e,t,i,n,1,1);case s.G.enumPolyline:case s.G.enumPolygon:return this.distanceMultipointMultipath(e,t,i,n);case s.G.enumEnvelope:return this.distanceMultipointMultipath(e,f(t),i,n);default:return Number.NaN}}distanceMultipointMultipoint(e,t,i,s,r,a){let h={stack:[],error:void 0,hasError:!1};try{if(this.m_bIsNearCalc&&1===r&&1===a){let n=Math.trunc((0,_.c)(Math.sqrt(e.getPointCount())+1,1,(0,_.i)())),r=Math.trunc((0,_.c)(Math.sqrt(t.getPointCount())+1,1,(0,_.i)()));if((n>=4||r>=4)&&this.distanceMultipointMultipoint(e,t,i,s,n,r)<=this.m_maxSqrDistance)return 0}let m=this.m_maxSqrDistance,o=[e],l=[t],g=this.swapGeometriesIfBGtA(o,l);g&&(this.m_env2DgeometryB=(0,_.b)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),a=(0,_.b)(r,r=a),c(i,s)),(0,n.b)(h,(0,_.h)(()=>{c(i,s),this.m_env2DgeometryB=(0,_.b)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB)},!g),!1);let p=o[0].getImpl(),y=l[0].getImpl(),d=p.getPointCount(),P=y.getPointCount(),f=P>1,E=!1,x=new _.P,S=new _.P;for(let e=0;e<d;e+=r){if(p.queryXY(e,x),f){let e=this.m_env2DgeometryB.sqrDistance(x);if(this.m_bIsNearCalc){if(e>m)continue;if(this.m_env2DgeometryB.sqrMaxMinDistance(x)<=m)return 0}else if(e>=m)continue}for(let t=0;t<P;t+=a){y.queryXY(t,S);let n=_.P.sqrDistance(x,S);if(this.m_bIsNearCalc){if(n<=m)return 0}else if(!(n>m||E&&n===m)&&(!E||n<m)&&(u(i,x,e,0),u(s,S,t,0),E=!0,m=n,0===m))return E?Math.sqrt(m):Number.POSITIVE_INFINITY}}return E?Math.sqrt(m):Number.POSITIVE_INFINITY}catch(e){h.error=e,h.hasError=!0}finally{(0,n.c)(h)}}distanceMultipointMultipath(e,t,i,n){let r=!!this.m_env2DgeometryA.isIntersecting(this.m_env2DgeometryB)&&t.getGeometryType()===s.G.enumPolygon,m=t.querySegmentIterator();m.stripAttributes();let o=new h.J,l=new _.P,g=this.m_maxSqrDistance,p=e.getImpl(),c=p.getPointCount(),y=c>1,d=!1;for(;m.nextPath();)for(;m.hasNextSegment();){let e=m.nextSegment();if(e.queryLooseEnvelope(o),y){let e=o.sqrDistanceEnvelope(this.m_env2DgeometryA,null,null);if(this.m_bIsNearCalc){if(e>g)continue}else if(e>g||d&&e===g)continue}for(let s=0;s<c;s++){if(p.queryXY(s,l),r&&0!==(0,a.i)(t,l,0))return u(i,l,-1,Number.NaN),u(n,l,s,0),0;{let e=o.sqrDistance(l);if(this.m_bIsNearCalc){if(e>g)continue}else if(e>g)continue}let _=e.getClosestCoordinate(l,!1),h=e.getCoord2D(_);l.subThis(h);let c=l.sqrLength();if(this.m_bIsNearCalc){if(c<=g)return 0}else if(!(c>g)&&(!d||c<g)&&(g=c,u(i,p.getXY(s),s,0),u(n,h,m.getStartPointIndex(),_),d=!0,0===g))return 0}r=!1}return d?Math.sqrt(g):Number.POSITIVE_INFINITY}distanceEnvelopeGeometry(e,t,i,n){switch(t.getGeometryType()){case s.G.enumPoint:return this.distancePointEnvelope(t,e,n,i);case s.G.enumMultiPoint:{this.m_env2DgeometryB=(0,_.b)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB);let s=this.distanceMultipointMultipath(t,f(e),n,i);return this.m_env2DgeometryB=(0,_.b)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),s}case s.G.enumPolyline:case s.G.enumPolygon:return this.distanceMultipathMultipath(f(e),t,i,n);case s.G.enumEnvelope:return this.distanceEnvelopeEnvelope(e,t,i,n);default:return Number.NaN}}distanceEnvelopeEnvelope(e,t,i,n){i.t=Number.NaN,i.index=-1,n.t=Number.NaN,n.index=-1;let s=e.asEnvelope2D(),r=t.asEnvelope2D();return Math.sqrt(s.sqrDistanceEnvelope(r,i.outPoint,n.outPoint))}distanceMultipathGeometry(e,t,i,n){switch(t.getGeometryType()){case s.G.enumPoint:{this.m_env2DgeometryB=(0,_.b)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB);let s=this.distancePointMultipath(t,e,n,i);return this.m_env2DgeometryB=(0,_.b)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),s}case s.G.enumMultiPoint:{this.m_env2DgeometryB=(0,_.b)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB);let s=this.distanceMultipointMultipath(t,e,n,i);return this.m_env2DgeometryB=(0,_.b)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),s}case s.G.enumPolyline:case s.G.enumPolygon:return this.distanceMultipathMultipath(e,t,i,n);case s.G.enumEnvelope:return this.distanceMultipathMultipath(e,f(t),i,n);default:return Number.NaN}}distanceMultipathMultipath(e,t,i,s){let a={stack:[],error:void 0,hasError:!1};try{let m=[e],l=[t],u=this.swapGeometriesIfAGtB(m,l);u&&(this.m_env2DgeometryB=(0,_.b)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),c(i,s)),(0,n.b)(a,(0,_.h)(()=>{c(i,s),this.m_env2DgeometryB=(0,_.b)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB)},!u),!1);let P=m[0],f=l[0],E=P.querySegmentIterator();E.stripAttributes();let x=f.querySegmentIterator();if(x.stripAttributes(),this.m_bIsNearCalc&&this.m_env2DgeometryA.sqrMaxMinDistanceEnvelope(this.m_env2DgeometryB)<=this.m_maxSqrDistance)return 0;if(this.m_bIsNearCalc){let e=Math.trunc((0,_.c)(Math.sqrt(P.getPointCount())+1,1,(0,_.i)())),t=Math.trunc((0,_.c)(Math.sqrt(P.getPointCount())+1,1,(0,_.i)()));if(this.distanceMultipointMultipoint(P,f,i,s,e,t)<=this.m_maxSqrDistance)return 0}if(this.m_env2DgeometryA.isIntersecting(this.m_env2DgeometryB)){let e=o(),t=o();if(y(P,f,E,x,e,t))return g(i,e),g(s,t),0}let S=d(P),N=[],v=new r.S,A=new h.J,M=new h.J,D=new h.J,b=this.m_maxSqrDistance,C=!0,T=!1;for(let e=0,t=S.length;e<t;++e){P.querySegment(S[e],v,!0);let t=v.get();if(t.queryEnvelope(A),!(A.sqrDistanceEnvelope(this.m_env2DgeometryB,null,null)>b)){if(this.m_bIsNearCalc&&A.sqrMaxDistanceEnvelope(this.m_env2DgeometryB)<=b)return 0;for(;x.nextPath();){if(this.progress_(),C)f.queryPathEnvelope(x.getPathIndex(),D),N[x.getPathIndex()]=D.clone();else if(A.sqrDistanceEnvelope(N[x.getPathIndex()],null,null)>b)continue;for(;x.hasNextSegment();){let n=x.nextSegment();if(n.queryEnvelope(M),A.sqrDistanceEnvelope(M,null,null)<=b){let r=!A.isIntersecting(M),a=[0],_=[0],h=t.distance(n,r,a,_);if(h*=h,this.m_bIsNearCalc&&h<=this.m_maxSqrDistance)return 0;if(h<b||h===b&&S[e]<i.index){if(T=!0,p(i,t,S[e],a[0]),p(s,n,x.getStartPointIndex(),_[0]),0===h)return 0;b=h}}}}x.resetToFirstPath(),C=!1}}return T?Math.sqrt(b):Number.POSITIVE_INFINITY}catch(e){a.error=e,a.hasError=!0}finally{(0,n.c)(a)}}swapGeometriesIfAGtB(e,t){return(0,s.v)(e[0])>(0,s.v)(t[0])&&(t[0]=(0,_.b)(e[0],e[0]=t[0]),!0)}swapGeometriesIfBGtA(e,t){return this.swapGeometriesIfAGtB(t,e)}}},15546:(e,t,i)=>{i.d(t,{O:()=>c});var n=i(16404),s=i(40224),r=i(32045),a=i(92656),_=i(31632),h=i(73750),m=i(99506),o=i(23750);function l(){return{m_pGcs:new a.P,m_xyz:new _.h,m_factor:Number.NaN,m_geoLength:Number.NaN,setValues:u,setLength:g,assign:p}}function u(e,t,i,n){this.m_factor=e,this.m_pGcs.assign(t),this.m_xyz.assign(n),this.m_geoLength=i}function g(e){this.m_geoLength=e}function p(e){this.m_pGcs.assign(e.m_pGcs),this.m_xyz.assign(e.m_xyz),this.m_factor=e.m_factor,this.m_geoLength=e.m_geoLength}class c{getOperatorType(){return 10315}supportsCurves(){return!0}accelerateGeometry(e,t,i){return!1}canAccelerateGeometry(e){return!1}_ExecuteShapePreservingLength(e,t,i,n,r){if(e.hasNonLinearSegments()&&(e=(new m.O).execute(e,0,t.getTolerance(0),0,r)),t.isPannable()){let n=90,a=-90;if(1===i.getUnit().getUnitToBaseFactor()&&(n*=Math.PI/180,a*=Math.PI/180),2===t.getCoordinateSystemType()){let e=null,i=[0,0,0,0];e=t.getPECoordSys(),i[0]=0,i[1]=n,i[2]=0,i[3]=a,s.Z.geogToProj(e,2,i),n=i[1],a=i[3]}let _=new h.J;e.queryEnvelope(_),_.ymin=a,_.ymax=n,e=(new o.O).execute(e,_,t,r)}else{let i=t.getPCSHorizon();(e=(new s.f).execute(e,i,t,r))===i&&(e=e.clone())}return e.isEmpty()?0:this._ExecuteIterativeApproach(e,t,i,n,1,r)}_ExecuteIterativeApproach(e,t,i,r,h,m){let o,u=(0,s.G)();i.querySpheroidData(u);let g=u.majorSemiAxis,p=u.e2,c=i.getUnit().getUnitToBaseFactor(),P=(0,a.p)(l,40),f=(0,a.d)(40,Number.NaN),E=l(),x=l(),S=[0,0,0,0],N=t.getPECoordSys(),v=new a.P,A=new a.P,M=new a.P,D=new a.P,b=new a.P,C=0,T=e.querySegmentIterator();for(;T.nextPath();)for(;T.hasNextSegment();){let e=T.nextSegment();v.assign(e.getStartXY()),A.assign(e.getEndXY()),2===t.getCoordinateSystemType()?(S[0]=v.x,S[1]=v.y,S[2]=A.x,S[3]=A.y,s.Z.projToGeog(N,2,S),M.x=S[0]*c,M.y=S[1]*c,D.x=S[2]*c,D.y=S[3]*c):(M.setCoordsPoint2D(v),D.setCoordsPoint2D(A),M.scale(c),D.scale(c));let i=new _.h,r=new _.h;y(g,p,M,i),y(g,p,D,r);let a=d(g,i,r);E.setValues(0,M,Number.NaN,i),x.setValues(1,D,a,r),o=h,P[0].assign(x),f[0]=h;let m=0;for(;;){m>128&&(0,n.c)("iterations exceeded");let i=.5*(E.m_factor+x.m_factor),r=e.getCoord2D(i);2===t.getCoordinateSystemType()?(S[0]=r.x,S[1]=r.y,s.Z.projToGeog(N,1,S),b.x=S[0]*c,b.y=S[1]*c):(b.setCoordsPoint2D(r),b.scale(c)),M.setCoordsPoint2D(E.m_pGcs),D.setCoordsPoint2D(x.m_pGcs);let l=new _.h;y(g,p,b,l);let u=d(g,E.m_xyz,l),v=d(g,x.m_xyz,l);Number.isNaN(a=x.m_geoLength)&&(a=d(g,E.m_xyz,x.m_xyz));let A=u+v,T=o===h&&A>=20&&Math.abs(A-a)>1e-8*(a+A);if(m+2<40&&(T||Math.abs(A-a)>0&&o>0))x.setLength(v),P[m].assign(x),x.setValues(i,b,u,l),P[++m].assign(x),T?(o=h,f[m]=h):(o--,f[m-1]=o,f[m]=o);else{if(C+=A,0===m)break;E.assign(x),x.assign(P[--m]),o=f[m]}}}return C}execute(e,t,i){if(t&&0!==t.getCoordinateSystemType()||(0,n.t)(""),e.isEmpty()||1>e.getDimension())return 0;let a=null,_=t.getGCS();_!==t&&(a=(0,s.p)(t,_,null));let h=e.getGeometryType();if(h===n.G.enumEnvelope){let n=new r.a;return n.addEnvelope(e,!1),this._ExecuteShapePreservingLength(n,t,_,a,i)}if((0,n.f)(h)){let n=new r.P;return n.addSegment(e,!0),this._ExecuteShapePreservingLength(n,t,_,a,i)}return this._ExecuteShapePreservingLength(e,t,_,a,i)}}function y(e,t,i,n){n.assign((0,s.Q)(e,t,i))}function d(e,t,i){let n=new _.h;return n.setSub(t,i),2*e*Math.asin(n.length()/(2*e))}},24373:(e,t,i)=>{i.r(t),i.d(t,{OperatorGeodeticDensifyByLength:()=>a,OperatorGeodeticDensifyCursor:()=>_});var n=i(8288),s=i(16404),r=i(40224);class a{getOperatorType(){return 10310}supportsCurves(){return!0}accelerateGeometry(e,t,i){return!1}canAccelerateGeometry(e){return!1}executeMany(e,t,i,n,s){return new _(e,i,n,t,-1,-1,s)}execute(e,t,i,r,a){let _=new n.S([e]),h=this.executeMany(_,t,i,r,a).next();return h||(0,s.c)("null output"),h}}class _ extends n.G{constructor(e,t,i,n,r,a,_){super(),this.m_progressTracker=_,a>0&&(0,s.b)(""),4!==i&&r>0&&(0,s.b)(""),t||(0,s.t)(""),0===t.getCoordinateSystemType()&&(0,s.t)(""),n>0||r>0||(0,s.t)(""),this.m_index=-1,this.m_inputGeoms=e,this.m_spatialReference=t,this.m_curveType=i,this.m_maxLengthMeters=n,this.m_maxDeviationMeters=r,this.m_maxAngle=a}next(){{let e;for(;e=this.m_inputGeoms.next();)return(0,s.d)(e),this.m_index=this.m_inputGeoms.getGeometryID(),this.geodeticDensify(e);return null}}getGeometryID(){return this.m_index}tock(){return!0}getRank(){return 1}geodeticDensify(e){return(0,r.u)(e,this.m_spatialReference,this.m_curveType,this.m_maxLengthMeters,this.m_maxDeviationMeters,this.m_progressTracker)}}},94242:(e,t,i)=>{i.r(t),i.d(t,{OperatorGeodeticArea:()=>R});var n=i(16404),s=i(32045),r=i(99506),a=i(40224),_=i(92656),h=i(73750),m=i(31632),o=i(23750),l=i(15546),u=i(81856),g=i(26251),p=(i(11023),i(8288)),c=i(24373);function y(e){return e.xmin===e.xmax&&e.ymin===e.ymax}function d(e,t){let i,n=0;return(i=e.xmin-t.xmax)>n&&(n=i),(i=t.xmin-e.xmax)>n&&(n=i),n}Symbol.dispose;class P{}class f{constructor(e,t,i,n,s=0,r=4){this.m_ptDistFrom=new _.P,this.m_segStartPt=new _.P,this.m_segEndPt=new _.P,this.m_geodeticLength=new a.E,this.m_az12=new a.E,this.m_minGeodeticDist=new a.E,this.m_segStartPt3d=new m.h,this.m_segEndPt3d=new m.h,this.m_sr=n,this.m_distCurveType=s,this.m_segCurveType=r,this.m_inputGCS=this.m_sr.getGCS(),this.m_rpu=this.m_inputGCS.getUnit().getUnitToBaseFactor(),this.m_bIsPannablePcs=2===this.m_sr.getCoordinateSystemType()&&this.m_sr.isPannable();let h=(0,a.G)();this.m_inputGCS.querySpheroidData(h),this.m_a=h.majorSemiAxis,this.m_eSquared=h.e2,this.setPointDistFrom(e),this.setSegmentEndPoints(t,i)}setSegmentEndPoints(e,t){this.m_segStartPt.assign(e),this.m_segEndPt.assign(t),this.m_bIsPannablePcs||(this.m_segStartPt.mulThis(this.m_rpu),this.m_segEndPt.mulThis(this.m_rpu)),2===this.m_segCurveType&&(this.m_segStartPt3d.assign((0,a.Q)(this.m_a,this.m_eSquared,this.m_segStartPt)),this.m_segEndPt3d.assign((0,a.Q)(this.m_a,this.m_eSquared,this.m_segEndPt))),this.calculateAndUpdateSegmentLength()}setPointDistFrom(e){this.m_ptDistFrom.assign(e),this.m_ptDistFrom.scale(this.m_rpu)}setSegmentCurveType(e){this.m_segCurveType=e}setDistanceCurveType(e){this.m_distCurveType=e}makeFunctor(){return e=>{let t;switch(this.m_segCurveType){case 0:case 1:case 3:{let i={stack:[],error:void 0,hasError:!1};try{let n=(0,u.b)(i,new a.E,!1),s=(0,u.b)(i,new a.E,!1);a.F.geodeticCoordinate(this.m_a,this.m_eSquared,this.m_segStartPt.x,this.m_segStartPt.y,this.m_geodeticLength.val*e,this.m_az12.val,n,s,this.m_segCurveType),t=new _.P(n.val,s.val);break}catch(e){i.error=e,i.hasError=!0}finally{(0,u.c)(i)}}case 2:{let i=m.h.lerp(this.m_segStartPt3d,this.m_segEndPt3d,e);t=(0,a.Y)(this.m_a,this.m_eSquared,i);break}case 4:t=_.P.lerp(this.m_segStartPt,this.m_segEndPt,e),this.m_bIsPannablePcs&&((0,a.S)(this.m_sr,0,[t],1),t.mulThis(this.m_rpu));break;default:(0,n.c)("Invalid curve type")}return a.F.geodeticDistance(this.m_a,this.m_eSquared,this.m_ptDistFrom.x,this.m_ptDistFrom.y,t.x,t.y,this.m_minGeodeticDist,null,null,this.m_distCurveType),this.m_minGeodeticDist.val}}calculateAndUpdateSegmentLength(){switch(this.m_segCurveType){case 0:case 2:case 1:case 3:a.F.geodeticDistance(this.m_a,this.m_eSquared,this.m_segStartPt.x,this.m_segStartPt.y,this.m_segEndPt.x,this.m_segEndPt.y,this.m_geodeticLength,this.m_az12,null,this.m_segCurveType);break;case 4:this.m_geodeticLength.val=_.P.distance(this.m_segStartPt,this.m_segEndPt);break;default:(0,n.c)("Invalid curve type")}}[Symbol.dispose](){this.m_geodeticLength[Symbol.dispose](),this.m_az12[Symbol.dispose](),this.m_minGeodeticDist[Symbol.dispose]()}}Symbol.dispose;class E{constructor(e,t,i,n,s=100){this.m_startPt=e.clone(),this.m_endPt=t.clone(),this.m_cE2=n,this.m_cE=Math.sqrt(this.m_cE2),this.m_c1By2e=1/(2*this.m_cE),this.m_cRpu=i.getGCS().getUnit().getUnitToBaseFactor(),this.isPcs=2===i.getCoordinateSystemType(),this.PEProjcs=i.getPECoordSys(),this.m_points=(0,_.d)(2*s,Number.NaN)}setSegmentEndPoints(e,t){this.m_startPt.assign(e),this.m_endPt.assign(t)}makeFunctor(){return e=>{let t=[0,0];t[0]=this.m_startPt.x*(1-e)+this.m_endPt.x*e,t[1]=this.m_startPt.y*(1-e)+this.m_endPt.y*e,this.isPcs&&a.Z.projToGeogCenter(this.PEProjcs,1,t,0);let i=Math.sin(t[1]*this.m_cRpu);return 0===this.m_cE2?i:-Math.log((1-this.m_cE*i)/(1+this.m_cE*i))*this.m_c1By2e+i/(1-this.m_cE2*i*i)}}}function x(e,t,i,n,s){let _,m,o=(new r.O).execute(e,t,0,0,s);_=n?(new a.v).execute(o,n,s):o;let l=1===i.getUnit().getUnitToBaseFactor()?Math.PI/180:1,u=new h.J;_.queryEnvelope(u);let g=new h.J,p=new h.J,c=new h.J;return g.setCoords({xmin:u.xmin,ymin:75*l,xmax:u.xmax,ymax:90*l}),p.setCoords({xmin:u.xmin,ymin:-60*l,xmax:u.xmax,ymax:75*l}),c.setCoords({xmin:u.xmin,ymin:-90*l,xmax:u.xmax,ymax:-60*l}),g.inflateCoords(.01*g.width(),0),p.inflateCoords(.01*p.width(),0),c.inflateCoords(.01*c.width(),0),0+S(_,g,i,s)+S(_,p,i,s)+S(_,c,i,s)}function S(e,t,i,s){let r=(new o.O).execute(e,t,i,s);if(null!==r&&!r.isEmpty()){let e=new h.J;r.queryEnvelope(e);let{first:t,second:m}=function(e,t,i){let s,r=function(e,t,i){let s,r=e.getUnit().getUnitToBaseFactor(),h=t.getCenter();h.scale(180*r/Math.PI);let m=new _.P;m.x=0,m.y=0;let o=0;{h.y>45?(m.y=_.l,o=0):h.y<-45?(m.y=-_.l,o=1):h.x>=45&&h.x<135?(m.x=_.l,o=2):h.x>=135||h.x<-135?(m.x=_.l,o=3):h.x<-45&&h.x>=-135?(m.x=-_.l,o=4):(m.x=0,o=5);let e=r*Math.sqrt((0,_.s)(t.xmin-t.xmax)+(0,_.s)(t.ymin-t.ymax)),i=m.clone(),n=t.getCenter();if(n.scale(r),o<2&&(i.x=n.x),_.P.distance(i,n)+.5*e>_.l)return null}let l=N[o];if(null!==l&&l.getGCS().equalHorizontal(e))return l;let u=e.getText(),g=m.x,p=m.y,c=0,y=-1;6!==o?y=a.a4.PE_PRJ_LAMBERT_AZIMUTHAL_EQAREA:((0,n.g)(i),c=0,y=a.a4.PE_PRJ_CYLINDRICAL_EQAREA);let d=(0,a.aw)("EqualAreaPCS");y===a.a4.PE_PRJ_LAMBERT_AZIMUTHAL_EQAREA?s=`PROJCS["${d}",${u},PROJECTION["Lambert_Azimuthal_Equal_Area"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",0],PARAMETER["Central_Meridian",${g}],PARAMETER["Latitude_of_Origin",${p}],UNIT["Meter",1.0]]`:y===a.a4.PE_PRJ_CYLINDRICAL_EQAREA?s=`PROJCS["${d}",${u},PROJECTION["Cylindrical_Equal_Area"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",0],PARAMETER["Central_Meridian",${g}],PARAMETER["Standard_Parallel_1",${c}],PARAMETER["Latitude_of_Origin",${p}],UNIT["Meter",1.0]]`:(0,n.c)("getEqualAreaPcsFixed");let P=(0,a.b)(s);return N[o]&&N[o].destroy(),N[o]=P,P}(e,t,i);if(null!==r)return(0,_.n)(r,!1);let h=e.getText(),m=e.getUnit().getUnitToBaseFactor(),o=(t.xmin+t.width()/2)*m,l=(t.ymin+t.height()/2)*m,u=0,g=0,p=-1;t.ymin*m>=75*Math.PI/180||t.ymax*m<=-60*Math.PI/180?p=a.a4.PE_PRJ_LAMBERT_AZIMUTHAL_EQAREA:t.ymin>0||t.ymax<0?(u=(t.ymin+1/3*t.height())*m,g=(t.ymin+2/3*t.height())*m,p=a.a4.PE_PRJ_ALBERS):(u=(t.ymin+2/3*t.height())*m,p=a.a4.PE_PRJ_CYLINDRICAL_EQAREA);let c=(0,a.aw)("EqualAreaPCS");return p===a.a4.PE_PRJ_LAMBERT_AZIMUTHAL_EQAREA?s=`PROJCS["${c}",${h},PROJECTION["Lambert_Azimuthal_Equal_Area"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",0],PARAMETER["Central_Meridian",${o}],PARAMETER["Latitude_of_Origin",${l}],UNIT["Meter",1.0]]`:p===a.a4.PE_PRJ_ALBERS?s=`PROJCS["${c}",${h},PROJECTION["Albers"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",0],PARAMETER["Central_Meridian",${o}],PARAMETER["Standard_Parallel_1",${u}],PARAMETER["Standard_Parallel_2",${g}],PARAMETER["Latitude_of_Origin",${l}],UNIT["Meter",1.0]]`:p===a.a4.PE_PRJ_CYLINDRICAL_EQAREA?s=`PROJCS["${c}",${h},PROJECTION["Cylindrical_Equal_Area"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",0],PARAMETER["Central_Meridian",${o}],PARAMETER["Standard_Parallel_1",${u}],PARAMETER["Latitude_of_Origin",${l}],UNIT["Meter",1.0]]`:(0,n.c)("getEqualAreaPCSInstance"),(0,_.n)((0,a.b)(s),!0)}(i,e,!1),o=(0,a.p)(i,t,null),l=(new a.v).execute(r,o,s).calculateArea2D();return m&&t.destroy(),l}return 0}let N=[null,null,null,null,null,null,null];class v{getOperatorType(){return 10314}supportsCurves(){return!0}accelerateGeometry(e,t,i){return!1}canAccelerateGeometry(e){return!1}execute(e,t,i){if(0===t.getCoordinateSystemType()&&(0,n.t)(""),e.isEmpty()||2>e.getDimension())return 0;if((0,n.d)(e),e.getGeometryType()===n.G.enumEnvelope){let n=new s.a;return n.addEnvelope(e,!1),this.execute(n,t,i)}let u=e;e.getDescription().getAttributeCount()>1&&(u=e.clone()).dropAllAttributes();let g=(new r.O).execute(u,0,t.getTolerance(0),0,i),p=null,c=t.getGCS();c!==t&&(p=(0,a.p)(t,c));let y=(new a.g).execute(g,t,!1,i);return y.isEmpty()?0:(y===e&&(y=e.clone()),t.isPannable()?function(e,t,i){let n=new h.J;e.queryEnvelope(n);let r=(0,m.a)(t,n,!0).total(),l=t.getPannableExtent();l.xmin=n.xmin-10*r,l.xmax=n.xmax+10*r;let u=(new o.O).execute(e,l,t,i).getImpl().querySegmentIterator();u.stripAttributes();let g=(0,a.G)();t.querySpheroidData(g);let p=g.e2,c=0===p?2:1,y=new _.P(0,0),d=new _.P(0,0),P=new _.K(0),f=new E(y,d,t,p,100);for(;u.nextPath();)for(;u.hasNextSegment();){let e=u.nextSegment();y.assign(e.getStartXY()),d.assign(e.getEndXY()),f.setSegmentEndPoints(y,d);let t=(0,s.x)(6,0,1,1e-12,1e-15,f.makeFunctor());P.pe((d.x-y.x)*t)}let x=g.majorSemiAxis;return c*x*x*(1-p)*Math.PI*P.getResult()/t.getPannableExtent().width()}(y,t,i):function(e,t,i,n,s){let r=function(e,t,i){let n=e.calculateLength2D(),s=(new l.O).execute(e,t,i)/25e3,r=Math.min(n/e.getSegmentCount()*2,n/s);return 0===r&&(r=1),(0,_.n)(r,n/r)}(e,t,s),a=x(e,r.first,i,n,s),h=1,m=0,o=0;do{if(h++,r.first*=.5,r.first<50*t.getTolerance(0))return a;r.second*=2,m=Math.abs((o=x(e,r.first,i,n,s))-a),a=o}while(Math.abs(a)>1&&m>1e-8*Math.abs(a)&&(r.second<65e3&&h<8||h<4));return o}(y,t,c,p,i))}}function A(){return{m_p_PCS:new _.P,m_factor:Number.NaN,setValues:M,assign:D}}function M(e,t){this.m_factor=e,this.m_p_PCS.assign(t)}function D(e){this.m_factor=e.m_factor,this.m_p_PCS.assign(e.m_p_PCS)}class b{constructor(e,t,i,n){let s;this.m_ptStart=new m.h,this.m_ptEnd=new m.h,this.m_ptStart.assign(t),this.m_ptEnd.assign(i),this.m_deltaX=this.m_ptEnd.x-this.m_ptStart.x,this.m_deltaY=this.m_ptEnd.y-this.m_ptStart.y,this.m_e=Math.sqrt(e),this.m_e2=e,this.m_c1MinusE2=1-e;let r=Math.sin(n);s=0===this.m_e2?2*r:r*((0,_.y)(this.m_e*r)+1/(1-this.m_e2*r*r)),this.m_baseA=s}setSegmentEndPoints(e,t){this.m_ptStart.assign(e),this.m_ptEnd.assign(t),this.m_deltaX=this.m_ptEnd.x-this.m_ptStart.x,this.m_deltaY=this.m_ptEnd.y-this.m_ptStart.y}makeFunctor(){return e=>{let t,i=1-e,n=i*this.m_ptStart.x+e*this.m_ptEnd.x,s=i*this.m_ptStart.y+e*this.m_ptEnd.y,r=i*this.m_ptStart.z+e*this.m_ptEnd.z,a=n*n+s*s,h=r/Math.sqrt(r*r+this.m_c1MinusE2*this.m_c1MinusE2*a);return t=0===this.m_e2?2*h:h*((0,_.y)(this.m_e*h)+1/(1-this.m_e2*h*h)),(this.m_deltaY*n-this.m_deltaX*s)/a*(t-this.m_baseA)}}}function C(){return{sin_phi:Number.NaN,one_p_sin_phi:Number.NaN,one_m_sin_phi:Number.NaN,one_m_e_2_sin_2_phi:Number.NaN,sin_half_phi_pf:Number.NaN,sin_half_phi_pz:Number.NaN,sin_half_asin_e_sin_phi_pf:Number.NaN,sin_half_asin_e_sin_phi_pz:Number.NaN,atanh_sin_phi:Number.NaN,atanh_esin_phi:Number.NaN,make_negative:!1,initialize:T,changeSign:q,assign:w,clone:I}}function T(e,t,i,n){let s=.5*e;this.sin_phi=Math.sin(e);let r=t*this.sin_phi,a=.5*Math.asin(r);this.one_p_sin_phi=1+this.sin_phi,this.one_m_sin_phi=1-this.sin_phi,this.one_m_e_2_sin_2_phi=(1+r)*(1-r),this.sin_half_phi_pf=Math.sin(s+i),this.sin_half_phi_pz=Math.sin(s+n),this.sin_half_asin_e_sin_phi_pf=Math.sin(a+i),this.sin_half_asin_e_sin_phi_pz=Math.sin(a+n),this.atanh_sin_phi=Math.log(this.sin_half_phi_pf/this.sin_half_phi_pz),this.atanh_esin_phi=Math.log(this.sin_half_asin_e_sin_phi_pf/this.sin_half_asin_e_sin_phi_pz)}function q(){this.sin_phi=-this.sin_phi;let e=this.one_p_sin_phi;this.one_p_sin_phi=this.one_m_sin_phi,this.one_m_sin_phi=e,e=this.sin_half_phi_pf,this.sin_half_phi_pf=this.sin_half_phi_pz,this.sin_half_phi_pz=e,e=this.sin_half_asin_e_sin_phi_pf,this.sin_half_asin_e_sin_phi_pf=this.sin_half_asin_e_sin_phi_pz,this.sin_half_asin_e_sin_phi_pz=e,this.atanh_sin_phi=-this.atanh_sin_phi,this.atanh_esin_phi=-this.atanh_esin_phi}function w(e){this.sin_phi=e.sin_phi,this.one_p_sin_phi=e.one_p_sin_phi,this.one_m_sin_phi=e.one_m_sin_phi,this.one_m_e_2_sin_2_phi=e.one_m_e_2_sin_2_phi,this.sin_half_phi_pf=e.sin_half_phi_pf,this.sin_half_phi_pz=e.sin_half_phi_pz,this.sin_half_asin_e_sin_phi_pf=e.sin_half_asin_e_sin_phi_pf,this.sin_half_asin_e_sin_phi_pz=e.sin_half_asin_e_sin_phi_pz,this.atanh_sin_phi=e.atanh_sin_phi,this.atanh_esin_phi=e.atanh_esin_phi,this.make_negative=e.make_negative}function I(){return{...this}}class G{constructor(e,t,i){this.m_transformPCS2GCS=null,this.m_scaleToRadians=new g.T,this.m_scaleToDegrees=new g.T,this.m_progressTracker=i,(0,n.g)(4!==t),this.m_curveType=t,this.m_inputSR=e,e&&0!==e.getCoordinateSystemType()||(0,n.t)(""),this.m_inputGCS=e.getGCS(),this.m_a=0,this.m_eSquared=0,this.m_b=0,this.m_rpu=0}executePolygonGeodeticArea(e){let t,i=e.clone();if(i.dropAllAttributes(),e.hasNonLinearSegments()&&(i=(new r.O).execute(i,0,this.m_inputSR.getTolerance(0),0,this.m_progressTracker)),this.m_inputSR.isPannable()){let e=new h.J;i.queryEnvelope(e);let t=this.m_inputSR.getPannableExtent();if(!t.containsEnvelope(e)){let n=t.getCenterX()-e.getCenterX(),s=new g.T;s.setShiftCoords(n,0),i.applyTransformation(s),e.move(n,0);let r=new _.E;t.queryIntervalX(r);let h=new _.E;e.queryIntervalX(h),i=r.contains(h)?(0,a.w)(i,this.m_inputSR):(new a.v).foldInto360RangeGeodetic(i,this.m_inputSR,this.m_curveType)}}if(this.m_transformPCS2GCS?(t=(i=(new a.g).execute(i,this.m_inputSR,!1,this.m_progressTracker)).createInstance(),(0,a.$)(this.m_transformPCS2GCS,i,t,this.m_progressTracker)||(t=(new a.v).execute(i,this.m_transformPCS2GCS,this.m_progressTracker))):t=(new a.g).execute(i,this.m_inputGCS,!1,this.m_progressTracker),t.isEmpty())return 0;if(1===this.m_curveType){let e=(0,a.G)();return this.m_inputGCS.querySpheroidData(e),this.m_a=e.majorSemiAxis,this.m_eSquared=e.e2,this.loxodromeArea(t)}let n=t.getImpl();this.m_rpu=this.m_inputGCS.getUnit().getUnitToBaseFactor(),this.m_scaleToRadians.setScale(this.m_rpu),n.applyTransformation(this.m_scaleToRadians),this.m_scaleToDegrees=this.m_scaleToRadians,this.m_scaleToDegrees.invertThis();let s=(0,a.G)();if(this.m_inputGCS.querySpheroidData(s),this.m_a=s.majorSemiAxis,this.m_b=s.minorSemiAxis,this.m_eSquared=s.e2,2===this.m_curveType)return this.executeClippedPolygonGreatEllipticArea(t);{let e={stack:[],error:void 0,hasError:!1};try{let i=a.ax.unit(9101),n=this.m_inputGCS.getPECoordSys(),s=(0,u.b)(e,n.cloneAlterUnits(i),!1),r,_,h=this.executeClippedPolygonGeodeticArea(t,s,0),m=0;do m++,r=this.executeClippedPolygonGeodeticArea(t,s,m),_=Math.abs(r-h),h=r;while(Math.abs(r)>1&&_>1e-8*Math.abs(r)&&m<7);return r}catch(t){e.error=t,e.hasError=!0}finally{(0,u.c)(e)}}}executeClippedPolygonGeodeticArea(e,t,i){let n={stack:[],error:void 0,hasError:!1};try{let s,r,m,o,l,g,p,c=new h.J;e.queryEnvelope(c);let y=(0,u.b)(n,this.getEqualAreaPCSInstance(t,c),!1),d=e.clone();(0,a.ay)(y,d);let P=d.getImpl().getAttributeStreamRef(0),f=e.getImpl().getAttributeStreamRef(0),E=(0,u.b)(n,new a.E,!1),x=(0,u.b)(n,new a.E,!1),S=[0,0],N=(0,_.p)(A,40),v=(0,_.d)(40,-1),M=A(),D=A(),b=d.calculateArea2D(),C=new _.K(0),T=.5*Math.PI,q=1e-10*Math.abs(b)+1e-6,w=e.getPathCount(),I=new _.P,G=new _.P,R=new _.P,L=new _.P,B=new _.P,z=new _.P;for(o=e.getPathStart(0),m=0;m<w;m++,o=l)for(l=e.getPathEnd(m),P.queryPoint2D(l-1<<1,R),f.queryPoint2D(l-1<<1,I),Math.abs(I.y)>T&&(I.y=(0,_.f)(T,I.y)),g=o;g<l;g++,R.assign(L),I.assign(G)){if(P.queryPoint2D(g<<1,L),f.queryPoint2D(g<<1,G),Math.abs(G.y)>T&&(G.y=(0,_.f)(T,G.y)),50>_.P.distance(R,L)||0===I.y&&0===G.y)continue;a.F.geodeticDistance(this.m_a,this.m_eSquared,I.x,I.y,G.x,G.y,E,x,null,this.m_curveType);let e=E.val,t=x.val;for(M.setValues(0,R),D.setValues(1,L),r=i,N[0].assign(D),v[0]=i,s=0;s>=0;){p=.5*(M.m_factor+D.m_factor),a.F.geodeticCoordinate(this.m_a,this.m_eSquared,I.x,I.y,e*p,t,E,x,this.m_curveType),B.x=E.val,B.y=x.val,S[0]=B.x,S[1]=B.y,a.Z.geogToProj(y,1,S),z.x=S[0],z.y=S[1];let i=-z.offset(M.m_p_PCS,D.m_p_PCS),n=.5*i*_.P.distance(M.m_p_PCS,D.m_p_PCS);if(C.pe(n),Math.abs(n)>q||Math.abs(n)>0&&r>0)D.setValues(p,z),N[++s].assign(D),Math.abs(n)<=q?(r--,v[s-1]=r):r=v[s-1],v[s]=r;else{if(s<=0)break;M.assign(D),s--,D.assign(N[s]),r=v[s]}}}return b+=C.getResult(),Math.abs(b)}catch(e){n.error=e,n.hasError=!0}finally{(0,u.c)(n)}}executeClippedPolygonGreatEllipticArea(e){let t=[],i=[],n=new _.P,s=new _.P,r=(0,a.Q)(1,this.m_eSquared,new _.P(0,.5*Math.PI)),o=new _.K(0),l=new _.K(0),u=new _.K(0),g=new m.h,p=new m.h,c=new h.J;e.queryLooseEnvelope(c);let y=0;c.containsCoords(c.xmin,0)||(y=Math.abs(c.ymin)<Math.abs(c.ymax)?c.ymin:c.ymax);let d=new b(this.m_eSquared,g,p,y),P=this.m_a*this.m_a,f=e.getImpl().querySegmentIterator();for(f.stripAttributes();f.nextPath();)for(;f.hasNextSegment();){let e=f.nextSegment();for(let r of(n.assign(e.getStartXY()),s.assign(e.getEndXY()),s.x-n.x>Math.PI?n.x+=2*Math.PI:s.x-n.x<-Math.PI&&(s.x+=2*Math.PI),this.splitSegmentCrossingItegralThreshold(e,t,i),t))g.assign((0,a.Q)(this.m_a,this.m_eSquared,r.getStartXY())),p.assign((0,a.Q)(this.m_a,this.m_eSquared,r.getEndXY())),d.setSegmentEndPoints(g,p),this.adaptiveIntegrationWithRomberg(d,o);for(let e of i){let t=e.getStartXY(),i=e.getEndXY(),n=y;t.y<0&&(i=(0,_.b)(t,t=i),t.y=-t.y,i.y=-i.y,n=-n);let s=(0,a.Q)(1,this.m_eSquared,t),h=(0,a.Q)(1,this.m_eSquared,i),o=Math.min(t.y,i.y),g=(0,a.az)(this.m_eSquared,t.x,i.x,n,o);l.pe(g);let p=Math.abs((0,a.az)(this.m_eSquared,t.x,i.x,o,_.l)),c=new m.h;c.setSub(s,r);let d=new m.h;d.setSub(h,r);let f=new m.h;f.setCrossProductVector(c,d);let E=P*(p-.5*f.length());E=(0,_.f)(E,i.x-t.x),u.pe(E)}t.length=0,i.length=0}return u.getResult()+P*(.5*(1-this.m_eSquared)*o.getResult()+l.getResult())}getEqualAreaPCSInstance(e,t){let i,n,s,r=t.getCenterX(),h=t.height();(s=t.ymin>45*Math.PI/180||t.ymax<-(45*Math.PI)/180)?i=(0,_.f)(.5*Math.PI,t.getCenterY()):(i=t.getCenterY(),n=t.ymin+2/3*h);let m=(0,a.aw)("EqualAreaPCS"),o=e.toString();return s?a.ax.fromString(a.a4.PE_TYPE_PROJCS,`PROJCS["${m}", ${o}, PROJECTION["Lambert_Azimuthal_Equal_Area"],PARAMETER["False_Easting",0],PARAMETER["False_Northing", 0],PARAMETER["Central_Meridian", ${r}], PARAMETER["Latitude_of_Origin", ${i}], UNIT["Meter",1.0]]`):a.ax.fromString(a.a4.PE_TYPE_PROJCS,`PROJCS["${m}", ${o}, PROJECTION["Cylindrical_Equal_Area"],PARAMETER["False_Easting", 0],PARAMETER["False_Northing", 0],PARAMETER["Central_Meridian", ${r}],PARAMETER["Standard_Parallel_1", ${n}],PARAMETER["Latitude_of_Origin", ${i}],UNIT["Meter",1.0]]`)}splitSegmentCrossingItegralThreshold(e,t,i){let n=(0,a.Q)(this.m_a,this.m_eSquared,new _.P(0,_.l)),r=(0,a.Q)(this.m_a,this.m_eSquared,new _.P(0,-_.l));for(let h of this.splitSegmentPassingThroughPole(e)){let e=h.getStartXY(),o=h.getEndXY(),l=(0,a.Q)(this.m_a,this.m_eSquared,e),u=(0,a.Q)(this.m_a,this.m_eSquared,o),g=new _.P,p=new m.h,c=m.h.sqrDistance(n,l),y=m.h.sqrDistance(l,u);if(c<=100){if(!(y>400)){i.push(new s.L({start:e,end:o}));continue}p.assign(u.sub(l)),p.normalizeThis(),p.assign(l.add(p.mul(20))),g.assign((0,a.Y)(this.m_a,this.m_eSquared,p)),i.push(new s.L({start:e,end:g})),e.assign(g)}if(l.assign((0,a.Q)(this.m_a,this.m_eSquared,e)),c=m.h.sqrDistance(n,u),y=m.h.sqrDistance(l,u),c<=100){if(!(y>400)){i.push(new s.L({start:e,end:o}));continue}p.assign(u.sub(l)),p.normalizeThis(),p.assign(u.sub(p.mul(20))),g.assign((0,a.Y)(this.m_a,this.m_eSquared,p)),i.push(new s.L({start:g,end:o})),o.assign(g)}if(l.assign((0,a.Q)(this.m_a,this.m_eSquared,e)),u.assign((0,a.Q)(this.m_a,this.m_eSquared,o)),c=m.h.sqrDistance(r,l),y=m.h.sqrDistance(l,u),c<=100){if(!(y>400)){i.push(new s.L({start:e,end:o}));continue}p.assign(u.sub(l)),p.normalizeThis(),p.assign(l.add(p.mul(20))),g.assign((0,a.Y)(this.m_a,this.m_eSquared,p)),i.push(new s.L({start:e,end:g})),e.assign(g)}if(l.assign((0,a.Q)(this.m_a,this.m_eSquared,e)),u.assign((0,a.Q)(this.m_a,this.m_eSquared,o)),c=m.h.sqrDistance(r,u),y=m.h.sqrDistance(l,u),c<=100){if(!(y>400)){i.push(new s.L({start:e,end:o}));continue}p.assign(u.sub(l)),p.normalizeThis(),p.assign(u.sub(p.mul(20))),g.assign((0,a.Y)(this.m_a,this.m_eSquared,p)),i.push(new s.L({start:g,end:o})),o.assign(g)}t.push(new s.L({start:e,end:o}))}}splitSegmentPassingThroughPole(e){let t={stack:[],error:void 0,hasError:!1};try{let i=[],n=new m.h,r=new m.h,h=new m.h,o=new _.P,l=e.getStartXY(),g=e.getEndXY(),p=(0,u.b)(t,new a.E,!1);if(a.F.geodeticDistance(this.m_a,this.m_eSquared,l.x,l.y,g.x,g.y,p,null,null,2),Math.abs(g.x-l.x)>3.124139361&&p.val>20){let e=new f(new _.P(0,90),l.divide(this.m_rpu),g.divide(this.m_rpu),this.m_inputGCS,2,2),t=(0,a.U)(e.makeFunctor(),0,1,1e-10);if(t.second<=10&&t.first>0&&t.first<1||(e.setPointDistFrom(new _.P(0,-90)),(t=(0,a.U)(e.makeFunctor(),0,1,1e-10)).second<=10&&t.first>0&&t.first<1))return n.assign((0,a.Q)(this.m_a,this.m_eSquared,l)),r.assign((0,a.Q)(this.m_a,this.m_eSquared,g)),(0,_.x)(n,r,t.first,h),o.assign((0,a.Y)(this.m_a,this.m_eSquared,h)),i.push(new s.L({start:l,end:o})),i.push(new s.L({start:o,end:g})),i}return i.push(new s.L({start:l,end:g})),i}catch(e){t.error=e,t.hasError=!0}finally{(0,u.c)(t)}}adaptiveIntegrationWithRomberg(e,t){let i=e.makeFunctor(),n=0,r=1,a=i(0),_=i(r),h=(n+r)/2,m=i(h),o=Math.abs(m-a),l=Math.abs(_-m),u=0;for(;u++<32&&(o/l<.1||l/o<.1);)o<l?(t.pe((0,s.x)(5,n,h,1e-14,1e-17,i)),n=h,a=m):(t.pe((0,s.x)(5,h,r,1e-14,1e-17,i)),r=h,_=m),o=Math.abs((m=Math.abs(i(h=(n+r)/2)))-a),l=Math.abs(_-m);t.pe((0,s.x)(5,n,r,1e-14,1e-17,i))}loxodromeAreaHemi(e,t,i,n,s){let r,a,h,m,o,l,u,g,p,c,y,d,P,f,E=i.clone(),x=s.clone();return E.make_negative&&E.changeSign(),x.make_negative&&x.changeSign(),p=n-t,1===Math.abs(E.sin_phi)||1===Math.abs(x.sin_phi)?e.half_qp*p:E.sin_phi===x.sin_phi?g=.5*e.one_m_e_2*E.sin_phi*(1/E.one_m_e_2_sin_2_phi+(0,_.y)(e.e*E.sin_phi))*p:(P=Math.log(x.sin_half_phi_pf*E.sin_half_phi_pz/(x.sin_half_phi_pz*E.sin_half_phi_pf)),f=Math.log(x.sin_half_asin_e_sin_phi_pf*E.sin_half_asin_e_sin_phi_pz/(x.sin_half_asin_e_sin_phi_pz*E.sin_half_asin_e_sin_phi_pf)),1===this.m_eSquared?(o=0,r=.5*(P+x.sin_phi/x.one_m_e_2_sin_2_phi-E.sin_phi/E.one_m_e_2_sin_2_phi),a=0):(o=-2*e.atanh_e_over_e*(Math.log(x.one_p_sin_phi/E.one_p_sin_phi)-e.e*f),r=(P-e.e*f)/e.one_m_e_2,a=(Math.log(x.one_m_e_2_sin_2_phi/E.one_m_e_2_sin_2_phi)+o/e.atanh_e_over_e)/e.one_m_e_2),h=-f*(E.atanh_esin_phi+x.atanh_esin_phi),m=1/E.one_m_e_2_sin_2_phi-1/x.one_m_e_2_sin_2_phi,l=(0,_.z)(x.one_m_sin_phi/e.one_p_e,e.e)-(0,_.z)(E.one_m_sin_phi/e.one_p_e,e.e),u=(0,_.z)(x.one_p_sin_phi/e.one_p_e,e.e)-(0,_.z)(E.one_p_sin_phi/e.one_p_e,e.e),g=.25/r*(a+h+m+o+.5*(l+u+((0,_.z)(-(E.one_m_sin_phi/e.one_m_e),e.e)-(0,_.z)(-(x.one_m_sin_phi/e.one_m_e),e.e))+((0,_.z)(-(E.one_p_sin_phi/e.one_m_e),e.e)-(0,_.z)(-(x.one_p_sin_phi/e.one_m_e),e.e))))+e.half_qp,c=.5*e.one_m_e_2*E.sin_phi*(1/E.one_m_e_2_sin_2_phi+(0,_.y)(e.e*E.sin_phi)),(y=.5*e.one_m_e_2*x.sin_phi*(1/x.one_m_e_2_sin_2_phi+(0,_.y)(e.e*x.sin_phi)))<c&&(d=c,c=y,y=d),g<c&&(g=c),g>y&&(g=y),g*=p)}loxodromeArea(e){let t=Math.PI/180,i=0,n={e:Number.NaN,one_p_e:Number.NaN,one_m_e:Number.NaN,one_m_e_2:Number.NaN,atanh_e_over_e:Number.NaN,half_qp:Number.NaN,f:Number.NaN,z:Number.NaN},s=C(),r=C();n.e=Math.sqrt(this.m_eSquared),n.one_p_e=1+n.e,n.one_m_e=1-n.e,n.one_m_e_2=1-this.m_eSquared,n.atanh_e_over_e=(0,_.y)(n.e),this.m_eSquared>=1?n.half_qp=1:n.half_qp=.5*(1+n.atanh_e_over_e*n.one_m_e_2),n.f=.25*Math.PI,n.z=.75*Math.PI,r.initialize(0,n.e,n.f,n.z);let a=e.getPathCount(),h=new _.P,m=new _.P,o=e.getImpl().getAttributeStreamRef(0);for(let _=0;_<a;_++){let a=e.getPathStart(_),l=e.getPathEnd(_);if(!(l-a<=1)){o.queryPoint2D(2*(l-1),h);for(let e=a;e<l;e++){o.queryPoint2D(2*e,m);let _=h.y*t,l=m.y*t;if(e===a?(s.initialize(_,n.e,n.f,n.z),s.make_negative=!1):s.assign(r),r.initialize(l,n.e,n.f,n.z),r.make_negative=!1,h.y*m.y<0){if(h.y>=90&&m.y<=-90||m.y>=90&&h.y<=-90)return Number.NaN;let e=C();e.initialize(0,n.e,n.f,n.z),e.make_negative=!1;let a=s.atanh_sin_phi-n.e*s.atanh_esin_phi,o=r.atanh_sin_phi-n.e*r.atanh_esin_phi,l=(o*h.x-a*m.x)/(o-a);_<0?(s.make_negative=!0,i-=this.loxodromeAreaHemi(n,h.x*t,s,l*t,e),s.make_negative=!1,i+=this.loxodromeAreaHemi(n,l*t,e,m.x*t,r)):(i+=this.loxodromeAreaHemi(n,h.x*t,s,l*t,e),r.make_negative=!0,i-=this.loxodromeAreaHemi(n,l*t,e,m.x*t,r),r.make_negative=!1)}else h.y>=0?i+=this.loxodromeAreaHemi(n,h.x*t,s,m.x*t,r):(s.make_negative=!0,r.make_negative=!0,i-=this.loxodromeAreaHemi(n,h.x*t,s,m.x*t,r),s.make_negative=!1,r.make_negative=!1);h.assign(m)}}}return this.m_a*i*this.m_a}calculate(e){if(e.isEmpty()||2>e.getDimension())return 0;if(e.getGeometryType()===n.G.enumEnvelope){let t=new s.a;return t.addEnvelope(e,!1),this.calculate(t)}return this.m_inputSR!==this.m_inputGCS&&null===this.m_transformPCS2GCS&&(this.m_transformPCS2GCS=(0,a.p)(this.m_inputSR,this.m_inputGCS,null)),this.executePolygonGeodeticArea(e)}}class R{getOperatorType(){return 10311}supportsCurves(){return!0}accelerateGeometry(e,t,i){return!1}canAccelerateGeometry(e){return!1}execute(e,t,i,s){return((0,n.d)(e),4===i)?(new v).execute(e,t,s):new G(t,i,s).calculate(e)}}}}]);