"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8708],{11506:(e,t,r)=>{function o(e,t){return e?t?4:3:t?3:2}function s(e,t,r,s){if(!t?.lengths.length)return null;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);let n=e.coords,i=[],l=r?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:u,coords:a}=t,p=o(r,s),c=0;for(let e of u){let t=function(e,t,r,s,n,i){let l=o(n,i),u=r,a=r+l,p=0,c=0,d=0,f=0,y=0;for(let r=0,o=s-1;r<o;r++,u+=l,a+=l){let r=t[u],o=t[u+1],s=t[u+2],i=t[a],l=t[a+1],h=t[a+2],m=r*l-i*o;f+=m,p+=(r+i)*m,c+=(o+l)*m,n&&(m=r*h-i*s,d+=(s+h)*m,y+=m),r<e[0]&&(e[0]=r),r>e[1]&&(e[1]=r),o<e[2]&&(e[2]=o),o>e[3]&&(e[3]=o),n&&(s<e[4]&&(e[4]=s),s>e[5]&&(e[5]=s))}if(f>0&&(f*=-1),y>0&&(y*=-1),!f)return null;let h=[p,c,.5*f];return n&&(h[3]=d,h[4]=.5*y),h}(l,a,c,e,r,s);t&&i.push(t),c+=e*p}if(i.sort((e,t)=>{let o=e[2]-t[2];return 0===o&&r&&(o=e[4]-t[4]),o}),i.length){let e=6*i[0][2];n[0]=i[0][0]/e,n[1]=i[0][1]/e,r&&(e=6*i[0][4],n[2]=0!==e?i[0][3]/e:0),(n[0]<l[0]||n[0]>l[1]||n[1]<l[2]||n[1]>l[3]||r&&(n[2]<l[4]||n[2]>l[5]))&&(n.length=0)}if(!n.length){let e=t.lengths[0]?function(e,t,r,s,n){let i=o(s,n),l=0,u=t+i,a=0,p=0,c=0,d=0;for(let t=0,o=r-1;t<o;t++,l+=i,u+=i){var f,y,h,m,g;let t=e[l],r=e[l+1],o=e[l+2],n=e[u],i=e[u+1],b=e[u+2],I=s?function(e,t,r,o,s,n){let i=o-e,l=s-t,u=n-r;return Math.sqrt(i*i+l*l+u*u)}(t,r,o,n,i,b):function(e,t,r,o){let s=r-e,n=o-t;return Math.sqrt(s*s+n*n)}(t,r,n,i);if(I)if(a+=I,s){let e=[(f=t)+.5*(n-f),(y=r)+.5*(i-y),(h=o)+.5*(b-h)];p+=I*e[0],c+=I*e[1],d+=I*e[2]}else{let e=[(m=t)+.5*(n-m),(g=r)+.5*(i-g)];p+=I*e[0],c+=I*e[1]}}return a>0?s?[p/a,c/a,d/a]:[p/a,c/a]:r>0?s?[e[t],e[t+1],e[t+2]]:[e[t],e[t+1]]:null}(a,0,u[0],r,s):null;if(!e)return null;n[0]=e[0],n[1]=e[1],r&&e.length>2&&(n[2]=e[2])}return e}r.d(t,{Q:()=>s})},17135:(e,t,r)=>{r.d(t,{F0:()=>l,Vx:()=>p,e2:()=>d,f:()=>f});var o=r(57845),s=r(33715),n=r(54781),i=r(64547);function l(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?i.Cb:"esriGeometryPolyline"===e?i.yM:i.WR}}}let u=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/,a=1;function p(e,t){if((0,o.A)("esri-csp-restrictions"))return()=>({[t]:null,...e});try{let r=`this${c(t)} = null;`;for(let t in e)r+=`this${c(t)} = ${JSON.stringify(e[t])};`;let o=Function(`
      return class AttributesClass$${a++} {
        constructor() {
          ${r};
        }
      }
    `)();return()=>new o}catch(r){return()=>({[t]:null,...e})}}function c(e){return u.test(e)?`.${e}`:`["${e}"]`}function d(e={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,s.o8)(e)}}]}function f(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:n.F,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:n.P,editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},28708:(e,t,r)=>{r.r(t),r.d(t,{default:()=>$});var o=r(81856),s=r(39267),n=r(21892),i=r(91838);r(57845),r(61939),r(33638);var l=r(12709),u=r(61414),a=r(91463),p=r(59879),c=r(64171),d=r(32391),f=r(31551),y=r(45714),h=r(81084),m=r(94682),g=r(49570);let b=class extends f.A{constructor(){super(...arguments),this.featureDefinition=null,this.type="ogc-feature"}load(e){return this.addResolvingPromise(this._loadOGCServices(this.layer,e)),this.when()}getSource(){let{featureDefinition:{collection:e,layerDefinition:t,spatialReference:r,supportedCrs:o},layer:{apiKey:s,customParameters:n,effectiveMaxRecordCount:i}}=this;return{type:"ogc-source",collection:e,layerDefinition:t,maxRecordCount:i,queryParameters:{apiKey:s,customParameters:n},spatialReference:r,supportedCrs:o}}queryExtent(e,t={}){return null}queryFeatureCount(e,t={}){return null}queryFeatures(e,t={}){return this.queryFeaturesJSON(e,t).then(e=>g.A.fromJSON(e))}queryFeaturesJSON(e,t={}){let r=this.getSource();return this.load(t).then(()=>(0,h.bW)(r,e,t))}queryObjectIds(e,t={}){return null}serviceSupportsSpatialReference(e){return!(!e.isWGS84&&!e.isWebMercator)||!!this.featureDefinition.supportedCrs[e.wkid]}_conformsToType(e,t){let r=RegExp(`^${(0,y.Cj)(t)}$`,"i");return e.conformsTo.some(e=>r.test(e))??!1}_getCapabilities(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryBins:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1,supportsAsyncConvert3D:!1},query:{maxRecordCount:t,maxRecordCountFactor:void 0,standardMaxRecordCount:void 0,supportsCacheHint:!1,supportsCentroid:!1,supportsCurrentUser:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByAnonymous:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsReturnMesh:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsStatistics:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,supportsSqlExpression:!1,supportsTrueCurve:!1,tileMaxRecordCount:void 0},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:m.$,editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUploadWithItemId:!1,supportsUpdateWithoutM:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}_getMaxRecordCount(e){let t=e?.components?.parameters;return t?.limit?.schema?.maximum??t?.limitFeatures?.schema?.maximum}_getStorageSpatialReference(e){let t=e.storageCrs??h.QE,r=(0,h.J0)(t);return null==r?a.A.WGS84:new a.A({wkid:r})}_getSupportedSpatialReferences(e,t){let r="#/crs",o=e.crs??[h.QE],s=o.includes(r)?o.filter(e=>e!==r).concat(t.crs??[]):o,n=/^http:\/\/www\.opengis.net\/def\/crs\/epsg\/.*\/3785$/i;return s.filter(e=>!n.test(e))}async _loadOGCServices(e,t){let r=null!=t?t.signal:null,{apiKey:o,collectionId:s,customParameters:n,fields:i,geometryType:l,hasZ:u,objectIdField:a,timeInfo:c,url:f}=e,m={fields:i?.map(e=>e.toJSON()),geometryType:p.Ye.toJSON(l),hasZ:u??!1,objectIdField:a,timeInfo:c?.toJSON()},g={apiKey:o,customParameters:n,signal:r},b=await (0,h.Ki)(f,g),[I,w]=await Promise.all([(0,h.Px)(b,g),(0,h.bV)(b,g)]);if(!this._conformsToType(I,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/geojson"))throw new d.A("ogc-feature-layer:no-geojson-support","Server does not support geojson");let F=w.collections.find(({id:e})=>e===s);if(!F)throw new d.A("ogc-feature-layer:collection-not-found","Server does not contain the named collection");let v=this._conformsToType(I,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/oas30")?await (0,h.GA)(b,g):null,T=await (0,h.GL)(F,m,g),S=this._getMaxRecordCount(v),A=this._getCapabilities(T.hasZ,S),M=this._getStorageSpatialReference(F).toJSON(),N=this._getSupportedSpatialReferences(F,w),C=RegExp(`^${(0,y.Cj)(h.vJ)}`,"i"),x={};for(let e of N){let t=(0,h.J0)(e);null!=t&&(x[t]||(x[t]=e.replace(C,"")))}this.featureDefinition={capabilities:A,collection:F,layerDefinition:T,spatialReference:M,supportedCrs:x}}};(0,o._)([(0,i.MZ)()],b.prototype,"featureDefinition",void 0),(0,o._)([(0,i.MZ)({constructOnly:!0})],b.prototype,"layer",void 0),(0,o._)([(0,i.MZ)()],b.prototype,"type",void 0),b=(0,o._)([(0,l.$)("esri.layers.graphics.sources.OGCFeatureSource")],b);var I=r(14925),w=r(24743),F=r(60349),v=r(9263),T=r(54843),S=r(57248),A=r(2043),M=r(16217),N=r(54882),C=r(6255),x=r(23281),P=r(70442),R=r(69720),j=r(76572),O=r(59274),G=r(80824),Z=r(34929),_=r(39265),E=r(21798),D=r(68266),k=r(73358),q=r(86099),B=r(52438);let Q=(0,Z.p)(),z=class extends(0,v.FJ)((0,I.p)((0,F.d)((0,S.J)((0,T.F)((0,w.dM)((0,M.fY)((0,P.e)((0,R.d)((0,x.j)((0,A.q)((0,N.A)((0,C.J)((0,n.P)(c.A)))))))))))))){constructor(e){super(e),this.capabilities=null,this.collectionId=null,this.copyright=null,this.description=null,this.displayField=null,this.elevationInfo=null,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.hasZ=void 0,this.labelingInfo=null,this.labelsVisible=!0,this.legendEnabled=!0,this.maxRecordCount=null,this.objectIdField=null,this.operationalLayerType="OGCFeatureLayer",this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new b({layer:this}),this.spatialReference=null,this.title=null,this.type="ogc-feature",this.typeIdField=null,this.types=null,this.url=null}destroy(){this.source?.destroy()}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["OGCFeatureServer"]},e).then(()=>this._fetchService(e))),this.when()}get defaultPopupTemplate(){return this.createPopupTemplate()}get effectiveMaxRecordCount(){return this.maxRecordCount??this.capabilities?.query.maxRecordCount??5e3}get isTable(){return this.loaded&&null==this.geometryType}set renderer(e){(0,_.yp)(e,this.fieldsIndex),this._set("renderer",e)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return(0,B.tn)(this,e)}createQuery(){return new q.A}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,t){let r,o=!1,s=t?.feature?.attributes,n=this.typeIdField&&s?.[this.typeIdField];return null!=n&&this.types&&(o=this.types.some(t=>t.id==n&&(r=t.domains?.[e],"inherited"===r?.type&&(r=this._getLayerDomain(e)),!0))),o||r||(r=this._getLayerDomain(e)),r}queryFeatures(e,t){return this.load().then(()=>this.source.queryFeatures(q.A.from(e)||this.createQuery(),t)).then(e=>(e?.features?.forEach(e=>{e.layer=e.sourceLayer=this}),e))}serviceSupportsSpatialReference(e){return this.source?.serviceSupportsSpatialReference(e)??!1}async _fetchService(e){await this.source.load(e),this.read(this.source.featureDefinition,{origin:"service"}),(0,_.yp)(this.renderer,this.fieldsIndex),(0,_.sv)(this.timeInfo,this.fieldsIndex)}_getLayerDomain(e){if(!this.fields)return null;for(let t of this.fields)if(t.name===e&&t.domain)return t.domain;return null}};(0,o._)([(0,i.MZ)({readOnly:!0,json:{origins:{service:{read:!0}}}})],z.prototype,"capabilities",void 0),(0,o._)([(0,i.MZ)({type:String,json:{write:!0}})],z.prototype,"collectionId",void 0),(0,o._)([(0,i.MZ)({type:String})],z.prototype,"copyright",void 0),(0,o._)([(0,i.MZ)({readOnly:!0})],z.prototype,"defaultPopupTemplate",null),(0,o._)([(0,i.MZ)({readOnly:!0,type:String,json:{origins:{service:{name:"collection.description"}}}})],z.prototype,"description",void 0),(0,o._)([(0,i.MZ)({type:String})],z.prototype,"displayField",void 0),(0,o._)([(0,i.MZ)({type:Number})],z.prototype,"effectiveMaxRecordCount",null),(0,o._)([(0,i.MZ)(j.Yj)],z.prototype,"elevationInfo",void 0),(0,o._)([(0,i.MZ)({type:[G.A],json:{origins:{service:{name:"layerDefinition.fields"}}}})],z.prototype,"fields",void 0),(0,o._)([(0,i.MZ)(Q.fieldsIndex)],z.prototype,"fieldsIndex",void 0),(0,o._)([(0,i.MZ)({readOnly:!0,type:u.A,json:{origins:{service:{name:"layerDefinition.extent"}}}})],z.prototype,"fullExtent",void 0),(0,o._)([(0,i.MZ)({type:p.gy.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:p.gy.read}}}}})],z.prototype,"geometryType",void 0),(0,o._)([(0,i.MZ)({type:Boolean,json:{origins:{service:{name:"layerDefinition.hasZ"}}}})],z.prototype,"hasZ",void 0),(0,o._)([(0,i.MZ)({type:Boolean,readOnly:!0})],z.prototype,"isTable",null),(0,o._)([(0,i.MZ)({type:[E.A],json:{origins:{"web-document":{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:D.w},write:!0}}}})],z.prototype,"labelingInfo",void 0),(0,o._)([(0,i.MZ)(j.kF)],z.prototype,"labelsVisible",void 0),(0,o._)([(0,i.MZ)(j.fV)],z.prototype,"legendEnabled",void 0),(0,o._)([(0,i.MZ)({type:Number})],z.prototype,"maxRecordCount",void 0),(0,o._)([(0,i.MZ)({type:String,json:{origins:{service:{name:"layerDefinition.objectIdField"}}}})],z.prototype,"objectIdField",void 0),(0,o._)([(0,i.MZ)({type:["OGCFeatureLayer"]})],z.prototype,"operationalLayerType",void 0),(0,o._)([(0,i.MZ)(j.M6)],z.prototype,"popupEnabled",void 0),(0,o._)([(0,i.MZ)({type:s.A,json:{name:"popupInfo",write:!0}})],z.prototype,"popupTemplate",void 0),(0,o._)([(0,i.MZ)({types:k.Hg,json:{origins:{service:{name:"layerDefinition.drawingInfo.renderer",write:!1},"web-scene":{types:k.XJ,name:"layerDefinition.drawingInfo.renderer",write:!0}},name:"layerDefinition.drawingInfo.renderer",write:!0}})],z.prototype,"renderer",null),(0,o._)([(0,i.MZ)(j.PY)],z.prototype,"screenSizePerspectiveEnabled",void 0),(0,o._)([(0,i.MZ)({readOnly:!0})],z.prototype,"source",void 0),(0,o._)([(0,i.MZ)({readOnly:!0,type:a.A,json:{origins:{service:{read:!0}}}})],z.prototype,"spatialReference",void 0),(0,o._)([(0,i.MZ)({type:String,json:{write:{enabled:!0,ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"collection.title"}}}})],z.prototype,"title",void 0),(0,o._)([(0,i.MZ)({readOnly:!0,json:{read:!1}})],z.prototype,"type",void 0),(0,o._)([(0,i.MZ)({type:String,readOnly:!0})],z.prototype,"typeIdField",void 0),(0,o._)([(0,i.MZ)({type:[O.A]})],z.prototype,"types",void 0),(0,o._)([(0,i.MZ)(j.OZ)],z.prototype,"url",void 0);let $=z=(0,o._)([(0,l.$)("esri.layers.OGCFeatureLayer")],z)},43253:(e,t,r)=>{let o;r.d(t,{$1:()=>m,CR:()=>y,MB:()=>f,PC:()=>g,Yx:()=>a,bP:()=>c});var s=r(67039),n=r(71760),i=r(39265);class l{constructor(){this.code=null,this.description=null}}class u{constructor(e){this.error=new l,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e}}function a(e){return new u(e)}class p{constructor(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e}}function c(e){return new p(e)}let d=new Set;function f(e,t,r,o=!1){for(let n in d.clear(),r){let l=e.get(n);if(!l)continue;let u=function(e,t){let r=t;return(0,i.WA)(e)&&"string"==typeof t?r=parseFloat(t):(0,i.yM)(e)&&null!=t&&"string"!=typeof t?r=String(t):(0,i.vE)(e)&&"string"==typeof t&&(r=(0,s._U)(t)),(0,i.WX)(r)}(l,r[n]);if(d.add(l.name),l&&(o||l.editable)){let e=(0,i.CJ)(l,u);if(e)return a((0,i.uo)(e,l,u));t[l.name]=u}}for(let t of e.requiredFields??[])if(!d.has(t.name))return a(`missing required field "${t.name}"`);return null}function y(e,t){if(!e||!(0,n.fn)(t))return e;if("rings"in e||"paths"in e){if(null==o)throw TypeError("geometry engine not loaded");return o.simplify(t,e)}return e}async function h(){return null==o&&(o=await Promise.all([r.e(472),r.e(793)]).then(r.bind(r,29786))),o}async function m(e,t){(0,n.fn)(e)&&("esriGeometryPolygon"===t||"esriGeometryPolyline"===t)&&await h()}let g={supportsAutoIntervalBin:!0,supportsFixedIntervalBin:!0,supportsFixedBoundariesBin:!0,supportsDateBin:!0,supportsStackBy:!0,supportsSplitBy:!0,supportsNormalization:!0,supportedStatisticTypes:["COUNT","SUM","AVG","VAR","STDDEV","MIN","MAX","PERCENTILE_CONT","PERCENTILE_DISC","CentroidAggregate","EnvelopeAggregate","ConvexHullAggregate"],supportedNormalizationTypes:["field","log","naturalLog","percentOfTotal","squareRoot"]}},54781:(e,t,r)=>{r.d(t,{F:()=>o,P:()=>s});let o={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!0,supportsCurrentUser:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!0,supportsReturnMesh:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0,supportsTrueCurve:!1},s={supportsDate:!0,supportsFixedInterval:!0,supportsAutoInterval:!0,supportsFixedBoundaries:!0,supportsStackBy:!0,supportsSplitBy:!0,supportsSnapToData:!1,supportsReturnFullIntervalBin:!1,supportsFirstDayOfWeek:!1,supportsNormalization:!0,supportedStatistics:{count:!0,sum:!0,avg:!0,var:!0,stddev:!0,min:!0,max:!0,percentileContinuous:!0,percentileDiscrete:!0,envelope:!0,centroid:!0,convexHull:!0},supportedNormalizationTypes:{field:!0,log:!0,naturalLog:!0,percentOfTotal:!0,squareRoot:!0}}},54805:(e,t,r)=>{r.d(t,{A:()=>o});class o{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){let e=new o;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}}},56599:(e,t,r)=>{r.d(t,{A:()=>s});var o=r(94264);class s{constructor(e=[],t=[]){this.lengths=e??[],this.coords=t??[]}static fromJSON(e){return new s(e.lengths,e.coords)}static fromRect(e){let[t,r,o,n]=e,i=o-t,l=n-r;return new s([5],[t,r,i,0,0,l,-i,0,0,-l])}get isPoint(){return 0===this.lengths.length&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((e,t)=>e+t)}get usedMemory(){return 64+(0,o.Qf)(this.lengths,this.coords)}area(){let e=0,t=0;if(!this.lengths.length)return 0;for(let r=0;r<this.lengths.length;r++){let o=this.lengths[r];if(o<3)continue;let s=this.coords[2*t],n=this.coords[2*t+1];for(let r=1;r<o;r+=1){let o=this.coords[2*(r+t)],i=this.coords[2*(r+t)+1];e+=-.5*(o-s)*(i+n),s=o,n=i}t+=o}return e}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){let o=this.lengths[r];for(let r=0;r<o;r++)e(this.coords[2*(r+t)],this.coords[2*(r+t)+1]);t+=o}}deltaDecode(){let e=this.clone(),{coords:t,lengths:r}=e,o=0;for(let e of r){for(let r=1;r<e;r++)t[2*(o+r)]+=t[2*(o+r)-2],t[2*(o+r)+1]+=t[2*(o+r)-1];o+=e}return e}clone(e){if(0===this.lengths.length)return new s([],[this.coords[0],this.coords[1]]);let t=(0===this.lengths.length?1:this.lengths.reduce((e,t)=>e+t))*2,r=this.coords.slice(0,t);return e?(e.set(r),new s(this.lengths,e)):new s(Array.from(this.lengths),Array.from(r))}}},60729:(e,t,r)=>{r.d(t,{B2:()=>F,BW:()=>D,Ch:()=>es,DF:()=>A,Di:()=>U,E2:()=>L,IE:()=>w,Nl:()=>et,Q4:()=>en,Rk:()=>ei,Ux:()=>H,Ye:()=>B,ZF:()=>Y,eU:()=>Q,eY:()=>X,hK:()=>el,jH:()=>ee,jQ:()=>eo,kz:()=>er,oN:()=>V,q3:()=>K,qK:()=>_,qN:()=>Z,z5:()=>q,zv:()=>J});var o=r(32391),s=r(61939),n=r(40941),i=r(42845),l=r(84766),u=r(31789),a=r(82795),p=r(54805),c=r(56599);function d(e,t){return e?t?4:3:t?3:2}let f=()=>s.A.getLogger("esri.layers.graphics.featureConversionUtils"),y={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryMultiPatch:3,esriGeometryEnvelope:0},h=(e,t,r,o,s,n)=>{e[r]=s,e[r+1]=n},m=(e,t,r,o,s,n)=>{e[r]=s,e[r+1]=n,e[r+2]=t[o+2]},g=(e,t,r,o,s,n)=>{e[r]=s,e[r+1]=n,e[r+2]=t[o+3]},b=(e,t,r,o,s,n)=>{e[r]=s,e[r+1]=n,e[r+2]=t[o+2],e[r+3]=t[o+3]};function I(e,t,r,o){if(e){if(r)return t&&o?b:m;if(t&&o)return g}else if(t&&o)return m;return h}function w({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function F({scale:e,translate:t},r){return Math.round((t[1]-r)/e[1])}function v({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function T({scale:e,translate:t},r){return Math.round((r-t[1])/e[1])}function S({scale:e,translate:t},r,o){return r*e[o]+t[o]}function A(e,t,r){return e?t?r?j(e):C(e):r?P(e):M(e):null}function M(e){let t=e.coords;return{x:t[0],y:t[1]}}function N(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function C(e){let t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function x(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function P(e){let t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function R(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function j(e){let t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function O(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function G(e,t){return e&&t?O:e?x:t?R:N}function Z(e,t,r=G(null!=t.z,null!=t.m)){return r(e,t)}function _(e,t,r){if(null==e)return null;let o=d(t,r),s=[];for(let t=0;t<e.coords.length;t+=o){let r=[];for(let s=0;s<o;s++)r.push(e.coords[t+s]);s.push(r)}return t?r?{points:s,hasZ:t,hasM:r}:{points:s,hasZ:t}:r?{points:s,hasM:r}:{points:s}}function E(e,t,r=d(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;let o=e.coords,s=0;for(let e of t.points)for(let t=0;t<r;t++)o[s++]=e[t];return e}function D(e,t,r){if(!e)return null;let o=d(t,r),{coords:s,lengths:n}=e,i=[],l=0;for(let e of n){let t=[];for(let r=0;r<e;r++){let e=[];for(let t=0;t<o;t++)e.push(s[l++]);t.push(e)}i.push(t)}return t?r?{paths:i,hasZ:t,hasM:r}:{paths:i,hasZ:t}:r?{paths:i,hasM:r}:{paths:i}}function k(e,t,r=d(t.hasZ,t.hasM)){let{lengths:o,coords:s}=e,n=0;for(let e of t.paths){for(let t of e)for(let e=0;e<r;e++)s[n++]=t[e];o.push(e.length)}return e}function q(e,t,r){if(!e)return null;let o=d(t,r),{coords:s,lengths:n}=e,i=[],l=0;for(let e of n){let t=[];for(let r=0;r<e;r++){let e=[];for(let t=0;t<o;t++)e.push(s[l++]);t.push(e)}i.push(t)}return t?r?{rings:i,hasZ:t,hasM:r}:{rings:i,hasZ:t}:r?{rings:i,hasM:r}:{rings:i}}function B(e,t,r=t.hasZ,o=t.hasM){return Q(e,t.rings,r,o)}function Q(e,t,r,o){let s=d(r,o),{lengths:n,coords:i}=e,l=0;for(let r of(eu(e),t)){for(let e of r)for(let t=0;t<s;t++)i[l++]=e[t];n.push(r.length)}return e}let z=[],$=[];function L(e,t,r,o,s){z[0]=e;let[n]=U($,z,t,r,o,s);return ea(z),ea($),n}function U(e,t,r,s,n,i){if(ea(e),!r){for(let r of t){let t=i?r.attributes[i]:void 0;e.push(new a.Om(null,r.attributes,null,t))}return e}switch(r){case"esriGeometryPoint":let l=G(s,n);for(let{geometry:r,attributes:o}of t){let t=null!=r?l(new c.A,r):null;e.push(new a.Om(t,o,null,i?o[i]:void 0))}break;case"esriGeometryMultipoint":let u=d(s,n);for(let{geometry:r,attributes:o}of t){let t=null!=r?E(new c.A,r,u):null;e.push(new a.Om(t,o,null,i?o[i]:void 0))}break;case"esriGeometryPolyline":let p=d(s,n);for(let{geometry:r,attributes:o,centroid:s}of t){let t=null!=r?k(new c.A,r,p):null,n=null!=s?Z(new c.A,s):null;e.push(new a.Om(t,o,n,i?o[i]:void 0))}break;case"esriGeometryPolygon":case"esriGeometryMultiPatch":for(let{geometry:r,centroid:o,attributes:l}of t){let t=null!=r?B(new c.A,r,s,n):null,u=i?l[i]:void 0;null!=o?e.push(new a.Om(t,l,N(new c.A,o),u)):e.push(new a.Om(t,l,null,u))}break;default:f().error("convertToFeatureSet:unknown-geometry",new o.A(`Unable to parse unknown geometry type '${r}'`)),ea(e)}return e}function V(e,t,r,o){$[0]=e,W(z,$,t,r,o);let s=z[0];return ea(z),ea($),s}function H(e,t,r){if(null==e)return null;let s=new c.A;return("hasZ"in e&&null==t&&(t=e.hasZ),"hasM"in e&&null==r&&(r=e.hasM),(0,u.fT)(e))?G(null!=t?t:null!=e.z,null!=r?r:null!=e.m)(s,e):(0,u.Bi)(e)?B(s,e,t,r):(0,u.Rg)(e)?k(s,e,d(t,r)):(0,u.U9)(e)?E(s,e,d(t,r)):void f().error("convertFromGeometry:unknown-geometry",new o.A(`Unable to parse unknown geometry type '${e}'`))}function J(e,t,r,s){let n=e&&("coords"in e?e:e.geometry);if(null==n)return null;switch(t){case"esriGeometryPoint":{let e=M;return r&&s?e=j:r?e=C:s&&(e=P),e(n)}case"esriGeometryMultipoint":return _(n,r,s);case"esriGeometryPolyline":return D(n,r,s);case"esriGeometryPolygon":return q(n,r,s);default:return f().error("convertToGeometry:unknown-geometry",new o.A(`Unable to parse unknown geometry type '${t}'`)),null}}function W(e,t,r,s,n){if(ea(e),null==r){for(let r of t)e.push({attributes:r.attributes});return e}switch(r){case"esriGeometryPoint":let i=M;for(let r of(s&&n?i=j:s?i=C:n&&(i=P),t)){let{geometry:t,attributes:o}=r,s=null!=t?i(t):null;e.push({attributes:o,geometry:s})}break;case"esriGeometryMultipoint":for(let{geometry:r,attributes:o}of t)e.push({attributes:o,geometry:null!=r?_(r,s,n):null});break;case"esriGeometryPolyline":for(let{geometry:r,attributes:o}of t)e.push({attributes:o,geometry:null!=r?D(r,s,n):null});break;case"esriGeometryPolygon":for(let{geometry:r,attributes:o,centroid:i}of t){let t=null!=r?q(r,s,n):null;if(null!=i){let r=M(i);e.push({attributes:o,centroid:r,geometry:t})}else e.push({attributes:o,geometry:t})}break;default:f().error("convertToFeatureSet:unknown-geometry",new o.A(`Unable to parse unknown geometry type '${r}'`))}return e}function Y(e){let{objectIdFieldName:t,spatialReference:r,transform:o,fields:s,hasM:n,hasZ:i,features:l,geometryType:u,exceededTransferLimit:a,uniqueIdField:p,queryGeometry:c,queryGeometryType:d}=e,f={features:W([],l,u,i,n),fields:s,geometryType:u,objectIdFieldName:t,spatialReference:r,uniqueIdField:p,queryGeometry:J(c,d,!1,!1)};return o&&(f.transform=o),a&&(f.exceededTransferLimit=a),n&&(f.hasM=n),i&&(f.hasZ=i),f}function K(e,t){let r=new p.A,{hasM:s,hasZ:n,features:i,objectIdFieldName:l,spatialReference:u,geometryType:a,exceededTransferLimit:c,transform:d,fields:y}=e;return y&&(r.fields=y),r.geometryType=a??null,r.objectIdFieldName=l??t??null,r.spatialReference=u??null,r.objectIdFieldName?(i&&U(r.features,i,a,n,s,r.objectIdFieldName),c&&(r.exceededTransferLimit=c),s&&(r.hasM=s),n&&(r.hasZ=n),d&&(r.transform=d)):f().error(new o.A("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),r}function X(e){let{transform:t,features:r,hasM:o,hasZ:s}=e;if(!t)return e;for(let e of r)null!=e.geometry&&es(e.geometry,e.geometry,o,s,t),null!=e.centroid&&es(e.centroid,e.centroid,o,s,t);return e.transform=null,e}function ee(e,t){let{geometryType:r,features:o,hasM:s,hasZ:n}=t;if(!e)return t;for(let t=0;t<o.length;t++){let i=o[t],l=i.weakClone();l.geometry=new c.A,et(l.geometry,i.geometry,s,n,r,e),i.centroid&&(l.centroid=new c.A,et(l.centroid,i.centroid,s,n,"esriGeometryPoint",e)),o[t]=l}return t.transform=e,t}function et(e,t,r,o,s,n,i=r,l=o){if(eu(e),!t?.coords.length)return null;let u=y[s],{coords:a,lengths:p}=t,c=d(r,o),f=d(r&&i,o&&l),h=I(r,o,i,l);if(!p.length)return h(e.coords,a,0,0,w(n,a[0]),F(n,a[1])),eu(e,c,0),e;let m,g,b,v,T=0,S=0,A=0;for(let t of p){if(t<u)continue;let r=0;S=A,b=m=w(n,a[T]),v=g=F(n,a[T+1]),h(e.coords,a,S,T,b,v),r++,T+=c,S+=f;for(let o=1;o<t;o++,T+=c)b=w(n,a[T]),v=F(n,a[T+1]),b===m&&v===g||(h(e.coords,a,S,T,b-m,v-g),S+=f,r++,m=b,g=v);r>=u&&(e.lengths.push(r),A=S)}return ea(e.coords,A),e.coords.length?e:null}function er(e,t,r,o,s,n,i=r,l=o){if(eu(e),!t?.coords.length)return null;let u=y[s],{coords:a,lengths:p}=t,c=d(r,o),f=d(r&&i,o&&l),h=I(r,o,i,l);if(!p.length)return h(e.coords,a,0,0,a[0],a[1]),eu(e,c,0),e;let m=0,g=n*n;for(let t of p){if(t<u){m+=t*c;continue}let r=e.coords.length/f,o=m,s=m+(t-1)*c;h(e.coords,a,e.coords.length,o,a[o],a[o+1]),function e(t,r,o,s,n,i,l){let u,a=s,p=0;for(let e=i+o;e<l;e+=o)(u=function(e,t,r,o){let s=e[t],n=e[t+1],i=e[r],l=e[r+1],u=e[o],a=e[o+1],p=i,c=l,d=u-p,f=a-c;if(0!==d||0!==f){let e=((s-p)*d+(n-c)*f)/(d*d+f*f);e>1?(p=u,c=a):e>0&&(p+=d*e,c+=f*e)}return(d=s-p)*d+(f=n-c)*f}(r,e,i,l))>a&&(p=e,a=u);a>s&&(p-i>o&&e(t,r,o,s,n,i,p),n(t,r,t.length,p,r[p],r[p+1]),l-p>o&&e(t,r,o,s,n,p,l))}(e.coords,a,c,g,h,o,s),h(e.coords,a,e.coords.length,s,a[s],a[s+1]);let n=e.coords.length/f-r;n>=u?e.lengths.push(n):ea(e.coords,r*f),m+=t*c}return e.coords.length?e:null}function eo(e,t,r,o){if(!t?.coords?.length)return null;let s=d(r,o),n=Number.POSITIVE_INFINITY,u=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,p=Number.NEGATIVE_INFINITY;if(t&&t.coords){let e=t.coords;for(let t=0;t<e.length;t+=s){let r=e[t],o=e[t+1];n=Math.min(n,r),a=Math.max(a,r),u=Math.min(u,o),p=Math.max(p,o)}}return(0,i.is)(e)?(0,i.BI)(e,n,u,a,p):(0,l.fA)(n,u,a,p,e),e}function es(e,t,r,o,s){let{coords:i,lengths:l}=t,u=d(r,o);if(!i.length)return e!==t&&eu(e),e;(0,n.Lw)(s);let{originPosition:a,scale:p,translate:c}=s;ep.originPosition=a;let f=ep.scale;f[0]=p[0]??1,f[1]=-(p[1]??1),f[2]=p[2]??1,f[3]=p[3]??1;let y=ep.translate;if(y[0]=c[0]??0,y[1]=c[1]??0,y[2]=c[2]??0,y[3]=c[3]??0,!l.length){for(let t=0;t<u;++t)e.coords[t]=function({scale:e,translate:t},r,o){return r*e[o]+t[o]}(ep,i[t],t);return e!==t&&eu(e,u,0),e}let h=0;for(let t=0;t<l.length;t++){let r=l[t];e.lengths[t]=r;for(let t=0;t<u;++t)e.coords[h+t]=function({scale:e,translate:t},r,o){return r*e[o]+t[o]}(ep,i[h+t],t);let o=e.coords[h],s=e.coords[h+1];h+=u;for(let t=1;t<r;t++,h+=u){o+=i[h]*f[0],s+=i[h+1]*f[1],e.coords[h]=o,e.coords[h+1]=s;for(let t=2;t<u;++t)e.coords[h+t]=function({scale:e,translate:t},r,o){return r*e[o]+t[o]}(ep,i[h+t],t)}}return e!==t&&eu(e,i.length,l.length),e}function en(e,t,r,o,s,n){if(eu(e),e.lengths.push(...t.lengths),r===s&&o===n)for(let r=0;r<t.coords.length;r++)e.coords.push(t.coords[r]);else{let i=d(r,o),l=I(r,o,s,n),u=t.coords;for(let t=0;t<u.length;t+=i)l(e.coords,u,e.coords.length,t,u[t],u[t+1])}return e}function ei(e,t){let{coords:r,lengths:o}=e,s=0,n=0;for(let e=0;e<o.length;e++){let i=o[e];n+=function(e,t,r,o){let s=0,n=e[o*t],i=e[o*(t+1)];for(let l=1;l<r;l++){let r=n+e[o*(t+l)],u=i+e[o*(t+l)+1],a=(r-n)*(u+i);n=r,i=u,s+=a}return .5*s}(r,s,i,t),s+=i}return Math.abs(n)}function el(e,t,r,o,s){let n=d(o,s);if(!e.lengths.length){if(e.coords.length<2)return null;let[r,o]=e.coords,s=v(t,r),n=T(t,o);return new c.A([],[s,n])}let i=new c.A([],[0,0]),l=y[r],u="esriGeometryPolygon"===r||"esriGeometryPolyline"===r,a=0,p=0;for(let r=0;r<e.lengths.length;r++){let o=e.lengths[r],s=p,c=v(t,e.coords[n*a]),d=T(t,e.coords[n*a+1]);i.coords[p++]=c,i.coords[p++]=d;let y=0,m=0,g=1;for(let r=1;r<o;r++){let o=v(t,e.coords[n*(r+a)]),s=T(t,e.coords[n*(r+a)+1]);if(o!==c||s!==d){var f,h;let e=o-c,t=s-d;u&&0==(f=y)*t-e*(h=m)&&f*e+h*t>0?(i.coords[p-2]+=e,i.coords[p-1]+=t,c+=e,d+=t):(i.coords[p++]=o,i.coords[p++]=s,c=o,d=s,y=e,m=t,g+=1)}}g<l?p=s:i.lengths.push(g),a+=o}return 0===i.lengths.length?null:i}function eu(e,t=0,r=0){ea(e.lengths,r),ea(e.coords,t)}function ea(e,t=0){e.length!==t&&(e.length=t)}let ep={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]}},67039:(e,t,r)=>{function o(e){return null!=l(e)||null!=i(e)}function s(e){return u.test(e)}function n(e){return l(e)??i(e)}function i(e){let t=new Date(e);return!function(e,t){if(Number.isNaN(e.getTime()))return!1;let r=!0;if(p&&/\d+\W*$/.test(t)){let e=t.match(/[a-zA-Z]{2,}/);if(e){let t=!1,o=0;for(;!t&&o<=e.length;)t=!a.test(e[o]),o++;r=!t}}return r}(t,e)?null:Number.isNaN(t.getTime())?null:t.getTime()-6e4*t.getTimezoneOffset()}function l(e){let t,r=u.exec(e);if(!r?.groups)return null;let o=r.groups,s=+o.year,n=o.month-1,i=+o.day,l=+(o.hours??"0"),a=+(o.minutes??"0"),p=+(o.seconds??"0");if(l>23||a>59||p>59)return null;let c=o.ms??"0",d=c?+c.padEnd(3,"0").slice(0,3):0;if(o.isUTC||!o.offsetSign)t=Date.UTC(s,n,i,l,a,p,d);else{let e=+o.offsetHours,r=+o.offsetMinutes;t=6e4*("+"===o.offsetSign?-1:1)*(60*e+r)+Date.UTC(s,n,i,l,a,p,d)}return Number.isNaN(t)?null:t}r.d(t,{Br:()=>s,Cq:()=>o,_U:()=>n});let u=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/,a=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,p=!Number.isNaN(new Date("technology 10").getTime())},79836:(e,t,r)=>{r.d(t,{BM:()=>w,bd:()=>F,sO:()=>I,xD:()=>p});var o=r(67039),s=r(32391),n=r(71760),i=r(82795),l=r(56599),u=r(39265);let a={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function p(e){return a[e]}function*c(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(let t of e.features)t&&(yield t)}}function d(e){let t=0;for(let r=0;r<e.length;r++){let o=e[r],s=e[(r+1)%e.length];t+=o[0]*s[1]-s[0]*o[1]}return t<=0}function f(e){let t=e[0],r=e[e.length-1];return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]||e.push(t),e}function y(e,t,r){let o=f(t);d(o)?m(e,o,r):g(e,o,r)}function h(e,t,r){let o=f(t);d(o)?g(e,o,r):m(e,o,r)}function m(e,t,r){for(let o of t)b(e,o,r);e.lengths.push(t.length)}function g(e,t,r){for(let o=t.length-1;o>=0;o--)b(e,t[o],r);e.lengths.push(t.length)}function b(e,t,r){let[o,s,n]=t;e.coords.push(o,s),r.hasZ&&e.coords.push(n||0)}function I(e,t=4326){if(!e)throw new s.A("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new s.A("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});let{crs:r}=e;if(!r)return;let o="string"==typeof r?r:"name"===r.type?r.properties.name:"EPSG"===r.type?r.properties.code:null,i=(0,n.oT)({wkid:t})?RegExp(".*(CRS84H?|4326)$","i"):RegExp(`.*(${t})$`,"i");if(!o||!i.test(o))throw new s.A("geojson:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:r})}function w(e,t={}){let r=[],s=new Set,n=new Set,i,l=!1,p=null,d=!1,{geometryType:f=null}=t;for(let t of c(e)){let{geometry:e,properties:c,id:y}=t;if((!e||(f||(f=a[e.type]),a[e.type]===f))&&(l||(l=function(e){for(let t of e)if(t.length>2)return!0;return!1}(function*(e){if(e)switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(let t of e.coordinates)yield*t;break;case"MultiPolygon":for(let t of e.coordinates)for(let e of t)yield*e}}(e))),d||(d=null!=y)&&(i=typeof y,c&&(p=Object.keys(c).filter(e=>c[e]===y))),c&&p&&d&&null!=y&&(p.length>1?p=p.filter(e=>c[e]===y):1===p.length&&(p=c[p[0]]===y?p:[])),c))for(let e in c){if(s.has(e))continue;let t=function(e){switch(typeof e){case"string":return(0,o.Br)(e)?"esriFieldTypeDate":"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}(c[e]);if("unknown"===t){n.add(e);continue}n.delete(e),s.add(e);let i=(0,u.rS)(e);i&&r.push({name:i,alias:e,type:t})}}let y=(0,u.rS)(1===p?.length&&p[0]||null)??void 0;if(y){for(let e of r)if(e.name===y&&(0,u.WA)(e)){e.type="esriFieldTypeOID";break}}return{fields:r,geometryType:f,hasZ:l,objectIdFieldName:y,objectIdFieldType:i,unknownFields:Array.from(n)}}function F(e,t){return Array.from(function*(e,t={}){let{geometryType:r,objectIdField:o}=t;for(let s of e){let e,{geometry:n,properties:u,id:p}=s;if(n&&a[n.type]!==r)continue;let c=u||{};o&&(e=c[o],null==p||e||(c[o]=e=p));let d=new i.Om(n?function(e,t,r){switch(t.type){case"LineString":return o=e,s=t,n=r,m(o,s.coordinates,n),o;case"MultiLineString":var o,s,n,i,l,u,a,p,c,d=e,f=t,g=r;for(let e of f.coordinates)m(d,e,g);return d;case"MultiPoint":return i=e,l=t,u=r,m(i,l.coordinates,u),i;case"MultiPolygon":var I=e,w=t,F=r;for(let e of w.coordinates){y(I,e[0],F);for(let t=1;t<e.length;t++)h(I,e[t],F)}return I;case"Point":return a=e,p=t,c=r,b(a,p.coordinates,c),a;case"Polygon":var v=e,T=t,S=r;let A=T.coordinates;y(v,A[0],S);for(let e=1;e<A.length;e++)h(v,A[e],S);return v}}(new l.A,n,t):null,c,null,e);yield d}}(c(e),t))}},81084:(e,t,r)=>{r.d(t,{GA:()=>C,GL:()=>S,I:()=>R,J0:()=>x,Ki:()=>N,Px:()=>M,QE:()=>T,bV:()=>A,bW:()=>P,vJ:()=>v});var o,s=r(39166),n=r(32391),i=r(61939),l=r(90525),u=r(91463),a=r(71760),p=r(6322),c=r(60729),d=r(54805),f=r(79836),y=r(17135),h=r(43253),m=r(47823),g=r(73368),b=r(93682);let I=()=>i.A.getLogger("esri.layers.ogc.ogcFeatureUtils"),w="startindex",F=new Set([w,"offset"]),v="http://www.opengis.net/def/crs/",T=`${v}OGC/1.3/CRS84`;async function S(e,t,r={},i=5){let{links:a}=e,p=G(a,"items",o.geojson)||G(a,"http://www.opengis.net/def/rel/ogc/1.0/items",o.geojson);if(null==p)throw new n.A("ogc-feature-layer:missing-items-page","Missing items url");let{apiKey:c,customParameters:d,signal:h}=r,v=(0,l.s2)(p.href,e.landingPage.url),T={limit:i,...d,token:c},A=(0,l.a6)(v,T),M={accept:o.geojson},{data:N}=await (0,s.A)(A,{signal:h,headers:M}),C=function(e,t,r){if(!r)return;let s=G(r,"next",o.geojson),n=(0,l.An)(s?.href)?.query;if(!n)return;let i=Object.keys((0,l.An)(e).query??{}),u=Object.entries(n).filter(([e])=>!i.includes(e)).find(([e,r])=>F.has(e.toLowerCase())&&Number.parseInt(r,10)===t);return u?.[0]}(A,i,N.links)??w;(0,f.sO)(N);let x=(0,f.BM)(N,{geometryType:t.geometryType}),P=t.fields||x.fields||[],R=null!=t.hasZ?t.hasZ:x.hasZ,j=x.geometryType,O=t.objectIdField||x.objectIdFieldName||"OBJECTID",Z=t.timeInfo,_=P.find(({name:e})=>e===O);if(_)_.editable=!1,_.nullable=!1;else{if(!x.objectIdFieldType)throw new n.A("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");P.unshift({name:O,alias:O,type:"number"===x.objectIdFieldType?"esriFieldTypeOID":"esriFieldTypeString",editable:!1,nullable:!1})}if(O!==x.objectIdFieldName){let e=P.find(({name:e})=>e===x.objectIdFieldName);e&&(e.type="esriFieldTypeInteger")}for(let e of(P===x.fields&&x.unknownFields.length>0&&I().warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:x.unknownFields}}),P)){if(null==e.name&&(e.name=e.alias),null==e.alias&&(e.alias=e.name),"esriFieldTypeOID"!==e.type&&"esriFieldTypeGlobalID"!==e.type&&(e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable),!e.name)throw new n.A("ogc-feature-layer:invalid-field-name","field name is missing",{field:e});if(!g.m.jsonValues.includes(e.type))throw new n.A("ogc-feature-layer:invalid-field-type",`invalid type for field "${e.name}"`,{field:e})}if(Z){let e=new m.A(P);if(Z.startTimeField){let t=e.get(Z.startTimeField);t?(Z.startTimeField=t.name,t.type="esriFieldTypeDate"):Z.startTimeField=null}if(Z.endTimeField){let t=e.get(Z.endTimeField);t?(Z.endTimeField=t.name,t.type="esriFieldTypeDate"):Z.endTimeField=null}if(Z.trackIdField){let t=e.get(Z.trackIdField);t?Z.trackIdField=t.name:(Z.trackIdField=null,I().warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:Z}}))}Z.timeReference||={timeZoneIANA:b.n$},Z.startTimeField||Z.endTimeField||(I().warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:Z}}),Z=void 0)}return{drawingInfo:j?(0,y.F0)(j):null,extent:function(e){let t=e.extent?.spatial;if(!t)return null;let r=t.bbox[0],o=4===r.length,[s,n]=r,i=o?void 0:r[2];return{xmin:s,ymin:n,xmax:o?r[2]:r[3],ymax:o?r[3]:r[4],zmin:i,zmax:o?void 0:r[5],spatialReference:u.A.WGS84.toJSON()}}(e),geometryType:j,fields:P,hasZ:!!R,objectIdField:O,paginationParameter:C,timeInfo:Z}}async function A(e,t={}){let{links:r,url:i}=e,u=G(r,"data",o.json)||G(r,"http://www.opengis.net/def/rel/ogc/1.0/data",o.json);if(null==u)throw new n.A("ogc-feature-layer:missing-collections-page","Missing collections url");let{apiKey:a,customParameters:p,signal:c}=t,d=(0,l.s2)(u.href,i),{data:f}=await (0,s.A)(d,{signal:c,headers:{accept:o.json},query:{...p,token:a}});for(let t of f.collections)t.landingPage=e;return f}async function M(e,t={}){let{links:r,url:i}=e,u=G(r,"conformance",o.json)||G(r,"http://www.opengis.net/def/rel/ogc/1.0/conformance",o.json);if(null==u)throw new n.A("ogc-feature-layer:missing-conformance-page","Missing conformance url");let{apiKey:a,customParameters:p,signal:c}=t,d=(0,l.s2)(u.href,i),{data:f}=await (0,s.A)(d,{signal:c,headers:{accept:o.json},query:{...p,token:a}});return f}async function N(e,t={}){let{apiKey:r,customParameters:n,signal:i}=t,{data:l}=await (0,s.A)(e,{signal:i,headers:{accept:o.json},query:{...n,token:r}});return l.url=e,l}async function C(e,t={}){let{links:r,url:n}=e,i=G(r,"service-desc",o.openapi);if(null==i)return I().warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null;let{apiKey:u,customParameters:a,signal:p}=t,c=(0,l.s2)(i.href,n),{data:d}=await (0,s.A)(c,{signal:p,headers:{accept:o.openapi},query:{...a,token:u}});return d}function x(e){let t=/^http:\/\/www\.opengis.net\/def\/crs\/(?<authority>.*)\/(?<version>.*)\/(?<code>.*)$/i.exec(e),r=t?.groups;if(!r)return null;let{authority:o,code:s}=r;switch(o.toLowerCase()){case"ogc":switch(s.toLowerCase()){case"crs27":return u.A.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return u.A.WGS84.wkid;default:return null}case"esri":case"epsg":{let e=Number.parseInt(s,10);return Number.isNaN(e)?null:e}default:return null}}async function P(e,t,r){let o=await R(e,t,r);return(0,c.ZF)(o)}async function R(e,t,r){var i;let{collection:{links:y,landingPage:{url:g}},layerDefinition:b,maxRecordCount:I,queryParameters:{apiKey:w,customParameters:F},spatialReference:v,supportedCrs:T}=e,S=G(y,"items",o.geojson)||G(y,"http://www.opengis.net/def/rel/ogc/1.0/items",o.geojson);if(null==S)throw new n.A("ogc-feature-layer:missing-items-page","Missing items url");let{geometry:A,num:M,start:N,timeExtent:C,where:x}=t;if(t.objectIds)throw new n.A("ogc-feature-layer:query-by-objectids-not-supported","Queries with object ids are not supported");let P=u.A.fromJSON(v),R=t.outSpatialReference??P,Z=R.isWGS84?null:j(R,T),_=function(e,t){if(null==e||"extent"!==e.type)return null;let{spatialReference:r}=e;if(!r||r.isWGS84)return{bbox:O(e)};let o=j(r,t);return null!=o?{bbox:O(e),"bbox-crs":o}:r.isWebMercator?{bbox:O((0,p.Cv)(e,u.A.WGS84))}:null}(A,T),E=function(e){if(null==e)return null;let{start:t,end:r}=e;return`${null!=t?t.toISOString():".."}/${null!=r?r.toISOString():".."}`}(C),D=null!=(i=x)&&i&&"1=1"!==i?i:null,k=M??(null==N?I:10),{fields:q,geometryType:B,hasZ:Q,objectIdField:z,paginationParameter:$}=b,L=(0,l.s2)(S.href,g),{data:U}=await (0,s.A)(L,{...r,query:{...F,..._,crs:Z,datetime:E,query:D,limit:k,[$]:0===N?void 0:N,token:w},headers:{accept:o.geojson}}),V=(0,f.bd)(U,{geometryType:B,hasZ:Q,objectIdField:z}),H=V.length===k&&!!G(U.links??[],"next",o.geojson),J=new m.A(q);for(let e of V){let t={};for(let r of((0,h.MB)(J,t,e.attributes,!0),J.fields))!r.nullable||r.name in t||(t[r.name]=null);t[z]=e.attributes[z],e.attributes=t}if(!Z&&R.isWebMercator){for(let e of V)if(null!=e.geometry&&null!=B){let t=(0,c.zv)(e.geometry,B,Q,!1);t.spatialReference=u.A.WGS84,e.geometry=(0,c.Ux)((0,p.Cv)(t,R))}}for(let e of V)e.objectId=e.attributes[z];let W=Z||!Z&&R.isWebMercator?R.toJSON():a.KK,Y=new d.A;return Y.exceededTransferLimit=H,Y.features=V,Y.fields=q,Y.geometryType=B,Y.hasZ=Q,Y.objectIdFieldName=z,Y.spatialReference=W,Y}function j(e,t){let{isWebMercator:r,wkid:o}=e;if(!o)return null;let s=r?t[3857]??t[102100]??t[102113]??t[900913]:t[e.wkid];return s?`${v}${s}`:null}function O(e){if(null==e)return"";let{xmin:t,ymin:r,xmax:o,ymax:s}=e;return`${t},${r},${o},${s}`}function G(e,t,r){return e.find(({rel:e,type:o})=>e===t&&o===r)??e.find(({rel:e,type:r})=>e===t&&!r)}!function(e){e.json="application/json",e.geojson="application/geo+json",e.openapi="application/vnd.oai.openapi+json;version=3.0"}(o||(o={}))},82795:(e,t,r)=>{r.d(t,{N3:()=>l,Om:()=>i});var o=r(94264),s=r(11506),n=r(56599);class i{constructor(e=null,t={},r,o,s=0){this.geometry=e,this.attributes=t,this.centroid=r,this.objectId=o,this.displayId=s}static fromJSON(e){let t=e.geometry?n.A.fromJSON(e.geometry):null,r=e.centroid?n.A.fromJSON(e.centroid):null,o=e.objectId;return new i(t,e.attributes,r,o)}weakClone(){let e=new i(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e}clone(){let e=new i(this.geometry?.clone(),{...this.attributes},this.centroid?.clone(),this.objectId);return e.displayId=this.displayId,e}ensureCentroid(e){return this.centroid??=(0,s.Q)(new n.A,this.geometry,e.hasZ,e.hasM),this.centroid}get usedMemory(){return 128+(0,o.lM)(this.attributes)+(this.geometry?.usedMemory??0)}}function l(e){return!!e.geometry?.coords?.length}},94264:(e,t,r)=>{r.d(t,{Qf:()=>u,Qh:()=>i,RS:()=>s,ez:()=>p,i5:()=>c,lM:()=>n,qK:()=>a});var o=r(48678);let s=16;function n(e){if(!e)return 0;let t=a;for(let r in e)e.hasOwnProperty(r)&&(t+=l(e[r],!1));return t}function i(e){if(!e)return 0;if("number"==typeof e[0])return u(e);if(Array.isArray(e)){var t=e;let r=t.length;if(0===r||"number"==typeof t[0])return function(e,t){return p+e.length*t}(t,8);let o=p;for(let e=0;e<r;e++)o+=l(t[e]);return o}let r=a;for(let t in e)e.hasOwnProperty(t)&&(r+=l(e[t]));return r}function l(e,t=!0){switch(typeof e){case"object":return t?i(e):a;case"string":return 32+e.length;case"number":return s;case"boolean":return 4;default:return 8}}function u(...e){return e.reduce((e,t)=>{var r,n;return e+(t?(0,o.iu)(t)?t.byteLength+c:Array.isArray(t)?(r=t,n=s,p+r.length*n):0:0)},0)}let a=32,p=16,c=145},94682:(e,t,r)=>{r.d(t,{$:()=>o,P:()=>s});let o={supportsDate:!1,supportsFixedInterval:!1,supportsAutoInterval:!1,supportsFixedBoundaries:!1,supportsStackBy:!1,supportsSplitBy:!1,supportsSnapToData:!1,supportsReturnFullIntervalBin:!1,supportsFirstDayOfWeek:!1,supportsNormalization:!1,supportedStatistics:void 0,supportedNormalizationTypes:void 0},s={analytics:{supportsCacheHint:!1},attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1,supportsCacheHint:!1,supportsOrderByFields:!1,supportsResize:!1},data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsAsyncApplyEdits:!1,zDefault:void 0},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryBins:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1,supportsAsyncConvert3D:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:o,query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsCompactGeometry:!1,supportsCurrentUser:!1,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByAnonymous:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsReturnMesh:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsTrueCurve:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsStatistics:!1,tileMaxRecordCount:0}}}}]);