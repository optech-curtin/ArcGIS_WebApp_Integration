"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[526,2111,5927,8160,8255],{6108:(e,t,r)=>{r.d(t,{Og:()=>h,mh:()=>d,n3:()=>c});var n=r(23355),i=r(56911),s=r(40636),a=r(75862),o=r(71760),l=r(48084);function d(e){let{spatialReference:t}=e;return(0,l.M0)(t,u,g,e)}function h(e,t){if(!(0,o.aI)(e.spatialReference,t.spatialReference))return null;let{spatialReference:r}=e;return v[0]=e.x,v[1]=e.y,v[2]=e.hasZ?e.z:0,y[0]=t.x,y[1]=t.y,y[2]=t.hasZ?t.z:0,c(v,y,r)}function c(e,t,r){return(0,l.M0)(r,f,p,e,t,r)}function f(e,t,r){return(0,n.d_)((0,a._3)(x,e,t,r).distance,"meters")}function p(e,t,r){return(0,n.d_)((0,s.geodesicLength)({type:"polyline",spatialReference:r,paths:[[[...e],[...t]]]},"meters"),"meters")}function u(e){return(0,n.d_)((0,a.l1)([e],"meters")[0],"meters")}function g(e){return(0,n.d_)((0,s.geodesicLength)(e,"meters"),"meters")}let x=new a.Zj,v=(0,i.vt)(),y=(0,i.vt)()},10526:(e,t,r)=>{r.r(t),r.d(t,{hydratedAdapter:()=>l});var n=r(61414),i=r(147),s=r(39960),a=r(87960),o=r(65442);let l={convertToGEGeometry:function(e,t){if(null==t)return null;let r="cache"in t?t.cache._geVersion:void 0;return null==r&&(r=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=r)),r},exportPoint:function(e,t,r){let n=e.hasZ(t),i=e.hasM(t),a=new s.A({x:e.getPointX(t),y:e.getPointY(t),spatialReference:r});return n&&(a.z=e.getPointZ(t)),i&&(a.m=e.getPointM(t)),a.cache._geVersion=t,a},exportPolygon:function(e,t,r){let n=new a.A({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:r});return n.cache._geVersion=t,n},exportPolyline:function(e,t,r){let n=new o.A({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:r});return n.cache._geVersion=t,n},exportMultipoint:function(e,t,r){let n=new i.A({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:r});return n.cache._geVersion=t,n},exportExtent:function(e,t,r){let i=e.hasZ(t),s=e.hasM(t),a=new n.A({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:r});if(i){let r=e.getZExtent(t);a.zmin=r.vmin,a.zmax=r.vmax}if(s){let r=e.getMExtent(t);a.mmin=r.vmin,a.mmax=r.vmax}return a.cache._geVersion=t,a}}},34718:(e,t,r)=>{r.d(t,{SelfSnappingEngine:()=>I});var n=r(81856),i=r(28690),s=r(54335),a=r(91838);r(57845),r(61939),r(33638);var o=r(12709),l=r(65985),d=r(23355),h=r(56911),c=r(26585),f=r(73541),p=r(8922),u=r(54036),g=r(51205),x=r(3489),v=r(94799);class y{constructor(e,t){this.view=e,this.options=t,this.squaredShortLineThreshold=g.N.shortLineThreshold*g.N.shortLineThreshold}snap(e,t){return null!=t.vertexHandle?"vertex"!==t.vertexHandle.type?[]:this.snapExistingVertex(e,t):this.snapNewVertex(e,t)}edgeExceedsShortLineThreshold(e,t){return this.exceedsShortLineThreshold((0,f.Lp)(e.leftVertex.pos,this.view,t),(0,f.Lp)(e.rightVertex.pos,this.view,t),t)}exceedsShortLineThreshold(e,t,{spatialReference:r}){return 0===this.squaredShortLineThreshold||(0,x.pM)((0,v.j)(t,r,c.qt,this.view),(0,v.j)(e,r,c.qt,this.view))>this.squaredShortLineThreshold}isVertical(e,t,{spatialReference:r}){let n=(0,p.GA)(r);return(0,u.Io)((0,f.Xz)(e),(0,f.Xz)(t))*n<g.N.verticalLineThresholdMeters}squaredProximityThreshold(e){return"touch"===e?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){let{distance:e,touchSensitivityMultiplier:t}=this.options,r=e*t;return r*r}}var m=r(58562),w=r(43705),E=r(6108),_=r(91842),V=r(89357);class A extends y{snapNewVertex(e,t){let r=t.editGeometryOperations.data.components[0],n=r.edges.length,i=[];if(n<1)return i;let{spatialReference:s}=t,a=(0,v.j)(e,s,c.qt,this.view),{view:o}=this,l=r.edges[n-1],d=l;do{if(this.edgeExceedsShortLineThreshold(d,t)){let r=(0,x.is)(d,o,t);this._processCandidateProposal(r.left,r.right,e,a,t,i)}d=d.leftVertex.leftEdge}while(d&&d!==l);return i}snapExistingVertex(e,t){let r=[],n=t.vertexHandle,i=n.component;if(i.edges.length<2)return r;let{view:s}=this,{spatialReference:a}=t,o=(0,v.j)(e,a,c.qt,s),l=n.leftEdge,d=n.rightEdge;l&&d&&this.edgeExceedsShortLineThreshold(l,t)&&this.edgeExceedsShortLineThreshold(d,t)&&this._processCandidateProposal((0,f.Lp)(l.leftVertex.pos,s,t),(0,f.Lp)(d.rightVertex.pos,s,t),e,o,t,r);let h=i.edges[0],p=h;do{if(p!==n.leftEdge&&p!==n.rightEdge&&this.edgeExceedsShortLineThreshold(p,t)){let n=(0,x.is)(p,s,t);this._processCandidateProposal(n.left,n.right,e,o,t,r)}p=p.rightVertex.rightEdge}while(p&&p!==h);return r}_processCandidateProposal(e,t,r,n,i,s){var a,o,p,u,g,y,A,L;let{spatialReference:G,pointer:P}=i,T=(0,h.vt)();(function(e,t,r,n,{spatialReference:i}){let s=(0,w.IP)(t,r,i,i);if(null==s)return!1;let a=(0,w.IP)(r,n,i,i);if(null==a)return!1;let o=(0,E.n3)(r,n,i);if(null==o)return!1;let h=Math.abs(l.wf.shortestSignedDiff(s,a))>Math.PI/2?l.uC.normalize(s+Math.PI):s;return(0,w.rT)(e,r,i,(0,d.l3)(o,"meters"),(0,d.Wq)(h,"radians","geographic"),"geodesic"),e[2]=n[2],!0})(a=T,o=e,p=t,u=r,i)||(g=a,y=u,A=o,L=p,(0,_.Yv)(y,{start:A,end:L,type:V.Vv.LINE},g),g[2]=y[2]);let S=(0,f.de)((0,f._7)(T));(0,x.pM)(n,(0,v.j)(S,G,c.qt,this.view))<this.squaredProximityThreshold(P)&&s.push(new m.o({lineStart:e,lineEnd:t,targetPoint:S,isDraped:"on-the-ground"===i.elevationInfo?.mode}))}}var L=r(35430),G=r(41723);class P extends y{snapNewVertex(e,t){let r=t.editGeometryOperations.data.components[0],n=r.edges.length,i=r.vertices.length,s=[];if(n<2)return s;let{view:a}=this,o=(0,v.j)(e,t.spatialReference,c.qt,a),l=(0,f.Lp)(r.vertices[i-1].pos,a,t),d=(0,f.Lp)(r.vertices[0].pos,a,t),h=r.edges[n-1],p=h;do{if(this.edgeExceedsShortLineThreshold(p,t)){let r=(0,x.is)(p,a,t);this._checkEdgeForParallelLines(r,l,e,o,t,s),this._checkEdgeForParallelLines(r,d,e,o,t,s)}p=p.leftVertex.leftEdge}while(p&&p!==h);return s}snapExistingVertex(e,t){let r=[],n=t.vertexHandle,i=n.component;if(i.edges.length<3)return r;let{view:s}=this,a=(0,v.j)(e,t.spatialReference,c.qt,s),o=n.leftEdge,l=n.rightEdge,d=i.vertices[0],h=(0,f.Lp)(d.pos,s,t),p=i.vertices.length,u=i.vertices[p-1],g=(0,f.Lp)(u.pos,s,t),y=i.edges[0],m=y;do{if(m!==o&&m!==l&&this.edgeExceedsShortLineThreshold(m,t)){let i=(0,x.is)(m,s,t);o&&this._checkEdgeForParallelLines(i,(0,f.Lp)(o.leftVertex.pos,s,t),e,a,t,r),l&&this._checkEdgeForParallelLines(i,(0,f.Lp)(l.rightVertex.pos,s,t),e,a,t,r),n===d?this._checkEdgeForParallelLines(i,g,e,a,t,r):n===u&&this._checkEdgeForParallelLines(i,h,e,a,t,r)}m=m.rightVertex.rightEdge}while(m&&m!==y);return r}_checkEdgeForParallelLines(e,t,r,n,i,s){let a=e.left,o=e.right;if((0,V.fg)(T,(0,f.Xz)(t),(0,f.Xz)(a),(0,f.Xz)(o)),(0,u.hG)(T,(0,f.Xz)(t))<g.N.parallelLineThreshold)return;(0,V.fg)(T,(0,f.Xz)(r),(0,f.Xz)(a),(0,f.Xz)(o),(0,f.Xz)(t));let{spatialReference:l,pointer:d}=i,h=(0,f.de)((0,f.fA)(T[0],T[1],r[2]));if((0,x.pM)(n,(0,v.j)(h,l,c.qt,this.view))<this.squaredProximityThreshold(d)){if(this.isVertical(h,t,i)||this.isVertical(a,o,i)||function(e,t){let r=e.left,n=e.right;for(let i of t)if((0,V.fg)(T,(0,f.Xz)(n),(0,f.Xz)(i.constraint.start),(0,f.Xz)(i.constraint.end),(0,f.Xz)(r)),(0,u.hG)(T,(0,f.Xz)(n))<g.N.parallelLineThreshold)return i.addReferenceLine(e),!0;return!1}(e,s))return;s.push(new G.B({referenceLine:e,lineStart:t,targetPoint:h,isDraped:"on-the-ground"===i.elevationInfo?.mode}))}}}let T=(0,L.vt)();var S=r(63599),R=r(64088),M=r(39443);class z extends y{snapNewVertex(e,t){let r=t.editGeometryOperations.data.components[0],n=[];if(r.vertices.length<2)return n;let{view:i}=this,s=(0,v.j)(e,t.spatialReference,c.qt,i),a=r.vertices.at(-1);this._checkForSnappingCandidate(M._b.LastVertex,n,a.leftEdge,a,a.leftEdge.leftVertex,e,s,t);let o=r.vertices[0];return this._checkForSnappingCandidate(M._b.FirstVertex,n,o.rightEdge,o,o.rightEdge.rightVertex,e,s,t),n}snapExistingVertex(e,t){let r=[],n=t.vertexHandle;if(n.component.vertices.length<3)return r;let{view:i}=this,s=(0,v.j)(e,t.spatialReference,c.qt,i),a=n.leftEdge,o=n.rightEdge;if(a?.leftVertex.leftEdge){let n=a.leftVertex.leftEdge;this._checkForSnappingCandidate(M._b.ExistingEdge,r,n,n.rightVertex,n.leftVertex,e,s,t)}if(o?.rightVertex.rightEdge){let n=o.rightVertex.rightEdge;this._checkForSnappingCandidate(M._b.ExistingEdge,r,n,n.leftVertex,n.rightVertex,e,s,t)}return r}_checkForSnappingCandidate(e,t,r,n,i,s,a,o){var c,p,g;if(!this.edgeExceedsShortLineThreshold(r,o))return;let x=this.view,v=(0,f.Lp)(n.pos,x,o),y=(0,f.Lp)(i.pos,x,o);(function(e,t,r,n,{spatialReference:i}){let s=(0,w.IP)(t,r,i,i);if(null==s)return!1;let a=(0,w.IP)(r,n,i,i);if(null==a)return!1;let o=Math.sign(l.uC.shortestSignedDiff(s,a))*Math.PI*.5,c=(0,d.Wq)(s+o,"radians","geographic"),f=(0,h.vt)(),p=(0,E.n3)(r,n,i);return null!=p&&((0,w.rT)(f,r,i,(0,d.l3)(p,"meters"),c,"geodesic"),(0,S.d)(e,f,r),!0)})(c=q,p=y,g=v,s,o)||function(e,t,r){let n=(0,u.Re)(X,(0,f.Xz)(r),(0,f.Xz)(t));(0,S.i)(e,n[1],-n[0],0)}(c,p,g),this._checkForSnappingCandidateAlongProjectedRay(e,t,y,v,q,s,a,o)}_checkForSnappingCandidateAlongProjectedRay(e,t,r,n,i,s,a,o){let{spatialReference:l,pointer:d}=o,p=(0,u.Re)(X,(0,f.Xz)(s),(0,f.Xz)(n)),g=(0,u.Om)(i,p)/(0,u.m3)(i),y=(0,u.Ln)(X,(0,f.Xz)(n),i,g),m=(0,f.de)((0,f.fA)(y[0],y[1],s[2]));if((0,x.pM)(a,(0,v.j)(m,l,c.qt,this.view))>this.squaredProximityThreshold(d)||this.isVertical(m,n,o)||this.isVertical(n,r,o))return;let w=(0,S.b)((0,h.vt)(),n,i,Math.sign(g));t.push(new M.HJ({targetPoint:m,constraint:new R.FX(n,(0,f._7)(w)),previousVertex:r,otherVertex:n,otherVertexType:M.pn.CENTER,selfSnappingType:e,isDraped:"on-the-ground"===o.elevationInfo?.mode}))}}let X=(0,L.vt)(),q=(0,h.vt)();var C=r(25927);class j extends y{snapNewVertex(e,t){let r=t.editGeometryOperations.data.components[0],n=[],i=r.vertices.length;if("polygon"!==t.editGeometryOperations.data.type||i<2)return n;let{view:s}=this,a=r.vertices[0],o=r.vertices[i-1],l=(0,f.Lp)(a.pos,s,t),d=(0,f.Lp)(o.pos,s,t);return this._processCandidateProposal(l,d,e,t,n),n}snapExistingVertex(e,t){let r=[],n=t.vertexHandle,i=n.component;if(i.edges.length<2||"polyline"===t.editGeometryOperations.data.type&&(0===n.index||n.index===i.vertices.length-1))return r;let{view:s}=this,a=(0,f.Lp)(n.leftEdge.leftVertex.pos,s,t),o=(0,f.Lp)(n.rightEdge.rightVertex.pos,s,t);return this._processCandidateProposal(a,o,e,t,r),r}_processCandidateProposal(e,t,r,n,i){if(!this.exceedsShortLineThreshold(e,t,n))return;let s=(0,u.Cc)(k,(0,f.Xz)(e),(0,f.Xz)(t),.5),a=.5*(0,u.Io)((0,f.Xz)(e),(0,f.Xz)(t)),o=(0,V.Dh)(k,(0,f.Xz)(r),s,a),l=(0,f.de)((0,f.fA)(o[0],o[1],r[2])),{spatialReference:d,pointer:h}=n,p=(0,v.j)(r,d,c.qt,this.view);if((0,x.pM)(p,(0,v.j)(l,d,c.qt,this.view))<this.squaredProximityThreshold(h)){if(this.isVertical(e,l,n)||this.isVertical(l,t,n))return;i.push(new C.R({targetPoint:l,point1:e,point2:t,isDraped:"on-the-ground"===n.elevationInfo?.mode}))}}}let k=(0,L.vt)();var F=r(18836);let I=class extends i.A{constructor(e){super(e),this.updating=!1,this._snappers=new s.A,this._domain=F.n.SELF}initialize(){this._snappers.push(new P(this.view,this.options),new A(this.view,this.options),new z(this.view,this.options),new j(this.view,this.options))}set options(e){for(let t of(this._set("options",e),this._snappers))t.options=e}async fetchCandidates(e,t,r){if(!(t&this._domain&&this.options.effectiveSelfEnabled))return[];let n=[];for(let t of this._snappers.items)for(let i of t.snap(e,r))n.push(i);return(0,x.xX)(e,n),n}};(0,n._)([(0,a.MZ)({readOnly:!0})],I.prototype,"updating",void 0),(0,n._)([(0,a.MZ)({constructOnly:!0})],I.prototype,"view",void 0),(0,n._)([(0,a.MZ)()],I.prototype,"options",null),I=(0,n._)([(0,o.$)("esri.views.interactive.snapping.SelfSnappingEngine")],I)},40636:(e,t,r)=>{r.r(t),r.d(t,{buffer:()=>R,changeDefaultSpatialReferenceTolerance:()=>Y,clearDefaultSpatialReferenceTolerance:()=>B,clip:()=>h,contains:()=>f,convexHull:()=>A,crosses:()=>p,cut:()=>c,densify:()=>N,difference:()=>L,disjoint:()=>m,distance:()=>u,equals:()=>g,extendedSpatialReferenceInfo:()=>d,flipHorizontal:()=>k,flipVertical:()=>F,generalize:()=>I,geodesicArea:()=>D,geodesicBuffer:()=>M,geodesicDensify:()=>Z,geodesicLength:()=>H,intersect:()=>P,intersectLinesToPoints:()=>J,intersects:()=>x,isSimple:()=>_,nearestCoordinate:()=>z,nearestVertex:()=>X,nearestVertices:()=>q,offset:()=>S,overlaps:()=>w,planarArea:()=>b,planarLength:()=>O,relate:()=>E,rotate:()=>j,simplify:()=>V,symmetricDifference:()=>G,touches:()=>v,union:()=>T,within:()=>y});var n=r(86942),i=r(70433),s=r(71599),a=r(91463),o=r(10526);function l(e){let t=Array.isArray(e)?e[0].spatialReference:e.spatialReference;return t?(0,n.PZ)(a.A,t):a.A.WGS84}function d(e){return s.G.extendedSpatialReferenceInfo(e)}function h(e,t){return(0,i.f)(e),s.G.clip(o.hydratedAdapter,l(e),e,t)}function c(e,t){return(0,i.f)(e),s.G.cut(o.hydratedAdapter,l(e),e,t)}function f(e,t){return(0,i.f)(e),(0,i.f)(t),s.G.contains(o.hydratedAdapter,l(e),e,t)}function p(e,t){return(0,i.f)(e),(0,i.f)(t),s.G.crosses(o.hydratedAdapter,l(e),e,t)}function u(e,t,r){return(0,i.f)(e),(0,i.f)(t),s.G.distance(o.hydratedAdapter,l(e),e,t,r)}function g(e,t){return(0,i.f)(e),(0,i.f)(t),s.G.equals(o.hydratedAdapter,l(e),e,t)}function x(e,t){return(0,i.f)(e),(0,i.f)(t),s.G.intersects(o.hydratedAdapter,l(e),e,t)}function v(e,t){return(0,i.f)(e),(0,i.f)(t),s.G.touches(o.hydratedAdapter,l(e),e,t)}function y(e,t){return(0,i.f)(e),(0,i.f)(t),s.G.within(o.hydratedAdapter,l(e),e,t)}function m(e,t){return(0,i.f)(e),(0,i.f)(t),s.G.disjoint(o.hydratedAdapter,l(e),e,t)}function w(e,t){return(0,i.f)(e),(0,i.f)(t),s.G.overlaps(o.hydratedAdapter,l(e),e,t)}function E(e,t,r){return(0,i.f)(e),(0,i.f)(t),s.G.relate(o.hydratedAdapter,l(e),e,t,r)}function _(e){return(0,i.f)(e),s.G.isSimple(o.hydratedAdapter,l(e),e)}function V(e){return(0,i.f)(e),s.G.simplify(o.hydratedAdapter,l(e),e)}function A(e,t=!1){return s.G.convexHull(o.hydratedAdapter,l(e),e,t)}function L(e,t){return(0,i.f)(t),s.G.difference(o.hydratedAdapter,l(e),e,t)}function G(e,t){return(0,i.f)(t),s.G.symmetricDifference(o.hydratedAdapter,l(e),e,t)}function P(e,t){return(0,i.f)(t),s.G.intersect(o.hydratedAdapter,l(e),e,t)}function T(e){return s.G.union(o.hydratedAdapter,l(e),e)}function S(e,t,r,n,i,a){return s.G.offset(o.hydratedAdapter,l(e),e,t,r,n,i,a)}function R(e,t,r,n=!1){return s.G.buffer(o.hydratedAdapter,l(e),e,t,r,n)}function M(e,t,r,n,i,a){return s.G.geodesicBuffer(o.hydratedAdapter,l(e),e,t,r,n,i,a)}function z(e,t,r=!0){return(0,i.f)(e),s.G.nearestCoordinate(o.hydratedAdapter,l(e),e,t,r)}function X(e,t){return(0,i.f)(e),s.G.nearestVertex(o.hydratedAdapter,l(e),e,t)}function q(e,t,r,n){return(0,i.f)(e),s.G.nearestVertices(o.hydratedAdapter,l(e),e,t,r,n)}function C(e){return"xmin"in e?"center"in e?e.center:null:"x"in e?e:"extent"in e?e.extent?.center??null:null}function j(e,t,r){if(null==e)throw new W;let n=e.spatialReference;if(null==(r=r??C(e)))throw new W;let i=e.constructor.fromJSON(s.G.rotate(e,t,r));return i.spatialReference=n,i}function k(e,t){if(null==e)throw new W;let r=e.spatialReference;if(null==(t=t??C(e)))throw new W;let n=e.constructor.fromJSON(s.G.flipHorizontal(e,t));return n.spatialReference=r,n}function F(e,t){if(null==e)throw new W;let r=e.spatialReference;if(null==(t=t??C(e)))throw new W;let n=e.constructor.fromJSON(s.G.flipVertical(e,t));return n.spatialReference=r,n}function I(e,t,r,n){return(0,i.f)(e),s.G.generalize(o.hydratedAdapter,l(e),e,t,r,n)}function N(e,t,r){return(0,i.f)(e),s.G.densify(o.hydratedAdapter,l(e),e,t,r)}function Z(e,t,r,n=0){return(0,i.f)(e),s.G.geodesicDensify(o.hydratedAdapter,l(e),e,t,r,n)}function b(e,t){return(0,i.f)(e),s.G.planarArea(o.hydratedAdapter,l(e),e,t)}function O(e,t){return(0,i.f)(e),s.G.planarLength(o.hydratedAdapter,l(e),e,t)}function D(e,t,r){return(0,i.f)(e),s.G.geodesicArea(o.hydratedAdapter,l(e),e,t,r)}function H(e,t,r){return(0,i.f)(e),s.G.geodesicLength(o.hydratedAdapter,l(e),e,t,r)}function J(e,t){return s.G.intersectLinesToPoints(o.hydratedAdapter,l(e),e,t)}function Y(e,t){s.G.changeDefaultSpatialReferenceTolerance(e,t)}function B(e){s.G.clearDefaultSpatialReferenceTolerance(e)}class W extends Error{constructor(){super("Illegal Argument Exception")}}},48084:(e,t,r)=>{r.d(t,{M0:()=>a,yF:()=>s});var n=r(75862),i=r(71760);function s(e){return(0,n.TT)(e)||(0,i.K8)(e)}function a(e,t,r,...s){return(0,n.TT)(e)?t.apply(void 0,s):(0,i.K8)(e)?r.apply(void 0,s):null}},78160:(e,t,r)=>{r.d(t,{c:()=>n,g:()=>i});var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}}}]);