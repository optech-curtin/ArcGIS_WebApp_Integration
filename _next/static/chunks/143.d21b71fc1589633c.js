"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[143],{20143:(e,t,r)=>{r.r(t),r.d(t,{executeRelationshipQuery:()=>f,executeRelationshipQueryForCount:()=>y});var o=r(86277),a=r(39166),u=r(71760),n=r(1485);async function d(e,t,r){let o=await s(e,t,r),a=o.data,u=a.geometryType,n=a.spatialReference,d={};for(let e of a.relatedRecordGroups){let t={fields:void 0,objectIdFieldName:void 0,geometryType:u,spatialReference:n,hasZ:!!a.hasZ,hasM:!!a.hasM,features:e.relatedRecords};if(null!=e.objectId)d[e.objectId]=t;else for(let r of Object.keys(e))"relatedRecords"!==r&&(d[e[r]]=t)}return{...o,data:d}}async function l(e,t,r){let o=await s(e,t,r,{returnCountOnly:!0}),a=o.data,u={};for(let e of a.relatedRecordGroups)null!=e.objectId&&(u[e.objectId]=e.count);return{...o,data:u}}async function s(e,t,r={},o){let d=(0,n.z)({...e.query,f:"json",...o,...function(e,t){let r=e.toJSON();return r.objectIds&&(r.objectIds=r.objectIds.join(",")),r.orderByFields&&(r.orderByFields=r.orderByFields.join(",")),r.outFields&&!t?.returnCountOnly?r.outFields.includes("*")?r.outFields="*":r.outFields=r.outFields.join(","):delete r.outFields,r.outSR&&(r.outSR=(0,u.YX)(r.outSR)),r.dynamicDataSource&&(r.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r}(t,o)});return(0,a.A)(e.path+"/queryRelatedRecords",{...r,query:{...r.query,...d}})}var c=r(49570),i=r(77298);async function f(e,t,r){return t=i.default.from(t),d((0,o.Dl)(e),t,r).then(e=>{let t=e.data,r={};return Object.keys(t).forEach(e=>r[e]=c.A.fromJSON(t[e])),r})}async function y(e,t,r){return t=i.default.from(t),l((0,o.Dl)(e),t,{...r}).then(e=>e.data)}}}]);