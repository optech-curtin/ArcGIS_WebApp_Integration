"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8093],{2370:(e,t,r)=>{r.d(t,{E:()=>F,w:()=>o});var n=r(31461),i=r(28255);r(57845);var s=r(87196),l=r(70115);class o{constructor(e=9,t){this._compareMinX=c,this._compareMinY=f,this._toBBox=e=>e,this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this._toBBox=t:this._initFormat(t)),this.clear()}destroy(){this.clear(),_.prune(),b.prune(),x.prune(),M.prune()}all(e){a(this._data,e)}search(e,t){let r=this._data,n=this._toBBox;if(g(e,r))for(_.clear();r;){for(let i=0,s=r.children.length;i<s;i++){let s=r.children[i],l=r.leaf?n(s):s;g(e,l)&&(r.leaf?t(s):y(e,l)?a(s,t):_.push(s))}r=_.pop()}}collides(e){let t=this._data,r=this._toBBox;if(!g(e,t))return!1;for(_.clear();t;){for(let n=0,i=t.children.length;n<i;n++){let i=t.children[n],s=t.leaf?r(i):i;if(g(e,s)){if(t.leaf||y(e,s))return!0;_.push(i)}}t=_.pop()}return!1}load(e){if(!e.length)return this;if(e.length<this._minEntries){for(let t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(this._data.children.length)if(this._data.height===t.height)this._splitRoot(this._data,t);else{if(this._data.height<t.height){let e=this._data;this._data=t,t=e}this._insert(t,this._data.height-t.height-1,!0)}else this._data=t;return this}insert(e){return e&&this._insert(e,this._data.height-1),this}clear(){return this._data=new B([]),this}remove(e){if(!e)return this;let t,r=this._data,s=null,l=0,o=!1,a=this._toBBox(e);for(x.clear(),M.clear();r||x.length>0;){if(r||(r=x.pop(),s=x.data[x.length-1],l=M.pop()??0,o=!0),r.leaf&&-1!==(t=(0,n.qh)(r.children,(0,i.zI)(e),r.children.length,r.indexHint)))return r.children.splice(t,1),x.push(r),this._condense(x),this;o||r.leaf||!y(r,a)?s?(l++,r=s.children[l],o=!1):r=null:(x.push(r),M.push(l),l=0,s=r,r=r.children[0])}return this}toJSON(){return this._data}fromJSON(e){return this._data=e,this}_build(e,t,r,n){let i=r-t+1,s=this._maxEntries;if(i<=s){let n=new B(e.slice(t,r+1));return u(n,this._toBBox),n}n||(n=Math.ceil(Math.log(i)/Math.log(s)),s=Math.ceil(i/s**(n-1)));let l=new w([]);l.height=n;let o=Math.ceil(i/s),a=o*Math.ceil(Math.sqrt(s));I(e,t,r,a,this._compareMinX);for(let i=t;i<=r;i+=a){let t=Math.min(i+a-1,r);I(e,i,t,o,this._compareMinY);for(let r=i;r<=t;r+=o){let i=Math.min(r+o-1,t);l.children.push(this._build(e,r,i,n-1))}}return u(l,this._toBBox),l}_insert(e,t,r){let n=this._toBBox,i=r?e:n(e);x.clear();let s=function(e,t,r,n){for(;n.push(t),!0!==t.leaf&&n.length-1!==r;){let r,n=1/0,l=1/0;for(let o=0,a=t.children.length;o<a;o++){var i,s;let a=t.children[o],u=m(a),d=(i=e,(Math.max((s=a).maxX,i.maxX)-Math.min(s.minX,i.minX))*(Math.max(s.maxY,i.maxY)-Math.min(s.minY,i.minY))-u);d<l?(l=d,n=u<n?u:n,r=a):d===l&&u<n&&(n=u,r=a)}t=r||t.children[0]}return t}(i,this._data,t,x);for(s.children.push(e),h(s,i);t>=0&&x.data[t].children.length>this._maxEntries;)this._split(x,t),t--;var l=i,o=x,a=t;for(let e=a;e>=0;e--)h(o.data[e],l)}_split(e,t){let r=e.data[t],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);let s=this._chooseSplitIndex(r,i,n);if(!s)return;let l=r.children.splice(s,r.children.length-s),o=r.leaf?new B(l):new w(l);o.height=r.height,u(r,this._toBBox),u(o,this._toBBox),t?e.data[t-1].children.push(o):this._splitRoot(r,o)}_splitRoot(e,t){this._data=new w([e,t]),this._data.height=e.height+1,u(this._data,this._toBBox)}_chooseSplitIndex(e,t,r){let n,i,s;n=i=1/0;for(let l=t;l<=r-t;l++){let t=d(e,0,l,this._toBBox),o=d(e,l,r,this._toBBox),a=function(e,t){let r=Math.max(e.minX,t.minX),n=Math.max(e.minY,t.minY);return Math.max(0,Math.min(e.maxX,t.maxX)-r)*Math.max(0,Math.min(e.maxY,t.maxY)-n)}(t,o),u=m(t)+m(o);a<n?(n=a,s=l,i=u<i?u:i):a===n&&u<i&&(i=u,s=l)}return s}_chooseSplitAxis(e,t,r){let n=e.leaf?this._compareMinX:c,i=e.leaf?this._compareMinY:f;this._allDistMargin(e,t,r,n)<this._allDistMargin(e,t,r,i)&&e.children.sort(n)}_allDistMargin(e,t,r,n){e.children.sort(n);let i=this._toBBox,s=d(e,0,t,i),l=d(e,r-t,r,i),o=p(s)+p(l);for(let n=t;n<r-t;n++){let t=e.children[n];h(s,e.leaf?i(t):t),o+=p(s)}for(let n=r-t-1;n>=t;n--){let t=e.children[n];h(l,e.leaf?i(t):t),o+=p(l)}return o}_condense(e){for(let t=e.length-1;t>=0;t--){let r=e.data[t];if(0===r.children.length)if(t>0){let i=e.data[t-1],s=i.children;s.splice((0,n.qh)(s,r,s.length,i.indexHint),1)}else this.clear();else u(r,this._toBBox)}}_initFormat(e){let t=["return a"," - b",";"];this._compareMinX=Function("a","b",t.join(e[0])),this._compareMinY=Function("a","b",t.join(e[1])),this._toBBox=Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}function a(e,t){let r=e;for(b.clear();r;){if(!0===r.leaf)for(let e of r.children)t((0,i.zI)(e));else b.pushArray(r.children);r=b.pop()??null}}function u(e,t){d(e,0,e.children.length,t,e)}function d(e,t,r,n,i){i||(i=new B([])),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s,l=t;l<r;l++)s=e.children[l],h(i,e.leaf?n(s):s);return i}function h(e,t){e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY)}function c(e,t){return e.minX-t.minX}function f(e,t){return e.minY-t.minY}function m(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function p(e){return e.maxX-e.minX+(e.maxY-e.minY)}function y(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function g(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function I(e,t,r,n,i){let s=[t,r];for(;s.length;){let t=s.pop(),r=s.pop();if(t-r<=n)continue;let o=r+Math.ceil((t-r)/n/2)*n;(0,l.q)(e,o,r,t,i),s.push(r,o,o,t)}}let _=new s.A,b=new s.A,x=new s.A,M=new s.A({deallocator:void 0});class F{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class T extends F{constructor(){super(...arguments),this.height=1,this.indexHint=new n.vW}}class B extends T{constructor(e){super(),this.children=e,this.leaf=!0}}class w extends T{constructor(e){super(),this.children=e,this.leaf=!1}}},5895:(e,t,r)=>{r.d(t,{T:()=>i});var n=r(82795);let i={getObjectId:e=>e.objectId,getAttributes:e=>e.attributes,getAttribute:(e,t)=>e.attributes[t],cloneWithGeometry:(e,t)=>new n.Om(t,e.attributes,null,e.objectId),getGeometry:e=>e.geometry,getCentroid:(e,t)=>e.ensureCentroid(t)}},11064:(e,t,r)=>{r.d(t,{A:()=>m});var n=r(31461),i=r(32391),s=r(74652),l=r(61939),o=r(42845),a=r(84766),u=r(60729),d=r(29499),h=r(33332),c=r(5895);let f=(0,o.vt)();class m{constructor(e){this.geometryInfo=e,this._boundsStore=new d.F,this._featuresById=new Map,this._usedMemory=0,this.events=new s.A,this.featureAdapter=c.T}get usedMemory(){return this._usedMemory}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let e=0;return this._featuresById.forEach(t=>{null!=t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)}),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(e){if(null==this.fullBounds)return null;let[t,r,n,i]=this.fullBounds;return{xmin:t,ymin:r,xmax:n,ymax:i,spatialReference:(0,h.ag)(e)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(let t of e)this._add(t);this._emitChanged()}upsertMany(e){let t=e.map(e=>this._upsert(e));return this._emitChanged(),t.filter(n.Ru)}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged(),this._usedMemory=0}removeById(e){let t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){for(let t of(this._boundsStore.invalidateIndex(),e)){let e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t){for(let r of e){let e=this._boundsStore.get(r.objectId);e&&t((0,o.Jt)(f,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach(t=>e(t))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,e=>{t(this._featuresById.get(e))})}_emitChanged(){this.events.emit("changed",void 0)}_add(e){let t;if(!e)return;let r=e.objectId;if(null==r)return void l.A.getLogger("esri.layers.graphics.data.FeatureStore").error(new i.A("featurestore:invalid-feature","feature id is missing",{feature:e}));let n=this._featuresById.get(r);if(n?(e.displayId=n.displayId,t=this._boundsStore.get(r),this._boundsStore.delete(r),this._usedMemory-=this.estimateFeatureUsedMemory?.(n)??0):null!=this.onFeatureAdd&&this.onFeatureAdd(e),!e.geometry?.coords?.length)return this._boundsStore.set(r,null),void this._featuresById.set(r,e);null!=(t=(0,u.jQ)(null!=t?t:(0,a.vt)(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM))&&this._boundsStore.set(r,t),this._featuresById.set(r,e),this._usedMemory+=this.estimateFeatureUsedMemory?.(e)??0}_upsert(e){let t=e?.objectId;if(null==t)return l.A.getLogger("esri.layers.graphics.data.FeatureStore").error(new i.A("featurestore:invalid-feature","feature id is missing",{feature:e})),null;let r=this._featuresById.get(t);if(!r)return this._add(e),e;this._usedMemory-=this.estimateFeatureUsedMemory?.(r)??0;let{geometry:n,attributes:s}=e;for(let e in s)r.attributes[e]=s[e];return n&&(r.geometry=n,this._boundsStore.set(t,(0,u.jQ)((0,a.vt)(),n,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null)),this._usedMemory+=this.estimateFeatureUsedMemory?.(r)??0,r}_remove(e){null!=this.onFeatureRemove&&this.onFeatureRemove(e);let t=e.objectId;return this._boundsStore.delete(t),this._featuresById.delete(t),this._usedMemory-=this.estimateFeatureUsedMemory?.(e)??0,e}}},11506:(e,t,r)=>{function n(e,t){return e?t?4:3:t?3:2}function i(e,t,r,i){if(!t?.lengths.length)return null;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);let s=e.coords,l=[],o=r?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:a,coords:u}=t,d=n(r,i),h=0;for(let e of a){let t=function(e,t,r,i,s,l){let o=n(s,l),a=r,u=r+o,d=0,h=0,c=0,f=0,m=0;for(let r=0,n=i-1;r<n;r++,a+=o,u+=o){let r=t[a],n=t[a+1],i=t[a+2],l=t[u],o=t[u+1],p=t[u+2],y=r*o-l*n;f+=y,d+=(r+l)*y,h+=(n+o)*y,s&&(y=r*p-l*i,c+=(i+p)*y,m+=y),r<e[0]&&(e[0]=r),r>e[1]&&(e[1]=r),n<e[2]&&(e[2]=n),n>e[3]&&(e[3]=n),s&&(i<e[4]&&(e[4]=i),i>e[5]&&(e[5]=i))}if(f>0&&(f*=-1),m>0&&(m*=-1),!f)return null;let p=[d,h,.5*f];return s&&(p[3]=c,p[4]=.5*m),p}(o,u,h,e,r,i);t&&l.push(t),h+=e*d}if(l.sort((e,t)=>{let n=e[2]-t[2];return 0===n&&r&&(n=e[4]-t[4]),n}),l.length){let e=6*l[0][2];s[0]=l[0][0]/e,s[1]=l[0][1]/e,r&&(e=6*l[0][4],s[2]=0!==e?l[0][3]/e:0),(s[0]<o[0]||s[0]>o[1]||s[1]<o[2]||s[1]>o[3]||r&&(s[2]<o[4]||s[2]>o[5]))&&(s.length=0)}if(!s.length){let e=t.lengths[0]?function(e,t,r,i,s){let l=n(i,s),o=0,a=t+l,u=0,d=0,h=0,c=0;for(let t=0,n=r-1;t<n;t++,o+=l,a+=l){var f,m,p,y,g;let t=e[o],r=e[o+1],n=e[o+2],s=e[a],l=e[a+1],I=e[a+2],_=i?function(e,t,r,n,i,s){let l=n-e,o=i-t,a=s-r;return Math.sqrt(l*l+o*o+a*a)}(t,r,n,s,l,I):function(e,t,r,n){let i=r-e,s=n-t;return Math.sqrt(i*i+s*s)}(t,r,s,l);if(_)if(u+=_,i){let e=[(f=t)+.5*(s-f),(m=r)+.5*(l-m),(p=n)+.5*(I-p)];d+=_*e[0],h+=_*e[1],c+=_*e[2]}else{let e=[(y=t)+.5*(s-y),(g=r)+.5*(l-g)];d+=_*e[0],h+=_*e[1]}}return u>0?i?[d/u,h/u,c/u]:[d/u,h/u]:r>0?i?[e[t],e[t+1],e[t+2]]:[e[t],e[t+1]]:null}(u,0,a[0],r,i):null;if(!e)return null;s[0]=e[0],s[1]=e[1],r&&e.length>2&&(s[2]=e[2])}return e}r.d(t,{Q:()=>i})},17135:(e,t,r)=>{r.d(t,{F0:()=>o,Vx:()=>d,e2:()=>c,f:()=>f});var n=r(57845),i=r(33715),s=r(54781),l=r(64547);function o(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?l.Cb:"esriGeometryPolyline"===e?l.yM:l.WR}}}let a=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/,u=1;function d(e,t){if((0,n.A)("esri-csp-restrictions"))return()=>({[t]:null,...e});try{let r=`this${h(t)} = null;`;for(let t in e)r+=`this${h(t)} = ${JSON.stringify(e[t])};`;let n=Function(`
      return class AttributesClass$${u++} {
        constructor() {
          ${r};
        }
      }
    `)();return()=>new n}catch(r){return()=>({[t]:null,...e})}}function h(e){return a.test(e)?`.${e}`:`["${e}"]`}function c(e={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,i.o8)(e)}}]}function f(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:s.F,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:s.P,editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},29499:(e,t,r)=>{r.d(t,{F:()=>o});var n=r(57845),i=r(2370),s=r(84766);let l={minX:0,minY:0,maxX:0,maxY:0};class o{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new i.w(9,(0,n.A)("esri-csp-restrictions")?e=>({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){let e=Array(this._idByBounds.size),t=0;this._idByBounds.forEach((r,n)=>{e[t++]=n}),this._indexInvalid=!1,this._index.clear(),this._index.load(e)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(e=>this._idByBounds.has(e))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;let e=(0,s.Ie)();for(let t of this._boundsById.values())t&&(e[0]=Math.min(t[0],e[0]),e[1]=Math.min(t[1],e[1]),e[2]=Math.max(t[2],e[2]),e[3]=Math.max(t[3],e[3]));return e}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(e){let t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))}forEachInBounds(e,t){var r;this._loadIndex(),r=this._index,l.minX=e[0],l.minY=e[1],l.maxX=e[2],l.maxY=e[3],r.search(l,e=>t(this._idByBounds.get(e)))}get(e){return this._boundsById.get(e)}has(e){return this._boundsById.has(e)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(e,t){if(!this._indexInvalid){let t=this._boundsById.get(e);t&&(this._index.remove(t),this._idByBounds.delete(t))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},43253:(e,t,r)=>{let n;r.d(t,{$1:()=>y,CR:()=>m,MB:()=>f,PC:()=>g,Yx:()=>u,bP:()=>h});var i=r(67039),s=r(71760),l=r(39265);class o{constructor(){this.code=null,this.description=null}}class a{constructor(e){this.error=new o,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e}}function u(e){return new a(e)}class d{constructor(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e}}function h(e){return new d(e)}let c=new Set;function f(e,t,r,n=!1){for(let s in c.clear(),r){let o=e.get(s);if(!o)continue;let a=function(e,t){let r=t;return(0,l.WA)(e)&&"string"==typeof t?r=parseFloat(t):(0,l.yM)(e)&&null!=t&&"string"!=typeof t?r=String(t):(0,l.vE)(e)&&"string"==typeof t&&(r=(0,i._U)(t)),(0,l.WX)(r)}(o,r[s]);if(c.add(o.name),o&&(n||o.editable)){let e=(0,l.CJ)(o,a);if(e)return u((0,l.uo)(e,o,a));t[o.name]=a}}for(let t of e.requiredFields??[])if(!c.has(t.name))return u(`missing required field "${t.name}"`);return null}function m(e,t){if(!e||!(0,s.fn)(t))return e;if("rings"in e||"paths"in e){if(null==n)throw TypeError("geometry engine not loaded");return n.simplify(t,e)}return e}async function p(){return null==n&&(n=await Promise.all([r.e(472),r.e(793)]).then(r.bind(r,29786))),n}async function y(e,t){(0,s.fn)(e)&&("esriGeometryPolygon"===t||"esriGeometryPolyline"===t)&&await p()}let g={supportsAutoIntervalBin:!0,supportsFixedIntervalBin:!0,supportsFixedBoundariesBin:!0,supportsDateBin:!0,supportsStackBy:!0,supportsSplitBy:!0,supportsNormalization:!0,supportedStatisticTypes:["COUNT","SUM","AVG","VAR","STDDEV","MIN","MAX","PERCENTILE_CONT","PERCENTILE_DISC","CentroidAggregate","EnvelopeAggregate","ConvexHullAggregate"],supportedNormalizationTypes:["field","log","naturalLog","percentOfTotal","squareRoot"]}},54805:(e,t,r)=>{r.d(t,{A:()=>n});class n{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){let e=new n;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}}},56599:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(94264);class i{constructor(e=[],t=[]){this.lengths=e??[],this.coords=t??[]}static fromJSON(e){return new i(e.lengths,e.coords)}static fromRect(e){let[t,r,n,s]=e,l=n-t,o=s-r;return new i([5],[t,r,l,0,0,o,-l,0,0,-o])}get isPoint(){return 0===this.lengths.length&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((e,t)=>e+t)}get usedMemory(){return 64+(0,n.Qf)(this.lengths,this.coords)}area(){let e=0,t=0;if(!this.lengths.length)return 0;for(let r=0;r<this.lengths.length;r++){let n=this.lengths[r];if(n<3)continue;let i=this.coords[2*t],s=this.coords[2*t+1];for(let r=1;r<n;r+=1){let n=this.coords[2*(r+t)],l=this.coords[2*(r+t)+1];e+=-.5*(n-i)*(l+s),i=n,s=l}t+=n}return e}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){let n=this.lengths[r];for(let r=0;r<n;r++)e(this.coords[2*(r+t)],this.coords[2*(r+t)+1]);t+=n}}deltaDecode(){let e=this.clone(),{coords:t,lengths:r}=e,n=0;for(let e of r){for(let r=1;r<e;r++)t[2*(n+r)]+=t[2*(n+r)-2],t[2*(n+r)+1]+=t[2*(n+r)-1];n+=e}return e}clone(e){if(0===this.lengths.length)return new i([],[this.coords[0],this.coords[1]]);let t=(0===this.lengths.length?1:this.lengths.reduce((e,t)=>e+t))*2,r=this.coords.slice(0,t);return e?(e.set(r),new i(this.lengths,e)):new i(Array.from(this.lengths),Array.from(r))}}},60729:(e,t,r)=>{r.d(t,{B2:()=>x,BW:()=>G,Ch:()=>ei,DF:()=>B,Di:()=>$,E2:()=>L,IE:()=>b,Nl:()=>et,Q4:()=>es,Rk:()=>el,Ux:()=>U,Ye:()=>Z,ZF:()=>J,eU:()=>D,eY:()=>K,hK:()=>eo,jH:()=>ee,jQ:()=>en,kz:()=>er,oN:()=>z,q3:()=>W,qK:()=>C,qN:()=>q,z5:()=>X,zv:()=>V});var n=r(32391),i=r(61939),s=r(40941),l=r(42845),o=r(84766),a=r(31789),u=r(82795),d=r(54805),h=r(56599);function c(e,t){return e?t?4:3:t?3:2}let f=()=>i.A.getLogger("esri.layers.graphics.featureConversionUtils"),m={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryMultiPatch:3,esriGeometryEnvelope:0},p=(e,t,r,n,i,s)=>{e[r]=i,e[r+1]=s},y=(e,t,r,n,i,s)=>{e[r]=i,e[r+1]=s,e[r+2]=t[n+2]},g=(e,t,r,n,i,s)=>{e[r]=i,e[r+1]=s,e[r+2]=t[n+3]},I=(e,t,r,n,i,s)=>{e[r]=i,e[r+1]=s,e[r+2]=t[n+2],e[r+3]=t[n+3]};function _(e,t,r,n){if(e){if(r)return t&&n?I:y;if(t&&n)return g}else if(t&&n)return y;return p}function b({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function x({scale:e,translate:t},r){return Math.round((t[1]-r)/e[1])}function M({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function F({scale:e,translate:t},r){return Math.round((r-t[1])/e[1])}function T({scale:e,translate:t},r,n){return r*e[n]+t[n]}function B(e,t,r){return e?t?r?S(e):v(e):r?E(e):w(e):null}function w(e){let t=e.coords;return{x:t[0],y:t[1]}}function N(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function v(e){let t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function A(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function E(e){let t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function R(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function S(e){let t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function j(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function Y(e,t){return e&&t?j:e?A:t?R:N}function q(e,t,r=Y(null!=t.z,null!=t.m)){return r(e,t)}function C(e,t,r){if(null==e)return null;let n=c(t,r),i=[];for(let t=0;t<e.coords.length;t+=n){let r=[];for(let i=0;i<n;i++)r.push(e.coords[t+i]);i.push(r)}return t?r?{points:i,hasZ:t,hasM:r}:{points:i,hasZ:t}:r?{points:i,hasM:r}:{points:i}}function O(e,t,r=c(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;let n=e.coords,i=0;for(let e of t.points)for(let t=0;t<r;t++)n[i++]=e[t];return e}function G(e,t,r){if(!e)return null;let n=c(t,r),{coords:i,lengths:s}=e,l=[],o=0;for(let e of s){let t=[];for(let r=0;r<e;r++){let e=[];for(let t=0;t<n;t++)e.push(i[o++]);t.push(e)}l.push(t)}return t?r?{paths:l,hasZ:t,hasM:r}:{paths:l,hasZ:t}:r?{paths:l,hasM:r}:{paths:l}}function P(e,t,r=c(t.hasZ,t.hasM)){let{lengths:n,coords:i}=e,s=0;for(let e of t.paths){for(let t of e)for(let e=0;e<r;e++)i[s++]=t[e];n.push(e.length)}return e}function X(e,t,r){if(!e)return null;let n=c(t,r),{coords:i,lengths:s}=e,l=[],o=0;for(let e of s){let t=[];for(let r=0;r<e;r++){let e=[];for(let t=0;t<n;t++)e.push(i[o++]);t.push(e)}l.push(t)}return t?r?{rings:l,hasZ:t,hasM:r}:{rings:l,hasZ:t}:r?{rings:l,hasM:r}:{rings:l}}function Z(e,t,r=t.hasZ,n=t.hasM){return D(e,t.rings,r,n)}function D(e,t,r,n){let i=c(r,n),{lengths:s,coords:l}=e,o=0;for(let r of(ea(e),t)){for(let e of r)for(let t=0;t<i;t++)l[o++]=e[t];s.push(r.length)}return e}let k=[],Q=[];function L(e,t,r,n,i){k[0]=e;let[s]=$(Q,k,t,r,n,i);return eu(k),eu(Q),s}function $(e,t,r,i,s,l){if(eu(e),!r){for(let r of t){let t=l?r.attributes[l]:void 0;e.push(new u.Om(null,r.attributes,null,t))}return e}switch(r){case"esriGeometryPoint":let o=Y(i,s);for(let{geometry:r,attributes:n}of t){let t=null!=r?o(new h.A,r):null;e.push(new u.Om(t,n,null,l?n[l]:void 0))}break;case"esriGeometryMultipoint":let a=c(i,s);for(let{geometry:r,attributes:n}of t){let t=null!=r?O(new h.A,r,a):null;e.push(new u.Om(t,n,null,l?n[l]:void 0))}break;case"esriGeometryPolyline":let d=c(i,s);for(let{geometry:r,attributes:n,centroid:i}of t){let t=null!=r?P(new h.A,r,d):null,s=null!=i?q(new h.A,i):null;e.push(new u.Om(t,n,s,l?n[l]:void 0))}break;case"esriGeometryPolygon":case"esriGeometryMultiPatch":for(let{geometry:r,centroid:n,attributes:o}of t){let t=null!=r?Z(new h.A,r,i,s):null,a=l?o[l]:void 0;null!=n?e.push(new u.Om(t,o,N(new h.A,n),a)):e.push(new u.Om(t,o,null,a))}break;default:f().error("convertToFeatureSet:unknown-geometry",new n.A(`Unable to parse unknown geometry type '${r}'`)),eu(e)}return e}function z(e,t,r,n){Q[0]=e,H(k,Q,t,r,n);let i=k[0];return eu(k),eu(Q),i}function U(e,t,r){if(null==e)return null;let i=new h.A;return("hasZ"in e&&null==t&&(t=e.hasZ),"hasM"in e&&null==r&&(r=e.hasM),(0,a.fT)(e))?Y(null!=t?t:null!=e.z,null!=r?r:null!=e.m)(i,e):(0,a.Bi)(e)?Z(i,e,t,r):(0,a.Rg)(e)?P(i,e,c(t,r)):(0,a.U9)(e)?O(i,e,c(t,r)):void f().error("convertFromGeometry:unknown-geometry",new n.A(`Unable to parse unknown geometry type '${e}'`))}function V(e,t,r,i){let s=e&&("coords"in e?e:e.geometry);if(null==s)return null;switch(t){case"esriGeometryPoint":{let e=w;return r&&i?e=S:r?e=v:i&&(e=E),e(s)}case"esriGeometryMultipoint":return C(s,r,i);case"esriGeometryPolyline":return G(s,r,i);case"esriGeometryPolygon":return X(s,r,i);default:return f().error("convertToGeometry:unknown-geometry",new n.A(`Unable to parse unknown geometry type '${t}'`)),null}}function H(e,t,r,i,s){if(eu(e),null==r){for(let r of t)e.push({attributes:r.attributes});return e}switch(r){case"esriGeometryPoint":let l=w;for(let r of(i&&s?l=S:i?l=v:s&&(l=E),t)){let{geometry:t,attributes:n}=r,i=null!=t?l(t):null;e.push({attributes:n,geometry:i})}break;case"esriGeometryMultipoint":for(let{geometry:r,attributes:n}of t)e.push({attributes:n,geometry:null!=r?C(r,i,s):null});break;case"esriGeometryPolyline":for(let{geometry:r,attributes:n}of t)e.push({attributes:n,geometry:null!=r?G(r,i,s):null});break;case"esriGeometryPolygon":for(let{geometry:r,attributes:n,centroid:l}of t){let t=null!=r?X(r,i,s):null;if(null!=l){let r=w(l);e.push({attributes:n,centroid:r,geometry:t})}else e.push({attributes:n,geometry:t})}break;default:f().error("convertToFeatureSet:unknown-geometry",new n.A(`Unable to parse unknown geometry type '${r}'`))}return e}function J(e){let{objectIdFieldName:t,spatialReference:r,transform:n,fields:i,hasM:s,hasZ:l,features:o,geometryType:a,exceededTransferLimit:u,uniqueIdField:d,queryGeometry:h,queryGeometryType:c}=e,f={features:H([],o,a,l,s),fields:i,geometryType:a,objectIdFieldName:t,spatialReference:r,uniqueIdField:d,queryGeometry:V(h,c,!1,!1)};return n&&(f.transform=n),u&&(f.exceededTransferLimit=u),s&&(f.hasM=s),l&&(f.hasZ=l),f}function W(e,t){let r=new d.A,{hasM:i,hasZ:s,features:l,objectIdFieldName:o,spatialReference:a,geometryType:u,exceededTransferLimit:h,transform:c,fields:m}=e;return m&&(r.fields=m),r.geometryType=u??null,r.objectIdFieldName=o??t??null,r.spatialReference=a??null,r.objectIdFieldName?(l&&$(r.features,l,u,s,i,r.objectIdFieldName),h&&(r.exceededTransferLimit=h),i&&(r.hasM=i),s&&(r.hasZ=s),c&&(r.transform=c)):f().error(new n.A("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),r}function K(e){let{transform:t,features:r,hasM:n,hasZ:i}=e;if(!t)return e;for(let e of r)null!=e.geometry&&ei(e.geometry,e.geometry,n,i,t),null!=e.centroid&&ei(e.centroid,e.centroid,n,i,t);return e.transform=null,e}function ee(e,t){let{geometryType:r,features:n,hasM:i,hasZ:s}=t;if(!e)return t;for(let t=0;t<n.length;t++){let l=n[t],o=l.weakClone();o.geometry=new h.A,et(o.geometry,l.geometry,i,s,r,e),l.centroid&&(o.centroid=new h.A,et(o.centroid,l.centroid,i,s,"esriGeometryPoint",e)),n[t]=o}return t.transform=e,t}function et(e,t,r,n,i,s,l=r,o=n){if(ea(e),!t?.coords.length)return null;let a=m[i],{coords:u,lengths:d}=t,h=c(r,n),f=c(r&&l,n&&o),p=_(r,n,l,o);if(!d.length)return p(e.coords,u,0,0,b(s,u[0]),x(s,u[1])),ea(e,h,0),e;let y,g,I,M,F=0,T=0,B=0;for(let t of d){if(t<a)continue;let r=0;T=B,I=y=b(s,u[F]),M=g=x(s,u[F+1]),p(e.coords,u,T,F,I,M),r++,F+=h,T+=f;for(let n=1;n<t;n++,F+=h)I=b(s,u[F]),M=x(s,u[F+1]),I===y&&M===g||(p(e.coords,u,T,F,I-y,M-g),T+=f,r++,y=I,g=M);r>=a&&(e.lengths.push(r),B=T)}return eu(e.coords,B),e.coords.length?e:null}function er(e,t,r,n,i,s,l=r,o=n){if(ea(e),!t?.coords.length)return null;let a=m[i],{coords:u,lengths:d}=t,h=c(r,n),f=c(r&&l,n&&o),p=_(r,n,l,o);if(!d.length)return p(e.coords,u,0,0,u[0],u[1]),ea(e,h,0),e;let y=0,g=s*s;for(let t of d){if(t<a){y+=t*h;continue}let r=e.coords.length/f,n=y,i=y+(t-1)*h;p(e.coords,u,e.coords.length,n,u[n],u[n+1]),function e(t,r,n,i,s,l,o){let a,u=i,d=0;for(let e=l+n;e<o;e+=n)(a=function(e,t,r,n){let i=e[t],s=e[t+1],l=e[r],o=e[r+1],a=e[n],u=e[n+1],d=l,h=o,c=a-d,f=u-h;if(0!==c||0!==f){let e=((i-d)*c+(s-h)*f)/(c*c+f*f);e>1?(d=a,h=u):e>0&&(d+=c*e,h+=f*e)}return(c=i-d)*c+(f=s-h)*f}(r,e,l,o))>u&&(d=e,u=a);u>i&&(d-l>n&&e(t,r,n,i,s,l,d),s(t,r,t.length,d,r[d],r[d+1]),o-d>n&&e(t,r,n,i,s,d,o))}(e.coords,u,h,g,p,n,i),p(e.coords,u,e.coords.length,i,u[i],u[i+1]);let s=e.coords.length/f-r;s>=a?e.lengths.push(s):eu(e.coords,r*f),y+=t*h}return e.coords.length?e:null}function en(e,t,r,n){if(!t?.coords?.length)return null;let i=c(r,n),s=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,d=Number.NEGATIVE_INFINITY;if(t&&t.coords){let e=t.coords;for(let t=0;t<e.length;t+=i){let r=e[t],n=e[t+1];s=Math.min(s,r),u=Math.max(u,r),a=Math.min(a,n),d=Math.max(d,n)}}return(0,l.is)(e)?(0,l.BI)(e,s,a,u,d):(0,o.fA)(s,a,u,d,e),e}function ei(e,t,r,n,i){let{coords:l,lengths:o}=t,a=c(r,n);if(!l.length)return e!==t&&ea(e),e;(0,s.Lw)(i);let{originPosition:u,scale:d,translate:h}=i;ed.originPosition=u;let f=ed.scale;f[0]=d[0]??1,f[1]=-(d[1]??1),f[2]=d[2]??1,f[3]=d[3]??1;let m=ed.translate;if(m[0]=h[0]??0,m[1]=h[1]??0,m[2]=h[2]??0,m[3]=h[3]??0,!o.length){for(let t=0;t<a;++t)e.coords[t]=function({scale:e,translate:t},r,n){return r*e[n]+t[n]}(ed,l[t],t);return e!==t&&ea(e,a,0),e}let p=0;for(let t=0;t<o.length;t++){let r=o[t];e.lengths[t]=r;for(let t=0;t<a;++t)e.coords[p+t]=function({scale:e,translate:t},r,n){return r*e[n]+t[n]}(ed,l[p+t],t);let n=e.coords[p],i=e.coords[p+1];p+=a;for(let t=1;t<r;t++,p+=a){n+=l[p]*f[0],i+=l[p+1]*f[1],e.coords[p]=n,e.coords[p+1]=i;for(let t=2;t<a;++t)e.coords[p+t]=function({scale:e,translate:t},r,n){return r*e[n]+t[n]}(ed,l[p+t],t)}}return e!==t&&ea(e,l.length,o.length),e}function es(e,t,r,n,i,s){if(ea(e),e.lengths.push(...t.lengths),r===i&&n===s)for(let r=0;r<t.coords.length;r++)e.coords.push(t.coords[r]);else{let l=c(r,n),o=_(r,n,i,s),a=t.coords;for(let t=0;t<a.length;t+=l)o(e.coords,a,e.coords.length,t,a[t],a[t+1])}return e}function el(e,t){let{coords:r,lengths:n}=e,i=0,s=0;for(let e=0;e<n.length;e++){let l=n[e];s+=function(e,t,r,n){let i=0,s=e[n*t],l=e[n*(t+1)];for(let o=1;o<r;o++){let r=s+e[n*(t+o)],a=l+e[n*(t+o)+1],u=(r-s)*(a+l);s=r,l=a,i+=u}return .5*i}(r,i,l,t),i+=l}return Math.abs(s)}function eo(e,t,r,n,i){let s=c(n,i);if(!e.lengths.length){if(e.coords.length<2)return null;let[r,n]=e.coords,i=M(t,r),s=F(t,n);return new h.A([],[i,s])}let l=new h.A([],[0,0]),o=m[r],a="esriGeometryPolygon"===r||"esriGeometryPolyline"===r,u=0,d=0;for(let r=0;r<e.lengths.length;r++){let n=e.lengths[r],i=d,h=M(t,e.coords[s*u]),c=F(t,e.coords[s*u+1]);l.coords[d++]=h,l.coords[d++]=c;let m=0,y=0,g=1;for(let r=1;r<n;r++){let n=M(t,e.coords[s*(r+u)]),i=F(t,e.coords[s*(r+u)+1]);if(n!==h||i!==c){var f,p;let e=n-h,t=i-c;a&&0==(f=m)*t-e*(p=y)&&f*e+p*t>0?(l.coords[d-2]+=e,l.coords[d-1]+=t,h+=e,c+=t):(l.coords[d++]=n,l.coords[d++]=i,h=n,c=i,m=e,y=t,g+=1)}}g<o?d=i:l.lengths.push(g),u+=n}return 0===l.lengths.length?null:l}function ea(e,t=0,r=0){eu(e.lengths,r),eu(e.coords,t)}function eu(e,t=0){e.length!==t&&(e.length=t)}let ed={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]}},67039:(e,t,r)=>{function n(e){return null!=o(e)||null!=l(e)}function i(e){return a.test(e)}function s(e){return o(e)??l(e)}function l(e){let t=new Date(e);return!function(e,t){if(Number.isNaN(e.getTime()))return!1;let r=!0;if(d&&/\d+\W*$/.test(t)){let e=t.match(/[a-zA-Z]{2,}/);if(e){let t=!1,n=0;for(;!t&&n<=e.length;)t=!u.test(e[n]),n++;r=!t}}return r}(t,e)?null:Number.isNaN(t.getTime())?null:t.getTime()-6e4*t.getTimezoneOffset()}function o(e){let t,r=a.exec(e);if(!r?.groups)return null;let n=r.groups,i=+n.year,s=n.month-1,l=+n.day,o=+(n.hours??"0"),u=+(n.minutes??"0"),d=+(n.seconds??"0");if(o>23||u>59||d>59)return null;let h=n.ms??"0",c=h?+h.padEnd(3,"0").slice(0,3):0;if(n.isUTC||!n.offsetSign)t=Date.UTC(i,s,l,o,u,d,c);else{let e=+n.offsetHours,r=+n.offsetMinutes;t=6e4*("+"===n.offsetSign?-1:1)*(60*e+r)+Date.UTC(i,s,l,o,u,d,c)}return Number.isNaN(t)?null:t}r.d(t,{Br:()=>i,Cq:()=>n,_U:()=>s});let a=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/,u=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,d=!Number.isNaN(new Date("technology 10").getTime())},68093:(e,t,r)=>{r.r(t),r.d(t,{default:()=>x});var n=r(32391),i=r(31789),s=r(71760),l=r(60729),o=r(89837),a=r(86925),u=r(11064),d=r(76461),h=r(41359),c=r(17135),f=r(43253),m=r(47823),p=r(73368),y=r(39265),g=r(93682);let I=s.KK,_={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:s.KK},b={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsQueryAttachmentOrderByFields:!1,supportsQueryBins:!0,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!0,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0,supportsQueryWithCacheHint:!0},queryBinsCapabilities:f.PC};class x{constructor(){this._queryEngine=null,this._nextObjectId=null}destroy(){this._queryEngine?.destroy(),this._queryEngine=this._createDefaultAttributes=null}async load(e){let t=[],{features:r}=e,i=this._inferLayerProperties(r,e.fields),s=e.fields||[],l=null!=e.hasM?e.hasM:!!i.hasM,a=null!=e.hasZ?e.hasZ:!!i.hasZ,f=!e.spatialReference&&!i.spatialReference,x=f?I:e.spatialReference||i.spatialReference,M=e.geometryType||i.geometryType,F=!M,T=e.objectIdField||i.objectIdField,B=e.timeInfo,w=new m.A(s);if(!F&&(f&&t.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),!M))throw new n.A("feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");if(!T)throw new n.A("feature-layer:missing-property","objectIdField not set and couldn't be found in the provided fields");if(i.objectIdField&&T!==i.objectIdField&&(t.push({name:"feature-layer:duplicated-oid-field",message:`Provided objectIdField "${T}" doesn't match the field name "${i.objectIdField}", found in the provided fields`}),T=i.objectIdField),T&&!i.objectIdField){let e=w.get(T);e?(T=e.name,e.type="esriFieldTypeOID",e.editable=!1,e.nullable=!1):s.unshift({alias:T,name:T,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(let e of s){if(null==e.name&&(e.name=e.alias),null==e.alias&&(e.alias=e.name),!e.name)throw new n.A("feature-layer:invalid-field-name","field name is missing",{field:e});if(e.name===T&&(e.type="esriFieldTypeOID"),!p.m.jsonValues.includes(e.type))throw new n.A("feature-layer:invalid-field-type",`invalid type for field "${e.name}"`,{field:e});null==e.length&&(e.length=(0,y._b)(e))}let N={};for(let e of s)if("esriFieldTypeOID"!==e.type&&"esriFieldTypeGlobalID"!==e.type){let t=(0,y.lD)(e);void 0!==t&&(N[e.name]=t)}if(B){if(B.startTimeField){let e=w.get(B.startTimeField);e?(B.startTimeField=e.name,e.type="esriFieldTypeDate"):B.startTimeField=null}if(B.endTimeField){let e=w.get(B.endTimeField);e?(B.endTimeField=e.name,e.type="esriFieldTypeDate"):B.endTimeField=null}if(B.trackIdField){let e=w.get(B.trackIdField);e?B.trackIdField=e.name:(B.trackIdField=null,t.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:B}}))}B.startTimeField||B.endTimeField||(t.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",details:{timeInfo:B}}),B=null)}let v=w.dateFields.length?{timeZoneIANA:e.dateFieldsTimeZone??g.n$}:null;this._createDefaultAttributes=(0,c.Vx)(N,T);let A={warnings:t,featureErrors:[],layerDefinition:{...b,drawingInfo:(0,c.F0)(M),templates:(0,c.e2)(N),extent:f?_:null,geometryType:M,objectIdField:T,fields:s,hasZ:a,hasM:l,timeInfo:B,dateFieldsTimeReference:v},assignedObjectIds:{}};if(this._queryEngine=new h.do({fieldsIndex:m.A.fromLayerJSON({fields:s,timeInfo:B,dateFieldsTimeReference:v}),geometryType:M,hasM:l,hasZ:a,objectIdField:T,spatialReference:x,featureStore:new u.A({geometryType:M,hasM:l,hasZ:a}),timeInfo:B}),!r?.length)return this._nextObjectId=o.L,A;let E=(0,o.H)(T,r);return this._nextObjectId=E+1,await (0,d.Nk)(r,x),this._loadInitialFeatures(A,r)}async applyEdits(e){let{spatialReference:t,geometryType:r}=this._queryEngine;return await Promise.all([(0,f.$1)(t,r),(0,d.Nk)(e.adds,t),(0,d.Nk)(e.updates,t)]),this._applyEdits(e)}queryFeatures(e,t={}){return this._queryEngine.executeQuery(e,t.signal)}queryFeatureCount(e,t={}){return this._queryEngine.executeQueryForCount(e,t.signal)}queryObjectIds(e,t={}){return this._queryEngine.executeQueryForIds(e,t.signal)}queryExtent(e,t={}){return this._queryEngine.executeQueryForExtent(e,t.signal)}querySnapping(e,t={}){return(0,a.J)(this._queryEngine,e,t.signal)}queryAttributeBins(e,t={}){return this._queryEngine.executeAttributeBinsQuery(e,t.signal)}_inferLayerProperties(e,t){let r,n,s=null,l=null,o=null;for(let t of e){let e=t.geometry;if(null!=e&&(s||(s=(0,i.$B)(e)),l||(l=e.spatialReference),null==r&&(r=(0,i.fT)(e)?null!=e.z:!!e.hasZ),null==n&&(n=(0,i.fT)(e)?null!=e.m:!!e.hasM),s&&l&&null!=r&&null!=n))break}if(t&&t.length){let e=null;t.some(t=>{let r="esriFieldTypeOID"===t.type,n=!t.type&&t.name&&"objectid"===t.name.toLowerCase();return e=t,r||n})&&(o=e.name)}return{geometryType:s,spatialReference:l,objectIdField:o,hasM:n,hasZ:r}}async _loadInitialFeatures(e,t){let{geometryType:r,hasM:n,hasZ:s,objectIdField:o,spatialReference:a,featureStore:u,fieldsIndex:h}=this._queryEngine,c=[];for(let n of t){if(null!=n.uid&&(e.assignedObjectIds[n.uid]=-1),n.geometry&&r!==(0,i.$B)(n.geometry)){e.featureErrors.push((0,f.Yx)("Incorrect geometry type."));continue}let t=this._createDefaultAttributes(),s=(0,f.MB)(h,t,n.attributes,!0);s?e.featureErrors.push(s):(this._assignObjectId(t,n.attributes,!0),n.attributes=t,null!=n.uid&&(e.assignedObjectIds[n.uid]=n.attributes[o]),null!=n.geometry&&(n.geometry=(0,d.Cv)(n.geometry,n.geometry.spatialReference,a)),c.push(n))}u.addMany((0,l.Di)([],c,r,s,n,o));let{fullExtent:m,timeExtent:p}=await this._queryEngine.fetchRecomputedExtents();if(e.layerDefinition.extent=m,p){let{start:t,end:r}=p;e.layerDefinition.timeInfo.timeExtent=[t,r]}return e}async _applyEdits(e){let{adds:t,updates:r,deletes:n}=e,i={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t?.length&&this._applyAddEdits(i,t),r?.length&&this._applyUpdateEdits(i,r),n?.length){for(let e of n)i.deleteResults.push((0,f.bP)(e));this._queryEngine.featureStore.removeManyById(n)}let{fullExtent:s,timeExtent:l}=await this._queryEngine.fetchRecomputedExtents();return{extent:s,timeExtent:l,featureEditResults:i}}_applyAddEdits(e,t){let{addResults:r}=e,{geometryType:n,hasM:s,hasZ:o,objectIdField:a,spatialReference:u,featureStore:h,fieldsIndex:c}=this._queryEngine,m=[];for(let s of t){if(s.geometry&&n!==(0,i.$B)(s.geometry)){r.push((0,f.Yx)("Incorrect geometry type."));continue}let t=this._createDefaultAttributes(),l=(0,f.MB)(c,t,s.attributes);if(l)r.push(l);else{if(this._assignObjectId(t,s.attributes),s.attributes=t,null!=s.uid){let t=s.attributes[a];e.uidToObjectId[s.uid]=t}if(null!=s.geometry){let e=s.geometry.spatialReference??u;s.geometry=(0,d.Cv)((0,f.CR)(s.geometry,e),e,u)}m.push(s),r.push((0,f.bP)(s.attributes[a]))}}h.addMany((0,l.Di)([],m,n,o,s,a))}_applyUpdateEdits({updateResults:e},t){let{geometryType:r,hasM:n,hasZ:s,objectIdField:o,spatialReference:a,featureStore:u,fieldsIndex:h}=this._queryEngine;for(let c of t){let{attributes:t,geometry:m}=c,p=t?.[o];if(null==p){e.push((0,f.Yx)(`Identifier field ${o} missing`));continue}if(!u.has(p)){e.push((0,f.Yx)(`Feature with object id ${p} missing`));continue}let y=(0,l.oN)(u.getFeature(p),r,s,n);if(null!=m){if(r!==(0,i.$B)(m)){e.push((0,f.Yx)("Incorrect geometry type."));continue}let t=m.spatialReference??a;y.geometry=(0,d.Cv)((0,f.CR)(m,t),t,a)}if(t){let r=(0,f.MB)(h,y.attributes,t);if(r){e.push(r);continue}}u.add((0,l.E2)(y,r,s,n,o)),e.push((0,f.bP)(p))}}_assignObjectId(e,t,r=!1){let n=this._queryEngine.objectIdField;r&&t&&isFinite(t[n])?e[n]=t[n]:e[n]=this._nextObjectId++}}},82795:(e,t,r)=>{r.d(t,{N3:()=>o,Om:()=>l});var n=r(94264),i=r(11506),s=r(56599);class l{constructor(e=null,t={},r,n,i=0){this.geometry=e,this.attributes=t,this.centroid=r,this.objectId=n,this.displayId=i}static fromJSON(e){let t=e.geometry?s.A.fromJSON(e.geometry):null,r=e.centroid?s.A.fromJSON(e.centroid):null,n=e.objectId;return new l(t,e.attributes,r,n)}weakClone(){let e=new l(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e}clone(){let e=new l(this.geometry?.clone(),{...this.attributes},this.centroid?.clone(),this.objectId);return e.displayId=this.displayId,e}ensureCentroid(e){return this.centroid??=(0,i.Q)(new s.A,this.geometry,e.hasZ,e.hasM),this.centroid}get usedMemory(){return 128+(0,n.lM)(this.attributes)+(this.geometry?.usedMemory??0)}}function o(e){return!!e.geometry?.coords?.length}},86925:(e,t,r)=>{r.d(t,{J:()=>m});var n=r(33715),i=r(92753),s=r(31789),l=r(25606),o=r(71760),a=r(76461),u=r(41359),d=r(90804),h=r(91738),c=r(6515),f=r(40513);async function m(e,t,r){let f=(0,i.Mq)(r),{point:m,distance:y,returnEdge:g,vertexMode:I}=t;if(!g&&"none"===I)return{candidates:[]};let _=(0,n.o8)(t.query);_=await e.schedule(()=>(0,h.T2)(_,e.definitionExpression,e.spatialReference),f),_=await e.reschedule(()=>(0,c.B4)(_,{availableFields:e.availableFields,fieldsIndex:e.fieldsIndex,geometryType:e.geometryType,spatialReference:e.spatialReference}),f);let b=!(0,o.aI)(m.spatialReference,e.spatialReference);b&&await (0,a.Nk)(m.spatialReference,e.spatialReference);let x="number"==typeof y?y:y.x,M="number"==typeof y?y:y.y,F={xmin:m.x-x,xmax:m.x+x,ymin:m.y-M,ymax:m.y+M,spatialReference:m.spatialReference},T=b?(0,a.Cv)(F,e.spatialReference):F;if(!T)return{candidates:[]};let B=(await (0,l.el)((0,s.rS)(m),null,{signal:f}))[0],w=(await (0,l.el)((0,s.rS)(T),null,{signal:f}))[0];if(null==B||null==w)return{candidates:[]};let N=new d.G(await e.reschedule(()=>e.searchFeatures((0,u.ux)(w.toJSON())),f),_,e);await e.reschedule(()=>e.executeObjectIdsQuery(N),f),await e.reschedule(()=>e.executeTimeQuery(N),f),await e.reschedule(()=>e.executeAttributesQuery(N),f),await e.reschedule(()=>p(e,N,f),f);let v=B.toJSON(),A=b?(0,a.Cv)(v,e.spatialReference):v,E=b?Math.max(T.xmax-T.xmin,T.ymax-T.ymin)/2:y;return N.createSnappingResponse({...t,point:A,distance:E},m.spatialReference)}async function p(e,t,r){let{query:n}=t,{spatialRel:i}=n;if(!t?.items?.length||!n.geometry||!i)return;let s=await (0,f.xt)(i,n.geometry,e.geometryType,e.hasZ,e.hasM),l=await e.runSpatialFilter(t.items,e=>s(e.geometry),r);t.items=l}},89837:(e,t,r)=>{r.d(t,{H:()=>i,L:()=>n});let n=1;function i(e,t){let r=0;for(let n of t){let t=n.attributes?.[e];"number"==typeof t&&isFinite(t)&&(r=Math.max(r,t))}return r}},94264:(e,t,r)=>{r.d(t,{Qf:()=>a,Qh:()=>l,RS:()=>i,ez:()=>d,i5:()=>h,lM:()=>s,qK:()=>u});var n=r(48678);let i=16;function s(e){if(!e)return 0;let t=u;for(let r in e)e.hasOwnProperty(r)&&(t+=o(e[r],!1));return t}function l(e){if(!e)return 0;if("number"==typeof e[0])return a(e);if(Array.isArray(e)){var t=e;let r=t.length;if(0===r||"number"==typeof t[0])return function(e,t){return d+e.length*t}(t,8);let n=d;for(let e=0;e<r;e++)n+=o(t[e]);return n}let r=u;for(let t in e)e.hasOwnProperty(t)&&(r+=o(e[t]));return r}function o(e,t=!0){switch(typeof e){case"object":return t?l(e):u;case"string":return 32+e.length;case"number":return i;case"boolean":return 4;default:return 8}}function a(...e){return e.reduce((e,t)=>{var r,s;return e+(t?(0,n.iu)(t)?t.byteLength+h:Array.isArray(t)?(r=t,s=i,d+r.length*s):0:0)},0)}let u=32,d=16,h=145}}]);