"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2966],{12966:(e,t,r)=>{r.r(t),r.d(t,{fromGeometries:()=>O,fromGeometry:()=>I,fromGeometryToGXGeometry:()=>E,getSpatialReference:()=>j,toGeometry:()=>P});var n=r(16404),i=r(92656),s=r(40224),a=r(31632),o=r(32045);function l(){if(-1===this.m_i)return this.m_i=0,{value:{m_token:1,m_value:null},done:!1};if(this.m_i<this.m_keys.length){let e=this.m_bReturnKey,t=Math.trunc(this.m_i);return this.m_bReturnKey=!this.m_bReturnKey,this.m_i+=.5,e?{value:{m_token:5,m_value:this.m_keys[t]},done:!1}:{value:{m_token:6,m_value:this.m_o[this.m_keys[t]]},done:!1}}return{value:{m_token:3,m_value:null},done:!0}}function u(){if(-1===this.m_i)return this.m_i=0,{value:{m_token:2,m_value:null},done:!1};if(this.m_i<this.m_a.length){let e={value:{m_token:6,m_value:this.m_a[this.m_i++]},done:!1};return this.m_strict||void 0===e.value.m_value&&(e.value.m_value=Number.NaN),e}return{value:{m_token:4,m_value:null},done:!0}}r(14136);class m{createJSONObjectIterator(e){return{m_iteratorType:"object",m_o:e,m_keys:this.m_options.strict?Object.keys(e):Object.keys(e).filter(t=>void 0!==e[t]),m_i:-1,m_bReturnKey:!0,next:l}}createJSONArrayIterator(e){return{m_iteratorType:"array",m_strict:this.m_options.strict,m_i:-1,m_a:e,next:u}}constructor(e,t){this.m_currentToken=0,this.m_options=t?{...t}:{strict:!0},this.m_iteratorStack=[e instanceof Array?this.createJSONArrayIterator(e):this.createJSONObjectIterator(e)],this.m_nextFlatToken={m_value:null,m_token:0}}nextToken(){if(0===this.m_iteratorStack.length)return this.m_currentToken=0;switch(this.m_nextFlatToken=this.m_iteratorStack.at(-1).next().value,this.m_currentValue=void 0,this.m_nextFlatToken.m_token){case 1:return this.m_currentToken=1;case 3:return this.m_iteratorStack.pop(),this.m_currentToken=3;case 2:return this.m_currentToken=2;case 4:return this.m_iteratorStack.pop(),this.m_currentToken=4;case 5:return this.m_currentValue=this.m_nextFlatToken.m_value,this.m_currentToken=5;case 6:if(this.m_nextFlatToken.m_value instanceof Array)return this.m_iteratorStack.push(this.createJSONArrayIterator(this.m_nextFlatToken.m_value)),this.nextToken();if(this.m_nextFlatToken.m_value instanceof Object)return this.m_iteratorStack.push(this.createJSONObjectIterator(this.m_nextFlatToken.m_value)),this.nextToken();if("number"==typeof this.m_nextFlatToken.m_value)return this.m_currentValue=this.m_nextFlatToken.m_value,Number.isSafeInteger(this.m_currentValue)&&this.m_currentValue>=(0,i.ao)()&&this.m_currentValue<=(0,i.i)()?this.m_currentToken=8:this.m_currentToken=7;if("string"==typeof this.m_nextFlatToken.m_value)return this.m_currentValue=this.m_nextFlatToken.m_value,this.m_currentToken=6;if("boolean"==typeof this.m_nextFlatToken.m_value)return this.m_currentValue=this.m_nextFlatToken.m_value,this.m_currentToken=this.m_nextFlatToken.m_value?11:12;if("object"==typeof this.m_nextFlatToken.m_value)return this.m_currentValue=null,this.m_currentToken=10;(0,n.c)("unrecognized json element type")}return(0,n.c)("unrecognized json element type"),0}currentToken(){return this.m_currentToken}skipChildren(){if(0!==this.m_iteratorStack.length)switch(this.m_currentValue=void 0,this.m_nextFlatToken.m_token){case 1:return this.m_iteratorStack.pop(),this.m_nextFlatToken.m_token=3,void(this.m_currentToken=3);case 2:return this.m_iteratorStack.pop(),this.m_nextFlatToken.m_token=4,void(this.m_currentToken=4)}}currentString(){return 6!==this.m_currentToken&&5!==this.m_currentToken&&(0,n.t)("invalid token"),this.m_currentValue}currentDoubleValue(){return 7!==this.m_currentToken&&8!==this.m_currentToken&&(0,n.t)("invalid token"),this.m_currentValue}currentInt32Value(){return 8!==this.m_currentToken&&(0,n.t)("invalid token"),this.m_currentValue}currentInt64Value(){return(0,n.g)(0),0n}currentBoolValue(){return 12!==this.m_currentToken&&11!==this.m_currentToken&&(0,n.t)("invalid token"),this.m_currentValue}isError(){return 0}}class d{constructor(){this.m_pendingKey=null,this.m_acceptedObject=null,this.m_currentObject=[]}reset(){this.m_pendingKey=null,this.m_acceptedObject=null,this.m_currentObject.length=0}startObject(){let e={};this.m_pendingKey?(this.m_currentObject.at(-1)[this.m_pendingKey]=e,this.m_pendingKey=null):Array.isArray(this.m_currentObject.at(-1))&&this.m_currentObject.at(-1).push(e),this.m_currentObject.push(e)}startArray(){let e=[];this.m_pendingKey?(this.m_currentObject.at(-1)[this.m_pendingKey]=e,this.m_pendingKey=null):Array.isArray(this.m_currentObject.at(-1))&&this.m_currentObject.at(-1).push(e),this.m_currentObject.push(e)}endObject(){this.m_acceptedObject=this.m_currentObject.at(-1),this.m_currentObject.pop()}endArray(){this.m_currentObject.pop()}addFieldName(e){this.m_pendingKey=e}addValue_(e){this.m_pendingKey?(this.m_currentObject.at(-1)[this.m_pendingKey]=e,this.m_pendingKey=null):this.m_currentObject.at(-1).push(e)}addString(e){this.addValue_(e)}addDouble(e,t){this.addValue_(e)}addInt64(e){(0,n.g)(0)}addInt32(e){this.addValue_(e)}addBool(e){this.addValue_(e)}addNull(){this.addValue_(null)}getObject(){return this.m_acceptedObject}}class _{constructor(e){return this.m_buffer=null,this.m_view=null,this.m_sz=0,this.m_offset=0,this.m_bOwnsBuffer=!0,this.m_bLittleEndian=!0,this.m_element=new ArrayBuffer(8),this.m_elementBytes=new Uint8Array(this.m_element),this.m_elementView=new DataView(this.m_element),this.m_elementDouble=new Float64Array(this.m_element),this.m_elementFloat=new Float32Array(this.m_element),this.m_elementInt64=new BigInt64Array(this.m_element),this.m_elementInt32=new Int32Array(this.m_element),this.m_elementInt16=new Int16Array(this.m_element),void 0!==e.sz?(this.m_sz=e.sz,e.buffer?(this.m_sz<0&&(0,n.n)("size out of range"),this.m_buffer=e.buffer,this.m_offset=void 0!==e.offset?e.offset:0,this.m_view=void 0!==e.offset?new DataView(e.buffer,e.offset,e.sz):new DataView(this.m_buffer),this.m_bOwnsBuffer=!1,void(this.m_bLittleEndian=!0)):(this.m_sz<0&&(0,n.n)("size out of range"),void(this.m_sz>0&&(this.m_buffer=new ArrayBuffer(this.m_sz),this.m_view=new DataView(this.m_buffer))))):e.move?(this.m_sz=e.move.m_sz,this.m_buffer=e.move.m_buffer,this.m_view=e.move.m_view,this.m_bOwnsBuffer=e.move.m_bOwnsBuffer,this.m_bLittleEndian=e.move.m_bLittleEndian,e.move.m_buffer=null,e.move.m_view=null,e.move.m_sz=0,void(e.move.m_bOwnsBuffer=!0)):void(0,n.c)("unrecognized constructor options")}swapBytesDouble(){this.doSwap()&&(this.m_elementDouble[0]=this.m_elementBytes[0]<<56|this.m_elementBytes[1]<<48|this.m_elementBytes[2]<<40|this.m_elementBytes[3]<<32|this.m_elementBytes[4]<<24|this.m_elementBytes[5]<<16|this.m_elementBytes[6]<<8|this.m_elementBytes[7])}swapBytesInt32(){this.doSwap()&&(this.m_elementInt32[0]=this.m_elementBytes[0]<<24|this.m_elementBytes[1]<<16|this.m_elementBytes[2]<<8|this.m_elementBytes[3])}getOffset(){return this.m_offset}assignMove(e){return this===e||(this.clear(),this.m_sz=e.m_sz,this.m_buffer=e.m_buffer,this.m_view=e.m_view,this.m_bOwnsBuffer=e.m_bOwnsBuffer,this.m_bLittleEndian=e.m_bLittleEndian,e.m_buffer=null,e.m_sz=0,e.m_bOwnsBuffer=!0),this}doSwap(){return this.m_bLittleEndian!==(1===_.getNativeByteOrder())}setNativeByteOrder(){this.m_bLittleEndian=1===_.getNativeByteOrder()}setOrder(e){this.m_bLittleEndian=1===e}getOrder(){return+!!this.m_bLittleEndian}getView(){return this.m_view||(0,n.m)("buffer not defined"),this.m_view}static getNativeByteOrder(){return 1}clear(){this.m_buffer=null,this.m_sz=0,this.m_bOwnsBuffer=!0}size(){return this.m_sz}readDouble(e){return this.doSwap()?(this.m_elementDouble[0]=this.m_view.getFloat64(e,this.m_bLittleEndian),this.swapBytesDouble(),this.m_elementDouble[0]):this.m_view.getFloat64(e,this.m_bLittleEndian)}writeDouble(e,t){this.m_elementDouble[0]=t,this.swapBytesDouble(),this.m_view.setFloat64(e,this.m_elementDouble[0],this.m_bLittleEndian)}readInt32(e){return this.doSwap()?(this.m_elementInt32[0]=this.m_view.getInt32(e,this.m_bLittleEndian),this.swapBytesInt32(),this.m_elementInt32[0]):this.m_view.getInt32(e,this.m_bLittleEndian)}writeInt32(e,t){this.m_elementInt32[0]=t,this.swapBytesInt32(),this.m_view.setInt32(e,this.m_elementInt32[0],this.m_bLittleEndian)}getPtr(){return this.m_buffer}setSizeNoRealloc(e){(0,n.g)(e>=0&&e<=this.m_sz),this.m_sz=e}}function c(e,t,r,s){2!==s.currentToken()&&(0,n.t)("failed to parse multipath: array of array of vertices is expected");let l=e?new o.a:new o.P,u=(0,a.z)(0),m=(0,a.F)(2,0),d=(0,a.D)(0),c=null,f=null,y=null,g=null,N=null,T=0,v=0,x=0,S=new o.S,A=i.P.getNAN(),w=0,D=0,F=+!!e;for(;4!==s.nextToken();){2!==s.currentToken()&&(0,n.t)("failed to parse multipath: ring/path array is expected");let r=2,C=0,j=!0,z=0,O=0,I=i.P.getNAN(),E=(0,i.d)(4,Number.NaN),P=(0,i.d)(4,Number.NaN),G=!1;for(s.nextToken();4!==s.currentToken();){if(t&&1===s.currentToken())j&&(0,n.t)("failed to parse multipath: starting vertex array is expected"),y||(y=(0,a.D)(w-1,1),g=(0,a.z)(w-1,-1),N=(0,a.F)(0)),G=!0,r=1,{segFlag:x,toPointSz:z}=function(e,t,r,s,a){let l={segFlag:0,toPointSz:0},u=s.currentToken();s.nextToken();let m=s.currentString(),d=m[0];for((1!==m.length||"a"!==d&&"b"!==d&&"c"!==d&&"n"!==d&&"q"!==d)&&(0,n.t)('failed to parse curve: expecting "a", "b", "n", "q", or "c"'),2!==s.nextToken()&&(0,n.t)("failed to parse curve: start array is expected for curve parameters"),2!==s.nextToken()&&(0,n.t)("failed to parse curve: start array is expected for to point"),l.toPointSz=0;4!==s.nextToken();)4===l.toPointSz&&(0,n.t)("failed to parse curve: vertex array cannot have more than 4 elements"),t[l.toPointSz++]=h(s);l.toPointSz<2&&(0,n.t)("failed to parse curve: vertex array must have at least 2 elements");let c=i.P.construct(t[0],t[1]),f=i.P.getNAN(),p=-1,k=-1,y=!1,g=Number.NaN,N=Number.NaN,T=Number.NaN,v=[i.P.getNAN(),i.P.getNAN(),i.P.getNAN()],x=i.P.getNAN();if("a"===d){2!==s.nextToken()&&(0,n.t)("failed to parse curve: start array is expected for center point"),s.nextToken();let e=h(s);s.nextToken();let t=h(s);4!==s.nextToken()&&(0,n.t)("failed to parse curve: end array is expected for center point"),f.setCoords(e,t),s.nextToken(),p=s.currentInt32Value(),s.nextToken(),k=s.currentInt32Value(),4!==s.nextToken()?(y=!1,g=h(s),s.nextToken(),N=h(s),s.nextToken(),T=h(s),4!==s.nextToken()&&(0,n.t)("failed to parse curve: end array is expected for curve parameters")):y=!0,l.segFlag=4}else if("b"===d){for(let e=0;e<2;e++){2!==s.nextToken()&&(0,n.t)("failed to parse curve: start array is expected for control point"),s.nextToken();let t=h(s);s.nextToken();let r=h(s);4!==s.nextToken()&&(0,n.t)("failed to parse curve: end array is expected for control point"),v[e].setCoords(t,r)}4!==s.nextToken()&&(0,n.t)("failed to parse curve: end array is expected for curve parameters"),l.segFlag=2}else if("n"===d){{2!==s.nextToken()&&(0,n.t)("failed to parse curve: start array is expected for control point"),s.nextToken();let e=h(s);s.nextToken();let t=h(s);4!==s.nextToken()&&(0,n.t)("failed to parse curve: end array is expected for control point"),v[0].setCoords(e,t)}s.nextToken();let e=h(s);s.nextToken();let t=h(s);s.nextToken();let r=h(s);v[1].setCoords(e,t),v[2].setCoords(r,r),4!==s.nextToken()&&(0,n.t)("failed to parse curve: end array is expected for curve parameters"),l.segFlag=8}else if("q"===d){for(let e=0;e<1;e++){2!==s.nextToken()&&(0,n.t)("failed to parse curve: start array is expected for control point"),s.nextToken();let t=h(s);s.nextToken();let r=h(s);4!==s.nextToken()&&(0,n.t)("failed to parse curve: end array is expected for control point"),v[e].setCoords(t,r)}4!==s.nextToken()&&(0,n.t)("failed to parse curve: end array is expected for curve parameters"),l.segFlag=16}else{2!==s.nextToken()&&(0,n.t)("failed to parse curve: start array is expected for interior point"),s.nextToken();let e=h(s);s.nextToken();let t=h(s);4!==s.nextToken()&&(0,n.t)("failed to parse curve: end array is expected for interior point"),x.setCoords(e,t),4!==s.nextToken()&&(0,n.t)("failed to parse curve: end array is expected for curve parameters"),l.segFlag=4}return(3!==s.nextToken()&&(0,n.t)("failed to parse curve: end object is expected for curve"),"a"===d)?(e.createEllipticArc(),y)?b(e.get(),r,c,f,!0,p,k):function(e,t,r,n,i,s,a,l,u){e.dropAllAttributes();let m=new _({sz:44,buffer:new ArrayBuffer(44)}),d=0;m.writeDouble(d,n.x),d+=8,m.writeDouble(d,n.y),d+=8,m.writeDouble(d,a),d+=8,m.writeDouble(d,l),d+=8,m.writeDouble(d,u),d+=8;let c=0;s||(c|=2048),i&&(c|=4096),m.writeInt32(d,c),d+=4,function(e,t,r,n,i){e.m_bits=0,e.m_center.x=n.readDouble(0),e.m_center.y=n.readDouble(8),e.m_rotation=n.readDouble(i+16),e.m_semiMajorAxis=n.readDouble(i+24),e.m_minorMajorRatio=n.readDouble(i+32),e.m_XStart=t.x,e.m_YStart=t.y,e.m_XEnd=r.x,e.m_YEnd=r.y;let s=n.readInt32(i+40);if(1&s)return;let a=!!(64&s),l=!!(128&s),u=!!(2048&s),m=!!(4096&s);(512&s||1024&s)&&!l&&(a=!0),l&&!t.equals(r)?(l=!1,a=!0):a&&t.equals(r)&&(l=!0,a=!1),l?(e.m_center.assign(t),e.m_startAngle=e.m_center.x,e.m_sweepAngle=e.m_center.y,(0,o.F)(e,Number.NaN,u,m),e.m_semiMajorAxis=0,e.m_interior.setCoordsPoint2D(t)):a?(e.m_center.setNAN(),e.m_semiMajorAxis=1,e.m_minorMajorRatio=0,e.m_center.setNAN(),e.m_sweepAngle=0,e.m_startAngle=0,(0,o.A)(e),e.queryCoord2D(.5,e.m_interior)):e.constructEllipticArcEndPointsCenter(t,r,e.m_semiMajorAxis,e.m_minorMajorRatio,e.m_rotation,!m,u,e.m_center),e.setProjectionBehavior(1),(0,o.A)(e)}(e,t,r,m,0)}(e.get(),r,c,f,p,k,g,N,T):"b"===d?(e.createCubicBezier(),function(e,t,r,s){e.dropAllAttributes();let a=new _({sz:32,buffer:new ArrayBuffer(32)}),o=0;a.writeDouble(o,s[0].x),o+=8,a.writeDouble(o,s[0].y),o+=8,a.writeDouble(o,s[1].x),o+=8,a.writeDouble(o,s[1].y),o+=8,(0,n.g)(32<=a.size()),e.m_cp=(0,i.m)(i.P,2),e.m_cp[0].x=a.readDouble(0),e.m_cp[0].y=a.readDouble(8),e.m_cp[1].x=a.readDouble(16),e.m_cp[1].y=a.readDouble(24),e.m_XStart=t.x,e.m_YStart=t.y,e.m_XEnd=r.x,e.m_YEnd=r.y}(e.get(),r,c,v)):"n"===d?(e.createQuadraticRationalBezier(),function(e,t,r,n,i,s,a){e.dropAllAttributes();let o=new _({sz:40,buffer:new ArrayBuffer(40)}),l=0;o.writeDouble(l,n.x),l+=8,o.writeDouble(l,n.y),l+=8,o.writeDouble(l,i),l+=8,o.writeDouble(l,s),l+=8,o.writeDouble(l,a),l+=8,e.m_cp.x=o.readDouble(0),e.m_cp.y=o.readDouble(8),e.m_weights[0]=o.readDouble(16),e.m_weights[1]=o.readDouble(24),e.m_weights[2]=o.readDouble(32),e.m_XStart=t.x,e.m_YStart=t.y,e.m_XEnd=r.x,e.m_YEnd=r.y}(e.get(),r,c,v[0],v[1].x,v[1].y,v[2].x)):"q"===d?(e.createQuadraticBezier(),e.get().construct(r,v[0],c)):(e.createEllipticArc(),b(e.get(),r,c,x,!1,-1,-1)),l}(S,E,A,s);else{for(G=!1,2!==s.currentToken()&&(0,n.t)("failed to parse multipath: array is expected, rings/paths vertices consist of arrays of coordinates"),z=0;4!==s.nextToken();)4===z&&(0,n.t)("failed to parse multipath: each vertex array has to have at most 4 elements"),E[z++]=h(s);z<2&&(0,n.t)("failed to parse multipath: each vertex array has to have at least 2 elements"),(0,a.J)(E[0],E[1])||(0,n.t)("failed to parse multipath: x and y must be finite")}s.nextToken();do{if(m.size()===2*w&&m.resize(p(w)),m.writePoint2D(2*w,I.setCoords(E[0],E[1])),c&&c.size()===w&&c.resize(k(w)),z>2?(c||(c=(0,a.F)(w+1,Number.NaN)),c.write(w,E[2])):c&&c.write(w,Number.NaN),f&&f.size()===w&&f.resize(k(w)),z>3?(f||(f=(0,a.F)(w+1,Number.NaN)),f.write(w,E[3])):f&&f.write(w,Number.NaN),j)D++,u.add(w),d.add(F),j=!1,O=z,(0,i.a)(P,E,0,0,O);else if(null!==y)if(G){let e=(0,o.H)(x),t=N.size();N.resize(t+e),y.add(x),g.add(T),S.get().writeInBufferStream(N,T),T+=e,l.incCurveType(x,1),v++}else y.add(1),g.add(-1);w++,C++,A.setCoords(E[0],E[1])}while(C<r&&4===s.currentToken())}0!==C&&(e&&C>r&&z===O&&0===(0,i.ap)(E,P,z)?(w--,C--):null!==y&&(y.add(1),g.add(-1)))}return w&&(u.resize(D),d.resize(D),w>0&&(u.add(w),d.add(0)),l.setAttributeStreamRef(0,m),l.setPathFlagsStreamRef(d),l.setPathStreamRef(u),null!==y&&(l.updateCurveCounter(v),l.setSegmentData(g,N,y,T)),l.notifyModifiedFlags(65535)),{geometry:l,as:c,bs:f}}function h(e){let t=e.currentToken();if(10===t||6===t&&"NaN"===e.currentString())return Number.NaN;{let t=e.currentDoubleValue();return Number.isNaN(t)?Number.NaN:t}}function f(e){return e.currentInt32Value()}function p(e){let t=2*Math.trunc(3*(e+1)/2);return t<8?t=8:t<32&&(t=32),t}function k(e){let t=Math.trunc(3*(e+1)/2);return t<4?t=4:t<16&&(t=16),t}function b(e,t,r,s,a,l,u){e.dropAllAttributes();let m=new _({sz:20,buffer:new ArrayBuffer(20)}),d=0;m.writeDouble(d,s.x),d+=8,m.writeDouble(d,s.y),d+=8;let c=0;a?(u||(c|=8),l&&(c|=16)):c|=128,m.writeInt32(d,c),d+=4,function(e,t,r,s,a){0>=s.size()&&(0,n.n)("Byte_buffer out of range access"),e.m_bits=0,e.m_rotation=0,e.m_cosr=1,e.m_sinr=0,e.setStartXY(t),e.setEndXY(r);let l=i.P.getNAN();l.x=s.readDouble(0),l.y=s.readDouble(a+8);let u=s.readInt32(a+16);if(1&u)return e.m_semiMajorAxis=0,e.m_minorMajorRatio=1,e.m_interior.assign(l),e.m_center.setNAN(),e.m_sweepAngle=0,e.m_startAngle=0,(0,o.A)(e);let m=!!(64&u),d=!!(32&u),_=!!(8&u),c=!!(16&u),h=t.equals(r);m&&!h&&(m=!1,d=!0),d&&h&&(m=!0,d=!1,l.setCoords(0,0)),m||(128&u?d?(e.m_semiMajorAxis=1,e.m_minorMajorRatio=0,e.m_interior.assign(l),e.m_center.setNAN(),e.m_sweepAngle=0,e.m_startAngle=0):(e.constructCircularArcThreePoint(t,r,l),h&&_===e.isClockwise()&&e.reverse()):d?(e.m_semiMajorAxis=1,e.m_minorMajorRatio=0,e.m_center.setNAN(),e.m_sweepAngle=0,e.m_startAngle=0,(0,o.A)(e),e.queryCoord2D(.5,e.m_interior)):(0,o.B)(e,t,r,l,_,c)),m&&(e.m_center.assign(t),e.m_startAngle=l.x,e.m_sweepAngle=l.y,(0,o.F)(e,Number.NaN,_,c),e.m_semiMajorAxis=0,e.m_minorMajorRatio=1,e.m_interior.setCoordsPoint2D(t)),e.setProjectionBehavior(0),(0,o.A)(e)}(e,t,r,m,0)}function y(e,t,r,n,i){let s=e.getEndXY(),a=e.hasAttribute(1)&&!t,o=e.hasAttribute(2)&&!r,l=Number.NaN,u=Number.NaN;return a&&(l=e.getEndAttributeAsDbl(1,0)),o&&(u=e.getEndAttributeAsDbl(2,0)),i.startObject(),i.addFieldName("b"),i.startArray(),g(a,o,s.x,s.y,l,u,n,i),N(e.m_cp[0].x,e.m_cp[0].y,n,i),N(e.m_cp[1].x,e.m_cp[1].y,n,i),i.endArray(),i.endObject(),!1}function g(e,t,r,n,i,s,a,o){o.startArray(),o.addDouble(r,a),o.addDouble(n,a),e&&o.addDouble(i,a),t&&o.addDouble(s,a),o.endArray()}function N(e,t,r,n){n.startArray(),n.addDouble(e,r),n.addDouble(t,r),n.endArray()}class T{getOperatorType(){return 10405}accelerateGeometry(e,t,r){return!1}canAccelerateGeometry(e){return!1}supportsCurves(){return!0}execute(e,t,r,i,a,o){var l,u=e,m=t,d=r,_=i;if(m||d){if(_.startObject(),null!==m)switch(m.getGeometryType()){case n.G.enumPolygon:v(!0,u,m,_);break;case n.G.enumPolyline:v(!1,u,m,_);break;case n.G.enumMultiPoint:!function(e,t,r){let i=t.getImpl(),s=i.hasAttribute(1)&&!(2&e),a=i.hasAttribute(2)&&!(4&e),o=i.hasAttribute(3)&&!(8&e);s&&(r.addFieldName("hasZ"),r.addBool(!0)),a&&(r.addFieldName("hasM"),r.addBool(!0)),r.addFieldName("points");let l=t.getPointCount();if(t.isEmpty())r.startArray(),r.endArray();else{let t=17-(31&e>>13);r.startArray();let n=i.getAttributeStreamRef(0),o=null,u=null;s&&(o=i.getAttributeStreamRef(1)),a&&(u=i.getAttributeStreamRef(2));for(let e=0;e<l;e++){let i=n.read(2*e),l=n.read(2*e+1),m=Number.NaN,d=Number.NaN;s&&(m=o.read(e)),a&&(d=u.read(e)),x(s,a,i,l,m,d,t,r)}r.endArray()}if(o){let e=null;i.isEmpty()||(e=i.getAttributeStreamRef(3)),(0,n.g)(0===l||null!==e&&e.size()>=l),r.addFieldName("ids"),r.startArray();for(let t=0;t<l;t++)r.addInt32(e.read(t));r.endArray()}}(u,m,_);break;case n.G.enumPoint:!function(e,t,r){let n=t.hasAttribute(1)&&!(2&e),i=t.hasAttribute(2)&&!(4&e),s=t.hasAttribute(3)&&!(8&e);if(t.isEmpty())return r.addFieldName("x"),r.addNull(),r.addFieldName("y"),r.addNull(),n&&(r.addFieldName("z"),r.addNull()),i&&(r.addFieldName("m"),r.addNull()),s&&(r.addFieldName("id"),r.addInt32(0));let a=17-(31&e>>13);r.addFieldName("x"),r.addDouble(t.getX(),a),r.addFieldName("y"),r.addDouble(t.getY(),a),n&&(r.addFieldName("z"),r.addDouble(t.getZ(),a)),i&&(r.addFieldName("m"),r.addDouble(t.getM(),a)),s&&(r.addFieldName("id"),r.addInt32(t.getID()))}(u,m,_);break;case n.G.enumEnvelope:!function(e,t,r){let n=t.hasAttribute(1)&&!(2&e),i=t.hasAttribute(2)&&!(4&e),s=t.hasAttribute(3)&&!(8&e);if(t.isEmpty())return r.addFieldName("xmin"),r.addNull(),r.addFieldName("ymin"),r.addNull(),r.addFieldName("xmax"),r.addNull(),r.addFieldName("ymax"),r.addNull(),n&&(r.addFieldName("zmin"),r.addNull(),r.addFieldName("zmax"),r.addNull()),i&&(r.addFieldName("mmin"),r.addNull(),r.addFieldName("mmax"),r.addNull()),s&&(r.addFieldName("idmin"),r.addInt32(0),r.addFieldName("idmax"),r.addInt32(0));let a=17-(31&e>>13);if(r.addFieldName("xmin"),r.addDouble(t.getXMin(),a),r.addFieldName("ymin"),r.addDouble(t.getYMin(),a),r.addFieldName("xmax"),r.addDouble(t.getXMax(),a),r.addFieldName("ymax"),r.addDouble(t.getYMax(),a),n){let e=t.queryInterval(1,0);r.addFieldName("zmin"),r.addDouble(e.vmin,a),r.addFieldName("zmax"),r.addDouble(e.vmax,a)}if(i){let e=t.queryInterval(2,0);r.addFieldName("mmin"),r.addDouble(e.vmin,a),r.addFieldName("mmax"),r.addDouble(e.vmax,a)}if(s){let e=t.queryInterval(3,0);r.addFieldName("idmin"),r.addInt32(e.vmin),r.addFieldName("idmax"),r.addInt32(e.vmax)}}(u,m,_);break;case n.G.enumMultipatch:(0,n.g)(0);break;default:(0,n.c)("exportToJSON")}null!==d&&(_.addFieldName("spatialReference"),function(e,t,r){r.startObject();let i=0;t.isCustomWkid()||(i=t.getOldID());let a=0,o=t.getVCS();if(null!==o&&(o.isCustomWkid()||(a=o.getOldID()),a<=0&&(i=0)),i>0){r.addFieldName("wkid"),r.addInt32(i);let e=t.getLatestID();if(e>0&&e!==i&&(r.addFieldName("latestWkid"),r.addInt32(e)),a>0){r.addFieldName("vcsWkid"),r.addInt32(a);let e=t.getLatestVerticalID();e!==a&&(r.addFieldName("latestVcsWkid"),r.addInt32(e))}}if(0===t.getCoordinateSystemType())r.addFieldName("wkid"),r.addNull(),null!==t.getUnit()&&(r.addFieldName("unit"),function(e,t,r){r.startObject();let i=t.getID();i<=0&&(0,n.t)("cannot export unit that has no valid WKID"),r.addFieldName("uwkid"),r.addInt32(i),r.endObject()}(0,t.getUnit(),r));else if(i<=0||1&e){let n="";64&e&&(n=t.getText2(),r.addFieldName("wkt2"),r.addString(n));let i=t.getText();i!==n&&(r.addFieldName("wkt"),r.addString(i))}if(16&e){let e=new s.aE;t.queryPrecisionDescriptor(e),r.addFieldName("xyTolerance"),r.addDouble(e.getTolerance(0)),r.addFieldName("zTolerance"),r.addDouble(e.getTolerance(1)),r.addFieldName("mTolerance"),r.addDouble(e.getTolerance(2)),r.addFieldName("falseX"),r.addDouble(e.getFalseX()),r.addFieldName("falseY"),r.addDouble(e.getFalseY()),r.addFieldName("xyUnits"),r.addDouble(e.getGridUnitsXY()),r.addFieldName("falseZ"),r.addDouble(e.getFalseZ()),r.addFieldName("zUnits"),r.addDouble(e.getGridUnitsZ()),r.addFieldName("falseM"),r.addDouble(e.getFalseM()),r.addFieldName("mUnits"),r.addDouble(e.getGridUnitsM())}r.endObject()}(u,d,_)),_.endObject()}}exportSpatialReference(e,t,r,i){(0,n.g)(0)}exportProjectionTransformation(e,t,r,i){(0,n.g)(0)}exportDatumTransformation(e,t,r,i){(0,n.g)(0)}static geometryTypeToString(e){return(0,n.g)(0),""}}function v(e,t,r,i){let s=r.getImpl(),l=!!(2&t),u=!!(4&t),m=s.hasAttribute(1)&&!l,d=s.hasAttribute(2)&&!u,_=s.hasAttribute(3)&&!(8&t),c=s.hasNonLinearSegments();m&&(i.addFieldName("hasZ"),i.addBool(!0)),d&&(i.addFieldName("hasM"),i.addBool(!0)),e?c?i.addFieldName("curveRings"):i.addFieldName("rings"):c?i.addFieldName("curvePaths"):i.addFieldName("paths");let h=null,f=[];if(r.isEmpty())i.startArray(),i.endArray();else{let e=17-(31&t>>13);i.startArray();let p=r.getPathCount(),k=0,b=s.getAttributeStreamRef(0),T=null,v=null,S=null,A=new o.S,w=null,D=null,F=null;c&&(w=s.getSegmentFlagsStreamRef(),D=s.getSegmentIndexStreamRef(),F=s.getSegmentDataStreamRef()),m&&(T=s.getAttributeStreamRef(1)),d&&(v=s.getAttributeStreamRef(2)),_&&(S=s.getAttributeStreamRef(3),h=(0,a.t)(3,0));for(let t=0;t<p;t++){i.startArray(),_&&f.push(0);let s=r.getPathEnd(t);if(k===s){i.endArray();continue}let a=r.isClosedPath(t),c=b.read(2*k),p=b.read(2*k+1),C=m?T.read(k):Number.NaN,j=d?v.read(k):Number.NaN,z=_?S.read(k):0;x(m,d,c,p,C,j,e,i);let O=1;_&&(h.add(z),f[f.length-1]++);let I=c,E=p,P=C,G=j,B=z,V=!1,M=0,R=Number.NaN,U=Number.NaN,W=0;for(let t=k+1,r=k,X=a?s+1:s;t<X;t++,r++){let a,k,X=null!==w?31&w.read(r):1;if(t<s?(a=b.read(2*t),k=b.read(2*t+1),m&&(R=T.read(t)),d&&(U=v.read(t)),_&&(W=S.read(t))):(a=I,k=E,R=P,U=G,W=B),1!==X){V=!0,4===X?A.createEllipticArc():2===X?A.createCubicBezier():16===X?A.createQuadraticBezier():8===X?A.createQuadraticRationalBezier():(0,n.b)("JSON export.unsupported curve");let t=A.get(),s=D.read(r);t.setStartXYCoords(c,p),t.setEndXYCoords(a,k),m&&(t.setStartAttribute(1,0,C),t.setEndAttribute(1,0,R)),d&&(t.setStartAttribute(2,0,j),t.setEndAttribute(2,0,U)),t.readFromBufferStream(F,s),function(e,t,r,i,s){let a=e.getGeometryType();if(a===n.G.enumEllipticArc)return function(e,t,r,i,s){(0,n.g)(!(0,o.z)(e));let a=e.getEndXY(),l=e.hasAttribute(1)&&!t,u=e.hasAttribute(2)&&!r,m=Number.NaN,d=Number.NaN;if(l&&(m=e.getEndAttributeAsDbl(1,0)),u&&(d=e.getEndAttributeAsDbl(2,0)),e.isDegenerateToLine()||e.isDegenerate(0))return g(l,u,a.x,a.y,m,d,i,s),!0;let _=0===e.projectionBehavior(),c=!!_&&e.isClosed();if(_&&!c)s.startObject(),s.addFieldName("c"),s.startArray(),g(l,u,a.x,a.y,m,d,i,s),N(e.m_interior.x,e.m_interior.y,17,s),s.endArray(),s.endObject();else if(_){s.startObject(),s.addFieldName("a"),s.startArray(),g(l,u,a.x,a.y,m,d,i,s),N(e.m_center.x+0,e.m_center.y+0,17,s);let t=!e.isMajor();s.addInt32(+!!t);let r=e.isClockwise();s.addInt32(+!!r),s.endArray(),s.endObject()}else{s.startObject(),s.addFieldName("a"),s.startArray(),g(l,u,a.x,a.y,m,d,i,s),N(e.m_center.x,e.m_center.y,17,s);let t=!e.isMajor();s.addInt32(+!!t);let r=e.isClockwise();s.addInt32(+!!r),s.addDouble(e.m_rotation,17),s.addDouble(e.m_semiMajorAxis,17),s.addDouble(e.m_minorMajorRatio,17),s.endArray(),s.endObject()}return!1}(e,t,r,i,s);if(a===n.G.enumBezier)return y(e,t,r,i,s);if(a===n.G.enumRationalBezier2)return function(e,t,r,n,i){let s=e.getEndXY(),a=e.hasAttribute(1)&&!t,o=e.hasAttribute(2)&&!r,l=Number.NaN,u=Number.NaN;return a&&(l=e.getEndAttributeAsDbl(1,0)),o&&(u=e.getEndAttributeAsDbl(2,0)),i.startObject(),i.addFieldName("n"),i.startArray(),g(a,o,s.x,s.y,l,u,n,i),N(e.m_cp.x,e.m_cp.y,n,i),i.addDouble(e.m_weights[0],n),i.addDouble(e.m_weights[1],n),i.addDouble(e.m_weights[2],n),i.endArray(),i.endObject(),!1}(e,t,r,i,s);if(a===n.G.enumBezier2){let n=new o.y;return n.constructFromQuadraticSegment(e),y(n,t,r,i,s)}(0,n.b)("")}(A.get(),l,u,e,i)&&M++}else x(m,d,a,k,R,U,e,i);_&&(h.add(W),f[f.length-1]++),O++,c=a,p=k,C=R,j=U,z=W}V&&0===M||(O<2&&M<1&&(x(m,d,c,p,C,j,e,i),O++,_&&(h.add(z),f[f.length-1]++)),a&&O<3&&M<2&&(x(m,d,I,E,P,G,e,i),O++,c=I,p=E,C=P,j=G,z=B,_&&(h.add(B),f[f.length-1]++))),i.endArray(),k=s}i.endArray()}if(_){i.addFieldName("ids"),i.startArray();let e=0;for(let t=0,r=f.length;t<r;++t){let r=f[t];(0,n.g)(0===r||null!==h&&e+r<=h.size()),i.startArray();for(let t=0;t<r;++t)i.addInt32(h.read(e)),e++;i.endArray()}i.endArray()}}function x(e,t,r,n,i,s,a,o){o.startArray(),o.addDouble(r,a),o.addDouble(n,a),e&&o.addDouble(i,a),t&&o.addDouble(s,a),o.endArray()}let S={s_a:97,s_A:65,s_asterisk:42,s_b:98,s_backslash:92,s_beginArray:91,s_beginObject:123,s_colon:58,s_period:46,s_comma:44,s_doubleQuote:34,s_endArray:93,s_endObject:125,s_e:101,s_E:69,s_f:102,s_F:70,s_forwardslash:47,s_minus:45,s_plus:43,s_n:110,s_N:78,s_r:114,s_t:116,s_u:117,s_zero:48,s_nine:57};class A{constructor(e){this.m_functionStack=[],this.m_pushPositions=[],this.m_utf8Decoder=new TextDecoder("utf-8",{fatal:!0}),void 0===e?(this.m_startToken=Number.MAX_SAFE_INTEGER,this.m_endToken=0,this.m_currentTokenType=0,this.m_functionStack.push(()=>this.accept_()),this.m_jsonString=null,this.m_bHasEscapes=!1):e.jsonString?this.resetParserFromString(e.jsonString):e.jsonStream?(0,n.b)("streaming json parsing not yet impl"):(0,n.c)("invalid constructor parameter")}prepSubstrString_(){}getCurrentSubstrString_(){return this.m_jsonString.slice(this.m_startToken,this.m_endToken)}stepOverCharString_(){this.m_endToken++}peekCharString_(){return this.m_jsonString.charCodeAt(this.m_endToken)}getString_(e){let t=this.m_jsonString?.slice(this.m_startToken,this.m_startToken+e-1);return this.m_endToken+=e-1,{s:t,bDone:this.m_endToken>=this.m_jsonString.length}}incrementString_(){this.m_endToken++}eofString_(){return this.m_endToken>=this.m_jsonString.length}setStringFunctions_(){this.m_prepSubstr=this.prepSubstrString_,this.m_getCurrentSubstr=this.getCurrentSubstrString_,this.m_stepOverChar=this.stepOverCharString_,this.m_peekChar=this.peekCharString_,this.m_get=this.getString_,this.m_increment=this.incrementString_,this.m_eof=this.eofString_}setStreamFunctions_(){(0,n.b)("streaming json parsing not yet impl")}reset_(){this.m_jsonString=null,this.m_endToken=0,this.m_startToken=Number.MAX_SAFE_INTEGER,this.m_currentTokenType=0,this.m_bHasEscapes=!1,this.m_functionStack.length=0,this.m_functionStack.push(()=>this.start_()),this.m_pushPositions.length=0}resetParserFromString(e){this.reset_(),this.setStringFunctions_(),this.m_jsonString=e}resetParserFromStream(e){(0,n.b)("streaming json parsing not yet impl")}resetToPosition(e){return(0,n.g)(0),!1}nextToken(){return this.m_functionStack.at(-1)(),this.m_currentTokenType}currentToken(){return this.m_currentTokenType}currentTokenStartIndex(){return this.m_startToken}currentTokenEndIndex(){return this.m_endToken}currentText(){return(0,n.g)(0),""}childrenAsString(){return(0,n.g)(0),""}skipChildren(){this.skipChildren_()}skipChildren_(){if(1!==this.m_currentTokenType)if(2!==this.m_currentTokenType);else{let e=1;do this.m_currentTokenType=this.nextToken(),2===this.m_currentTokenType?e++:4===this.m_currentTokenType&&e--;while(4!==this.m_currentTokenType||0!==e)}else{let e=1;do this.m_currentTokenType=this.nextToken(),1===this.m_currentTokenType?e++:3===this.m_currentTokenType&&e--;while(3!==this.m_currentTokenType||0!==e)}}currentTerminalAsString_(){switch(this.m_currentTokenType){case 7:case 8:case 9:return this.m_getCurrentSubstr().slice(0,this.m_endToken-this.m_startToken);case 10:return"null";case 11:return"true";case 12:return"false"}(0,n.t)("invalid token")}toUTF8_(e,t){let r=0,n=e;for(;t.charCodeAt(n)===S.s_backslash&&t.charCodeAt(n+1)===S.s_u;)r++,n+=6;n=e;let i=new Uint8Array(r),s=0;for(;t.charCodeAt(n)===S.s_backslash&&t.charCodeAt(n+1)===S.s_u;)i[s++]=Number.parseInt(t.slice(n+2,n+6),16),n+=6;return{u8s:this.m_utf8Decoder.decode(i),end:n}}unquoteCurrentString_(){let e="",t=1,r=this.m_endToken-this.m_startToken-1,n=0,i=this.m_getCurrentSubstr();for(let s=t;s<r;s++)if(i.charCodeAt(s)!==S.s_backslash)n++;else{switch(n>0&&(e+=i.slice(t,t+n)),i.charCodeAt(++s)){case S.s_doubleQuote:e+='"';break;case S.s_u:{let{u8s:t,end:r}=this.toUTF8_(s-1,i);s=r-1,e+=t;break}case S.s_backslash:e+="\\";break;case S.s_forwardslash:e+="/";break;case S.s_b:e+="\b";break;case S.s_f:e+="\f";break;case S.s_n:e+="\n";break;case S.s_r:e+="\r";break;case S.s_t:e+="	"}t=s+1,n=0}return n>0&&(e+=i.slice(t,t+n)),e}currentString(){return 5!==this.m_currentTokenType&&6!==this.m_currentTokenType?this.currentTerminalAsString_():this.m_bHasEscapes?this.unquoteCurrentString_():this.m_getCurrentSubstr().slice(1,this.m_endToken-this.m_startToken-2+1)}currentDoubleValue(){if(7!==this.m_currentTokenType&&8!==this.m_currentTokenType&&9!==this.m_currentTokenType&&6!==this.m_currentTokenType&&10!==this.m_currentTokenType&&(0,n.t)("invalid token"),10===this.m_currentTokenType)return Number.NaN;let e=this.m_getCurrentSubstr(),t=this.m_endToken-this.m_startToken;if(6===this.m_currentTokenType){if("NaN"===this.currentString())return Number.NaN;e=e.slice(1),0==(t-=2)&&(0,n.t)("invalid token")}let r=Number.parseFloat(e);if(6===this.m_currentTokenType)Number.isNaN(r)&&(0,n.t)("invalid token");else if(Number.isNaN(r))return Number.NaN;return r}currentInt32Value(){8!==this.m_currentTokenType&&6!==this.m_currentTokenType&&(0,n.t)("invalid token");let e=this.m_getCurrentSubstr(),t=this.m_endToken-this.m_startToken;6===this.m_currentTokenType&&(e=e.slice(1),0==(t-=2)&&(0,n.t)("invalid token"));let r=parseInt(e);return Number.isNaN(r)&&(0,n.t)("invalid token"),r}currentInt64Value(){return(0,n.g)(0),0n}currentBoolValue(){return(0,n.g)(0),!1}isError(){return 0}JSONString(){return(0,n.g)(0),""}pushPosition(){return(0,n.g)(0),!1}popPosition(){return(0,n.g)(0),!1}skipCStyleComments_(){(0,n.g)(0)}skipCppStyleComments_(){(0,n.g)(0)}skipComments_(){this.m_prepSubstr();let e=this.m_peekChar();this.m_stepOverChar(),this.m_eof()&&(0,n.t)("invalid token"),(e=this.m_peekChar())===S.s_asterisk?this.skipCStyleComments_():e===S.s_forwardslash?this.skipCppStyleComments_():(0,n.t)("invalid token")}skipWhiteSpace_(){let e;do{this.m_eof()&&(0,n.t)("invalid token");let t=this.m_peekChar();for(;t>=9&&t<=13||32===t;)this.m_increment(),this.m_eof()&&(0,n.t)("invalid token"),t=this.m_peekChar();t===S.s_forwardslash?(this.m_startToken=this.m_endToken,e=!0,this.skipComments_()):e=!1}while(e)}rightBracket_(){return this.m_peekChar()===S.s_endArray&&(this.m_startToken=this.m_endToken,this.m_increment(),this.m_currentTokenType=4,!0)}rightBrace_(){return this.m_peekChar()===S.s_endObject&&(this.m_startToken=this.m_endToken,this.m_increment(),this.m_currentTokenType=3,!0)}string_(){this.m_prepSubstr(),this.m_bHasEscapes=!1,this.m_stepOverChar(),this.m_eof()&&(0,n.t)("invalid token");let e=this.m_peekChar();for(;e!==S.s_doubleQuote;){let t=e===S.s_backslash;if(this.m_stepOverChar(),this.m_eof()&&(0,n.t)("invalid token"),e=this.m_peekChar(),t)if(this.m_bHasEscapes=!0,e===S.s_doubleQuote||e===S.s_backslash||e===S.s_forwardslash||e===S.s_b||e===S.s_f||e===S.s_n||e===S.s_r||e===S.s_t)this.m_stepOverChar(),this.m_eof()&&(0,n.t)("invalid token"),e=this.m_peekChar();else if(e===S.s_u)for(let t=0;t<4;t++)this.m_stepOverChar(),this.m_eof()&&(0,n.t)("invalid token"),(e=this.m_peekChar())>=S.s_zero&&e<=S.s_nine||e>=S.s_a&&e<=S.s_f||e>=S.s_A&&e<=S.s_F||(0,n.t)("invalid token");else(0,n.t)("invalid token")}this.m_stepOverChar()}comma_(){return this.m_peekChar()===S.s_comma&&(this.m_increment(),!0)}colon_(){return this.m_peekChar()===S.s_colon&&(this.m_increment(),!0)}fieldNameEnd_(){this.skipWhiteSpace_(),this.m_functionStack.pop(),this.colon_()?(this.skipWhiteSpace_(),this.value_()):(0,n.t)("invalid token")}fieldNameStart_(){this.m_startToken=this.m_endToken,this.m_peekChar()!==S.s_doubleQuote&&(0,n.t)("invalid token"),this.string_(),this.m_currentTokenType=5,this.m_functionStack.push(()=>this.fieldNameEnd_())}pairEnd_(){this.skipWhiteSpace_(),this.comma_()?(this.skipWhiteSpace_(),this.fieldNameStart_()):this.rightBrace_()?this.m_functionStack.pop():(0,n.t)("invalid token")}arrayStart_(){this.skipWhiteSpace_(),this.m_functionStack.pop(),this.rightBracket_()||(this.m_functionStack.push(()=>this.elementEnd_()),this.value_())}elementEnd_(){this.skipWhiteSpace_(),this.comma_()?(this.skipWhiteSpace_(),this.value_()):this.rightBracket_()?this.m_functionStack.pop():(0,n.t)("invalid token")}objectStart_(){this.skipWhiteSpace_(),this.m_functionStack.pop(),this.rightBrace_()||(this.m_functionStack.push(()=>this.pairEnd_()),this.fieldNameStart_())}valueStartObject_(){this.m_increment(),this.m_currentTokenType=1,this.m_functionStack.push(()=>this.objectStart_())}valueStartArray_(){this.m_increment(),this.m_currentTokenType=2,this.m_functionStack.push(()=>this.arrayStart_())}valueString_(){this.string_(),this.m_currentTokenType=6}int_(){this.m_peekChar()!==S.s_zero?this.digits_():this.m_stepOverChar()}digits_(){let e=this.m_peekChar();do this.m_stepOverChar(),this.m_eof()&&(0,n.t)("invalid token"),e=this.m_peekChar();while(e>=S.s_zero&&e<=S.s_nine)}frac_(){let e=this.m_peekChar();this.m_stepOverChar(),this.m_eof()&&(0,n.t)("invalid token"),(e=this.m_peekChar())>=S.s_zero&&e<=S.s_nine||(0,n.t)("invalid token"),this.digits_()}exp_(){let e=this.m_peekChar();this.m_stepOverChar(),this.m_eof()&&(0,n.t)("invalid token"),(e=this.m_peekChar())!==S.s_plus&&e!==S.s_minus||(this.m_stepOverChar(),this.m_eof()&&(0,n.t)("invalid token"),e=this.m_peekChar()),e>=S.s_zero&&e<=S.s_nine||(0,n.t)("invalid token"),this.digits_()}valueNumber_(){this.m_prepSubstr();let e=!1,t=this.m_peekChar();if(t===S.s_minus&&(this.m_stepOverChar(),this.m_eof()&&(0,n.t)("invalid token"),t=this.m_peekChar(),e=!0,t>=S.s_zero&&t<=S.s_nine||(0,n.t)("invalid token")),this.int_(),(t=this.m_peekChar())===S.s_period)this.m_currentTokenType=7,this.frac_(),(t=this.m_peekChar())!==S.s_e&&t!==S.s_E||this.exp_();else if(t===S.s_e||t===S.s_E)this.m_currentTokenType=7,this.exp_();else{let t=0;e&&t++;let r=this.m_endToken-this.m_startToken-t;if(r<10)this.m_currentTokenType=8;else if(10===r){let r=this.m_getCurrentSubstr();e?"2147483648">=r.slice(t)?this.m_currentTokenType=8:this.m_currentTokenType=9:"2147483647">=r.slice(t)?this.m_currentTokenType=8:this.m_currentTokenType=9}else if(r<19)this.m_currentTokenType=9;else if(19===r){let r=this.m_getCurrentSubstr();e?"9223372036854775808">=r.slice(t)?this.m_currentTokenType=9:this.m_currentTokenType=7:"9223372036854775807">=r.slice(t)?this.m_currentTokenType=9:this.m_currentTokenType=7}else this.m_currentTokenType=7}}valueNull_(){let{s:e,bDone:t}=this.m_get(5);t&&(0,n.t)("invalid token"),"null"!==e&&(0,n.t)("invalid token"),this.m_currentTokenType=10}valueTrue_(){let{s:e,bDone:t}=this.m_get(5);t&&(0,n.t)("invalid token"),"true"!==e&&(0,n.t)("invalid token"),this.m_currentTokenType=11}valueFalse_(){let{s:e,bDone:t}=this.m_get(6);t&&(0,n.t)("invalid token"),"false"!==e&&(0,n.t)("invalid token"),this.m_currentTokenType=12}valueNan_(){let{s:e,bDone:t}=this.m_get(4);t&&(0,n.t)("invalid token"),"NaN"!==e&&(0,n.t)("invalid token"),this.m_currentTokenType=7}value_(){this.m_startToken=this.m_endToken;let e=this.m_peekChar();e===S.s_beginObject?this.valueStartObject_():e===S.s_beginArray?this.valueStartArray_():e===S.s_doubleQuote?this.valueString_():e===S.s_minus||e>=S.s_zero&&e<=S.s_zero+9?this.valueNumber_():e===S.s_n?this.valueNull_():e===S.s_t?this.valueTrue_():e===S.s_f?this.valueFalse_():e===S.s_N?this.valueNan_():(0,n.t)("invalid token")}start_(){this.skipWhiteSpace_(),this.m_functionStack.pop(),this.m_functionStack.push(()=>this.accept_());let e=this.m_peekChar();e!==S.s_beginObject&&e!==S.s_beginArray&&(0,n.t)("invalid token"),this.value_()}accept_(){this.m_startToken=this.m_endToken,this.m_currentTokenType=0}}class w{getOperatorType(){return 10404}accelerateGeometry(e,t,r){return!1}canAccelerateGeometry(e){return!1}supportsCurves(){return!0}execute(e,t,r,l,u,m,d){let _;"string"==typeof r?(_=new A({jsonString:r})).nextToken():_=r,1!==_.currentToken()&&(0,n.t)("failed to import map geometry: start of object is expected");let b=function(e,t,r,l,u,m){let d=!1,_=!1,b=!1,y=!1,g=!1,N=!1,T=!1,v=!1,x=!1,S=!1,A=!1,w=!1,D=!1,F=!1,C=!1,j=!1,z=!1,O=!1,I=!1,E=!1,P=!1,G=!1,B=!1,V=!1,M=Number.NaN,R=Number.NaN,U=Number.NaN,W=Number.NaN,X=0,L=Number.NaN,Y=Number.NaN,K=Number.NaN,q=Number.NaN,J=Number.NaN,Q=Number.NaN,Z=Number.NaN,H=Number.NaN,$=0,ee=0,et=!1,er=!1,en=null,ei=null,es=null,ea=null,eo=null;for(;3!==r.nextToken();){let m=r.currentString();if(r.nextToken(),"spatialReference"===m){if(u&&!d){d=!0,1===r.currentToken()?ea=function(e){let t=!1,r=!1,n=!1,i=!1,a=!1,o=!1,l=!1,u=!1,m=!1,d=!1,_=!1,c=!1,h=!1,f=!1,p=!1,k=!1,b=!1,y=-1,g=-1,N=-1,T=-1,v=0,x=0,S=0,A=0,w=0,D=0,F=0,C=0,j=0,z=0,O="",I="",E=null;for(;3!==e.nextToken();){let s=e.currentString();e.nextToken(),"wkid"===s?t||(t=!0,8===e.currentToken()&&(y=e.currentInt32Value())):"latestWkid"===s?r||(r=!0,8===e.currentToken()&&(g=e.currentInt32Value())):"wkt"===s?a||(a=!0,6===e.currentToken()&&(O=e.currentString())):"wkt2"===s?a||6===e.currentToken()&&(I=e.currentString()):"vcsWkid"===s?n||(n=!0,8===e.currentToken()&&(N=e.currentInt32Value())):"latestVcsWkid"===s?i||(i=!0,8===e.currentToken()&&(T=e.currentInt32Value())):"xyTolerance"===s?l||(l=!0,o=!0,v=e.currentDoubleValue()):"zTolerance"===s?u||(u=!0,o=!0,x=e.currentDoubleValue()):"mTolerance"===s?m||(m=!0,o=!0,S=e.currentDoubleValue()):"falseX"===s?d||(d=!0,o=!0,F=e.currentDoubleValue()):"falseY"===s?_||(_=!0,o=!0,C=e.currentDoubleValue()):"falseZ"===s?c||(c=!0,o=!0,j=e.currentDoubleValue()):"falseM"===s?h||(h=!0,o=!0,z=e.currentDoubleValue()):"xyUnits"===s?f||(f=!0,o=!0,A=e.currentDoubleValue()):"zUnits"===s?p||(p=!0,o=!0,w=e.currentDoubleValue()):"mUnits"===s?k||(k=!0,o=!0,D=e.currentDoubleValue()):"unit"===s?b||(b=!0,E=function(e){let t=!1;for(;3!==e.nextToken();){let r=e.currentString();e.nextToken(),"uwkid"===r?t||(t=!0,8===e.currentToken()&&e.currentInt32Value()):e.skipChildren()}return null}(e)):e.skipChildren()}T<=0&&N>0&&(T=N),N<=0&&T>0&&(N=T);let P=null,G=!0;if(0!==O.length&&(G=!1,(0,s.aA)(O)&&(P=(0,s.b)(O))),P||0===I.length||(G=!1,(0,s.aA)(I)&&(P=(0,s.b)(I))),!P&&g>0&&(G=!1,(0,s.aB)(g)&&(T<=0||(0,s.aC)())&&(P=(0,s.c)(g,T))),!P&&y>0&&(G=!1,(0,s.aB)(y)&&(N<=0||(0,s.aC)())&&(P=(0,s.c)(y,N))),G&&(P=(0,s.z)(E)),o&&P){let e=new s.aE;P.queryPrecisionDescriptorWithoutFalseXY(e),l&&e.setTolerance(0,v),u&&e.setTolerance(1,x),m&&e.setTolerance(2,S),f&&d&&_&&e.setGridParams(F,C,A),p&&c&&e.setZParams(j,w),k&&h&&e.setMParams(z,D),P=(0,s.aD)(P,e)}return P}(r):10!==r.currentToken()&&(0,n.t)("failed to parse spatial reference: object or null is expected");continue}}else if(l)if("hasZ"===m){if(!_){_=!0,et=11===r.currentToken();continue}}else if("hasM"===m){if(!b){b=!0,er=11===r.currentToken();continue}}else if("rings"===m){if(!(g||N||e!==n.G.enumUnknown&&e!==n.G.enumPolygon)){g=!0,{geometry:eo,as:en,bs:ei}=c(!0,!1,t,r);continue}}else if("curveRings"===m){if(!N&&(e===n.G.enumUnknown||e===n.G.enumPolygon)){N=!0,{geometry:eo,as:en,bs:ei}=c(!0,!0,t,r);continue}}else if("paths"===m){if(!(T||v||e!==n.G.enumUnknown&&e!==n.G.enumPolyline)){T=!0,{geometry:eo,as:en,bs:ei}=c(!1,!1,t,r);continue}}else if("curvePaths"===m){if(!v&&(e===n.G.enumUnknown||e===n.G.enumPolyline)){v=!0,{geometry:eo,as:en,bs:ei}=c(!1,!0,t,r);continue}}else if("points"===m){if(!x&&(e===n.G.enumUnknown||e===n.G.enumMultiPoint)){x=!0,{geometry:eo,as:en,bs:ei}=function(e,t){2!==t.currentToken()&&(0,n.t)("failed to parse multipoint: array of vertices is expected");let r=0,s=new o.M,l=(0,a.F)(2,0),u=0,m=(0,i.d)(4,Number.NaN),d=new i.P,_=null,c=null;for(;4!==t.nextToken();){for(2!==t.currentToken()&&(0,n.t)("failed to parse multipoint: array is expected, multipoint vertices consist of arrays of cooridinates"),u=0;4!==t.nextToken();)4===u&&(0,n.t)("failed to parse multipoint: each vertex array has to have at most 4 elements"),m[u++]=h(t);u<2&&(0,n.t)("failed to parse multipoint: each vertex array has to have at least 2 elements"),(0,a.J)(m[0],m[1])||(0,n.t)("failed to parse multipoint: x and y must be finite"),l.size()===2*r&&l.resize(p(r)),l.writePoint2D(2*r,d.setCoords(m[0],m[1])),_&&_.size()===r&&_.resize(k(r)),u>2?(_||(_=(0,a.F)(r+1,Number.NaN)),_.write(r,m[2])):_&&_.write(r,Number.NaN),c&&c.size()===r&&c.resize(k(r)),u>3?(c||(c=(0,a.F)(r+1,Number.NaN)),c.write(r,m[3])):c&&c.write(r,Number.NaN),r++}if(r){let e=s.getImpl();e.setAttributeStreamRef(0,l),e.resizeNoInit(r),e.notifyModifiedFlags(65535)}return{geometry:s,as:_,bs:c}}(0,r);continue}}else if("ids"===m){if(!y){y=!0,es=function(e,t){2!==t.currentToken()&&(0,n.t)("failed to parse array of IDs: array of array of integers is expected");let r=(0,a.K)(2,0),i=0,s=-1;for(;4!==t.nextToken();){let e=i;r.size()===i&&r.resize(k(i)),i++;let a=0;for(-1===s?s=+(2===t.currentToken()):1===s&&2!==t.currentToken()&&(0,n.t)("failed to parse array of IDs: array of array of integers is expected"),0===s&&(r.size()===i&&r.resize(k(i)),r.write(i,f(t)),a++,i++);4!==t.nextToken();)r.size()===i&&r.resize(k(i)),r.write(i,f(t)),a++,i++;if(r.write(e,a),0===s)break}return r.resize(i),r}(0,r);continue}}else if("x"===m){if(!S&&(e===n.G.enumUnknown||e===n.G.enumPoint)){S=!0,M=h(r);continue}}else if("y"===m){if(!A&&(e===n.G.enumUnknown||e===n.G.enumPoint)){A=!0,R=h(r);continue}}else if("z"===m){if(!w&&(e===n.G.enumUnknown||e===n.G.enumPoint)){w=!0,U=h(r);continue}}else if("m"===m){if(!D&&(e===n.G.enumUnknown||e===n.G.enumPoint)){D=!0,W=h(r);continue}}else if("id"===m){if(!F&&(e===n.G.enumUnknown||e===n.G.enumPoint)){F=!0,X=f(r);continue}}else if("xmin"===m){if(!C&&(e===n.G.enumUnknown||e===n.G.enumEnvelope)){C=!0,L=h(r);continue}}else if("ymin"===m){if(!j&&(e===n.G.enumUnknown||e===n.G.enumEnvelope)){j=!0,Y=h(r);continue}}else if("mmin"===m){if(!P&&(e===n.G.enumUnknown||e===n.G.enumEnvelope)){P=!0,Z=h(r);continue}}else if("zmin"===m){if(!I&&(e===n.G.enumUnknown||e===n.G.enumEnvelope)){I=!0,J=h(r);continue}}else if("idmin"===m){if(!B&&(e===n.G.enumUnknown||e===n.G.enumEnvelope)){B=!0,$=f(r);continue}}else if("xmax"===m){if(!z&&(e===n.G.enumUnknown||e===n.G.enumEnvelope)){z=!0,K=h(r);continue}}else if("ymax"===m){if(!O&&(e===n.G.enumUnknown||e===n.G.enumEnvelope)){O=!0,q=h(r);continue}}else if("mmax"===m){if(!G&&(e===n.G.enumUnknown||e===n.G.enumEnvelope)){G=!0,H=h(r);continue}}else if("zmax"===m){if(!E&&(e===n.G.enumUnknown||e===n.G.enumEnvelope)){E=!0,Q=h(r);continue}}else if("idmax"===m){if(!V&&(e===n.G.enumUnknown||e===n.G.enumEnvelope)){V=!0,ee=f(r);continue}}else"materials"===m&&(0,n.g)(0);r.skipChildren()}if(g||N||T||v||x){let e=null,t=null,r=eo;et&&(eo.addAttribute(1),(e=en)||(e=(0,a.F)(r.getPointCount(),Number.NaN))),er&&(eo.addAttribute(2),t=et?ei:en),null!=es&&eo.addAttribute(3),et&&null!=e&&r.setAttributeStreamRef(1,e),er&&null!=t&&r.setAttributeStreamRef(2,t),null!=es&&function(e,t){if(e.isEmpty())return;let r=(0,a.K)(2,0),i=e.getGeometryType(),s=0;i===o.M.type?s=1:i===o.P.type||i===o.a.type?s=e.getPathCount():(0,n.c)("not implemented"),r.resize(e.getPointCount(),0);let l=0;for(let a=0;a<s;++a){let s=t.read(l),u=++l+s,m=0,d=0;i===o.M.type?m=e.getPointCount():i===o.P.type||i===o.a.type?(m=e.getPathSize(a),d=e.getPathStart(a)):(0,n.c)("not implemented");for(let e=0,n=Math.min(s,m);e<n;++e)r.write(d,t.read(l)),l++,d++;l=u}e.getImpl().setAttributeStreamRef(3,r)}(r,es)}else if(S||A||D||w||F){(0,a.I)(M,R)||(0,n.t)("failed to parse point: x and y must be finite or nan"),(Number.isNaN(R)||Number.isNaN(M))&&(M=Number.NaN,R=Number.NaN);let e=new a.P({x:M,y:R});w&&e.setZ(U),D&&e.setM(W),F&&e.setID(X),eo=e}else if(C||j||z||O||I||E||P||G||B||V){(Number.isNaN(Y)||Number.isNaN(K)||Number.isNaN(q))&&(L=Number.NaN);let e=new a.E({xmin:L,ymin:Y,xmax:K,ymax:q});I&&E&&e.setInterval(1,0,J,Q),P&&G&&e.setInterval(2,0,Z,H),B&&V&&e.setInterval(3,0,$,ee),eo=e}return{...eo?{geom:eo}:{},...ea?{sr:ea}:{}}}(t,e,_,l,u);return new s.aF(b)}importProjectionTransformation(e,t){return(0,n.g)(0),{}}importDatumTransformation(e,t){return(0,n.g)(0),{}}static stringToGeometryType(e){return(e=e.toLowerCase()).startsWith("esrigeometry")||(0,n.t)("string_to_geometry_type"),e.endsWith("point")?n.G.enumPoint:e.endsWith("envelope")?n.G.enumEnvelope:e.endsWith("multipoint")?n.G.enumMultiPoint:e.endsWith("polyline")?n.G.enumPolyline:e.endsWith("polygon")?n.G.enumPolygon:void(0,n.t)("string_to_geometry_type")}}let D=new d,F=new T,C=new w;function j(e){return Array.isArray(e)?e[0].spatialReference:e.spatialReference}function z(e,t){let r=new m(e,{strict:!1});return r.nextToken(),C.execute(0,n.G.enumUnknown,r,!0,t)}function O(e){let t=null;return[e.map(e=>{if(null==t){let r=I(e);return t=r.getSpatialReference(),r.getGeometry()}return E(e)}),t]}function I(e){return z(e,!0)}function E(e){return z(e,!1).getGeometry()}function P(e,t){return e instanceof s.aF&&(t=e.getSpatialReference(),e=e.getGeometry()),e?.isEmpty()?null:(D.reset(),F.execute(0,e,t,D),D.getObject())}},14136:(e,t,r)=>{r(73750),r(16404),r(32045),r(31632),r(92656);var n=r(40224),i=r(8922),s=r(71760);(0,n.j)(e=>{let t,r,n,a;"number"==typeof e?t=e:r=e;let o={wkid:t,wkt:r};if(r){n=(0,i.x1)(r);let e=(0,s.EA)(o);if(!n&&!e)throw Error(`Unsupported WKT type: ${r}`)}else n=!(0,s.EA)(o);return a=t&&i.yD.has(t)?Math.PI/200:n?(0,i.Ao)(o):Math.PI/180,{isPCS:n,metersOrRadiansPerUnit:a,semiMajor:0,wkidOrWkt:e}})}}]);