"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8386],{2370:(e,t,r)=>{r.d(t,{E:()=>w,w:()=>o});var n=r(31461),i=r(28255);r(57845);var s=r(87196),l=r(70115);class o{constructor(e=9,t){this._compareMinX=c,this._compareMinY=f,this._toBBox=e=>e,this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this._toBBox=t:this._initFormat(t)),this.clear()}destroy(){this.clear(),I.prune(),x.prune(),b.prune(),N.prune()}all(e){a(this._data,e)}search(e,t){let r=this._data,n=this._toBBox;if(y(e,r))for(I.clear();r;){for(let i=0,s=r.children.length;i<s;i++){let s=r.children[i],l=r.leaf?n(s):s;y(e,l)&&(r.leaf?t(s):g(e,l)?a(s,t):I.push(s))}r=I.pop()}}collides(e){let t=this._data,r=this._toBBox;if(!y(e,t))return!1;for(I.clear();t;){for(let n=0,i=t.children.length;n<i;n++){let i=t.children[n],s=t.leaf?r(i):i;if(y(e,s)){if(t.leaf||g(e,s))return!0;I.push(i)}}t=I.pop()}return!1}load(e){if(!e.length)return this;if(e.length<this._minEntries){for(let t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(this._data.children.length)if(this._data.height===t.height)this._splitRoot(this._data,t);else{if(this._data.height<t.height){let e=this._data;this._data=t,t=e}this._insert(t,this._data.height-t.height-1,!0)}else this._data=t;return this}insert(e){return e&&this._insert(e,this._data.height-1),this}clear(){return this._data=new M([]),this}remove(e){if(!e)return this;let t,r=this._data,s=null,l=0,o=!1,a=this._toBBox(e);for(b.clear(),N.clear();r||b.length>0;){if(r||(r=b.pop(),s=b.data[b.length-1],l=N.pop()??0,o=!0),r.leaf&&-1!==(t=(0,n.qh)(r.children,(0,i.zI)(e),r.children.length,r.indexHint)))return r.children.splice(t,1),b.push(r),this._condense(b),this;o||r.leaf||!g(r,a)?s?(l++,r=s.children[l],o=!1):r=null:(b.push(r),N.push(l),l=0,s=r,r=r.children[0])}return this}toJSON(){return this._data}fromJSON(e){return this._data=e,this}_build(e,t,r,n){let i=r-t+1,s=this._maxEntries;if(i<=s){let n=new M(e.slice(t,r+1));return u(n,this._toBBox),n}n||(n=Math.ceil(Math.log(i)/Math.log(s)),s=Math.ceil(i/s**(n-1)));let l=new T([]);l.height=n;let o=Math.ceil(i/s),a=o*Math.ceil(Math.sqrt(s));_(e,t,r,a,this._compareMinX);for(let i=t;i<=r;i+=a){let t=Math.min(i+a-1,r);_(e,i,t,o,this._compareMinY);for(let r=i;r<=t;r+=o){let i=Math.min(r+o-1,t);l.children.push(this._build(e,r,i,n-1))}}return u(l,this._toBBox),l}_insert(e,t,r){let n=this._toBBox,i=r?e:n(e);b.clear();let s=function(e,t,r,n){for(;n.push(t),!0!==t.leaf&&n.length-1!==r;){let r,n=1/0,l=1/0;for(let o=0,a=t.children.length;o<a;o++){var i,s;let a=t.children[o],u=m(a),h=(i=e,(Math.max((s=a).maxX,i.maxX)-Math.min(s.minX,i.minX))*(Math.max(s.maxY,i.maxY)-Math.min(s.minY,i.minY))-u);h<l?(l=h,n=u<n?u:n,r=a):h===l&&u<n&&(n=u,r=a)}t=r||t.children[0]}return t}(i,this._data,t,b);for(s.children.push(e),d(s,i);t>=0&&b.data[t].children.length>this._maxEntries;)this._split(b,t),t--;var l=i,o=b,a=t;for(let e=a;e>=0;e--)d(o.data[e],l)}_split(e,t){let r=e.data[t],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);let s=this._chooseSplitIndex(r,i,n);if(!s)return;let l=r.children.splice(s,r.children.length-s),o=r.leaf?new M(l):new T(l);o.height=r.height,u(r,this._toBBox),u(o,this._toBBox),t?e.data[t-1].children.push(o):this._splitRoot(r,o)}_splitRoot(e,t){this._data=new T([e,t]),this._data.height=e.height+1,u(this._data,this._toBBox)}_chooseSplitIndex(e,t,r){let n,i,s;n=i=1/0;for(let l=t;l<=r-t;l++){let t=h(e,0,l,this._toBBox),o=h(e,l,r,this._toBBox),a=function(e,t){let r=Math.max(e.minX,t.minX),n=Math.max(e.minY,t.minY);return Math.max(0,Math.min(e.maxX,t.maxX)-r)*Math.max(0,Math.min(e.maxY,t.maxY)-n)}(t,o),u=m(t)+m(o);a<n?(n=a,s=l,i=u<i?u:i):a===n&&u<i&&(i=u,s=l)}return s}_chooseSplitAxis(e,t,r){let n=e.leaf?this._compareMinX:c,i=e.leaf?this._compareMinY:f;this._allDistMargin(e,t,r,n)<this._allDistMargin(e,t,r,i)&&e.children.sort(n)}_allDistMargin(e,t,r,n){e.children.sort(n);let i=this._toBBox,s=h(e,0,t,i),l=h(e,r-t,r,i),o=p(s)+p(l);for(let n=t;n<r-t;n++){let t=e.children[n];d(s,e.leaf?i(t):t),o+=p(s)}for(let n=r-t-1;n>=t;n--){let t=e.children[n];d(l,e.leaf?i(t):t),o+=p(l)}return o}_condense(e){for(let t=e.length-1;t>=0;t--){let r=e.data[t];if(0===r.children.length)if(t>0){let i=e.data[t-1],s=i.children;s.splice((0,n.qh)(s,r,s.length,i.indexHint),1)}else this.clear();else u(r,this._toBBox)}}_initFormat(e){let t=["return a"," - b",";"];this._compareMinX=Function("a","b",t.join(e[0])),this._compareMinY=Function("a","b",t.join(e[1])),this._toBBox=Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}function a(e,t){let r=e;for(x.clear();r;){if(!0===r.leaf)for(let e of r.children)t((0,i.zI)(e));else x.pushArray(r.children);r=x.pop()??null}}function u(e,t){h(e,0,e.children.length,t,e)}function h(e,t,r,n,i){i||(i=new M([])),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s,l=t;l<r;l++)s=e.children[l],d(i,e.leaf?n(s):s);return i}function d(e,t){e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY)}function c(e,t){return e.minX-t.minX}function f(e,t){return e.minY-t.minY}function m(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function p(e){return e.maxX-e.minX+(e.maxY-e.minY)}function g(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function y(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function _(e,t,r,n,i){let s=[t,r];for(;s.length;){let t=s.pop(),r=s.pop();if(t-r<=n)continue;let o=r+Math.ceil((t-r)/n/2)*n;(0,l.q)(e,o,r,t,i),s.push(r,o,o,t)}}let I=new s.A,x=new s.A,b=new s.A,N=new s.A({deallocator:void 0});class w{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class F extends w{constructor(){super(...arguments),this.height=1,this.indexHint=new n.vW}}class M extends F{constructor(e){super(),this.children=e,this.leaf=!0}}class T extends F{constructor(e){super(),this.children=e,this.leaf=!1}}},5895:(e,t,r)=>{r.d(t,{T:()=>i});var n=r(82795);let i={getObjectId:e=>e.objectId,getAttributes:e=>e.attributes,getAttribute:(e,t)=>e.attributes[t],cloneWithGeometry:(e,t)=>new n.Om(t,e.attributes,null,e.objectId),getGeometry:e=>e.geometry,getCentroid:(e,t)=>e.ensureCentroid(t)}},11064:(e,t,r)=>{r.d(t,{A:()=>m});var n=r(31461),i=r(32391),s=r(74652),l=r(61939),o=r(42845),a=r(84766),u=r(60729),h=r(29499),d=r(33332),c=r(5895);let f=(0,o.vt)();class m{constructor(e){this.geometryInfo=e,this._boundsStore=new h.F,this._featuresById=new Map,this._usedMemory=0,this.events=new s.A,this.featureAdapter=c.T}get usedMemory(){return this._usedMemory}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let e=0;return this._featuresById.forEach(t=>{null!=t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)}),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(e){if(null==this.fullBounds)return null;let[t,r,n,i]=this.fullBounds;return{xmin:t,ymin:r,xmax:n,ymax:i,spatialReference:(0,d.ag)(e)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(let t of e)this._add(t);this._emitChanged()}upsertMany(e){let t=e.map(e=>this._upsert(e));return this._emitChanged(),t.filter(n.Ru)}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged(),this._usedMemory=0}removeById(e){let t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){for(let t of(this._boundsStore.invalidateIndex(),e)){let e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t){for(let r of e){let e=this._boundsStore.get(r.objectId);e&&t((0,o.Jt)(f,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach(t=>e(t))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,e=>{t(this._featuresById.get(e))})}_emitChanged(){this.events.emit("changed",void 0)}_add(e){let t;if(!e)return;let r=e.objectId;if(null==r)return void l.A.getLogger("esri.layers.graphics.data.FeatureStore").error(new i.A("featurestore:invalid-feature","feature id is missing",{feature:e}));let n=this._featuresById.get(r);if(n?(e.displayId=n.displayId,t=this._boundsStore.get(r),this._boundsStore.delete(r),this._usedMemory-=this.estimateFeatureUsedMemory?.(n)??0):null!=this.onFeatureAdd&&this.onFeatureAdd(e),!e.geometry?.coords?.length)return this._boundsStore.set(r,null),void this._featuresById.set(r,e);null!=(t=(0,u.jQ)(null!=t?t:(0,a.vt)(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM))&&this._boundsStore.set(r,t),this._featuresById.set(r,e),this._usedMemory+=this.estimateFeatureUsedMemory?.(e)??0}_upsert(e){let t=e?.objectId;if(null==t)return l.A.getLogger("esri.layers.graphics.data.FeatureStore").error(new i.A("featurestore:invalid-feature","feature id is missing",{feature:e})),null;let r=this._featuresById.get(t);if(!r)return this._add(e),e;this._usedMemory-=this.estimateFeatureUsedMemory?.(r)??0;let{geometry:n,attributes:s}=e;for(let e in s)r.attributes[e]=s[e];return n&&(r.geometry=n,this._boundsStore.set(t,(0,u.jQ)((0,a.vt)(),n,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null)),this._usedMemory+=this.estimateFeatureUsedMemory?.(r)??0,r}_remove(e){null!=this.onFeatureRemove&&this.onFeatureRemove(e);let t=e.objectId;return this._boundsStore.delete(t),this._featuresById.delete(t),this._usedMemory-=this.estimateFeatureUsedMemory?.(e)??0,e}}},11506:(e,t,r)=>{function n(e,t){return e?t?4:3:t?3:2}function i(e,t,r,i){if(!t?.lengths.length)return null;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);let s=e.coords,l=[],o=r?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:a,coords:u}=t,h=n(r,i),d=0;for(let e of a){let t=function(e,t,r,i,s,l){let o=n(s,l),a=r,u=r+o,h=0,d=0,c=0,f=0,m=0;for(let r=0,n=i-1;r<n;r++,a+=o,u+=o){let r=t[a],n=t[a+1],i=t[a+2],l=t[u],o=t[u+1],p=t[u+2],g=r*o-l*n;f+=g,h+=(r+l)*g,d+=(n+o)*g,s&&(g=r*p-l*i,c+=(i+p)*g,m+=g),r<e[0]&&(e[0]=r),r>e[1]&&(e[1]=r),n<e[2]&&(e[2]=n),n>e[3]&&(e[3]=n),s&&(i<e[4]&&(e[4]=i),i>e[5]&&(e[5]=i))}if(f>0&&(f*=-1),m>0&&(m*=-1),!f)return null;let p=[h,d,.5*f];return s&&(p[3]=c,p[4]=.5*m),p}(o,u,d,e,r,i);t&&l.push(t),d+=e*h}if(l.sort((e,t)=>{let n=e[2]-t[2];return 0===n&&r&&(n=e[4]-t[4]),n}),l.length){let e=6*l[0][2];s[0]=l[0][0]/e,s[1]=l[0][1]/e,r&&(e=6*l[0][4],s[2]=0!==e?l[0][3]/e:0),(s[0]<o[0]||s[0]>o[1]||s[1]<o[2]||s[1]>o[3]||r&&(s[2]<o[4]||s[2]>o[5]))&&(s.length=0)}if(!s.length){let e=t.lengths[0]?function(e,t,r,i,s){let l=n(i,s),o=0,a=t+l,u=0,h=0,d=0,c=0;for(let t=0,n=r-1;t<n;t++,o+=l,a+=l){var f,m,p,g,y;let t=e[o],r=e[o+1],n=e[o+2],s=e[a],l=e[a+1],_=e[a+2],I=i?function(e,t,r,n,i,s){let l=n-e,o=i-t,a=s-r;return Math.sqrt(l*l+o*o+a*a)}(t,r,n,s,l,_):function(e,t,r,n){let i=r-e,s=n-t;return Math.sqrt(i*i+s*s)}(t,r,s,l);if(I)if(u+=I,i){let e=[(f=t)+.5*(s-f),(m=r)+.5*(l-m),(p=n)+.5*(_-p)];h+=I*e[0],d+=I*e[1],c+=I*e[2]}else{let e=[(g=t)+.5*(s-g),(y=r)+.5*(l-y)];h+=I*e[0],d+=I*e[1]}}return u>0?i?[h/u,d/u,c/u]:[h/u,d/u]:r>0?i?[e[t],e[t+1],e[t+2]]:[e[t],e[t+1]]:null}(u,0,a[0],r,i):null;if(!e)return null;s[0]=e[0],s[1]=e[1],r&&e.length>2&&(s[2]=e[2])}return e}r.d(t,{Q:()=>i})},17135:(e,t,r)=>{r.d(t,{F0:()=>o,Vx:()=>h,e2:()=>c,f:()=>f});var n=r(57845),i=r(33715),s=r(54781),l=r(64547);function o(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?l.Cb:"esriGeometryPolyline"===e?l.yM:l.WR}}}let a=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/,u=1;function h(e,t){if((0,n.A)("esri-csp-restrictions"))return()=>({[t]:null,...e});try{let r=`this${d(t)} = null;`;for(let t in e)r+=`this${d(t)} = ${JSON.stringify(e[t])};`;let n=Function(`
      return class AttributesClass$${u++} {
        constructor() {
          ${r};
        }
      }
    `)();return()=>new n}catch(r){return()=>({[t]:null,...e})}}function d(e){return a.test(e)?`.${e}`:`["${e}"]`}function c(e={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,i.o8)(e)}}]}function f(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:s.F,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:s.P,editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},18914:(e,t,r)=>{r.d(t,{B:()=>u,GP:()=>o,qg:()=>h});var n=r(45714),i=r(28105);let s={ar:[".",","],bg:[",","\xa0"],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","’"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[","," "],"fr-ch":[","," "],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","’"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],no:[",","\xa0"],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function l(e=(0,i.JK)()){let t=(e=e.toLowerCase())in s;if(!t){let r=e.split("-");r.length>1&&r[0]in s&&(e=r[0],t=!0),t||(e="en")}let[r,n,o="#,##0.###"]=s[e];return{decimal:r,group:n,pattern:o}}function o(e,t){let r=l((t={...t}).locale);t.customs=r;let n=t.pattern||r.pattern;return isNaN(e)||Math.abs(e)===1/0?null:function(e,t,r){let n=(r=r||{}).customs.group,i=r.customs.decimal,s=t.split(";"),l=s[0];if((t=s[+(e<0)]||"-"+l).includes("%"))e*=100;else if(t.includes("‰"))e*=1e3;else{if(t.includes("\xa4"))throw Error("currency notation not supported");if(t.includes("E"))throw Error("exponential notation not supported")}let o=l.match(a);if(!o)throw Error("unable to find a number expression in pattern: "+t);return!1===r.fractional&&(r.places=0),t.replace(a,function(e,t,r){!0===(r=r||{}).places&&(r.places=0),r.places===1/0&&(r.places=6);let n=t.split("."),i="string"==typeof r.places&&r.places.indexOf(","),s=r.places;i?s=r.places.slice(i+1):+s>=0||(s=(n[1]||[]).length),r.round<0||(e=Number(e.toFixed(Number(s))));let l=String(Math.abs(e)).split("."),o=l[1]||"";if(n[1]||r.places){i&&(r.places=r.places.slice(0,Math.max(0,i)));let e=void 0!==r.places?r.places:n[1]&&n[1].lastIndexOf("0")+1;+e>o.length&&(l[1]=o.padEnd(Number(e),"0")),+s<o.length&&(l[1]=o.slice(0,Math.max(0,Number(s))))}else l[1]&&l.pop();let a=n[0].replace(",",""),u=a.indexOf("0");-1!==u&&((u=a.length-u)>l[0].length&&(l[0]=l[0].padStart(u,"0")),a.includes("#")||(l[0]=l[0].slice(-u)));let h,d,c=n[0].lastIndexOf(",");if(-1!==c){h=n[0].length-c-1;let e=n[0].slice(0,c);-1!==(c=e.lastIndexOf(","))&&(d=e.length-c-1)}let f=[];for(let e=l[0];e;){let t=e.length-h;f.push(t>0?e.slice(Math.max(0,t)):e),e=t>0?e.slice(0,t):"",d&&(h=d,d=void 0)}return l[0]=f.reverse().join(r.group||","),l.join(r.decimal||".")}(e,o[0],{decimal:i,group:n,places:r.places,round:r.round}))}(e,n,t)}let a=/[#0,]*[#0](?:\.0*#*)?/;function u(e){let t=l((e=e||{}).locale),r=e.pattern||t.pattern,i=t.group,s=t.decimal,o=1;if(r.includes("%"))o/=100;else if(r.includes("‰"))o/=1e3;else if(r.includes("\xa4"))throw Error("currency notation not supported");let u=r.split(";");return 1===u.length&&u.push("-"+u[0]),{regexp:c(u,t=>(t="(?:"+(0,n.Cj)(t,".")+")").replace(a,t=>{let r={signed:!1,separator:e.strict?i:[i,""],fractional:e.fractional,decimal:s,exponent:!1},n=t.split("."),l=e.places;1===n.length&&1!==o&&(n[1]="###"),1===n.length||0===l?r.fractional=!1:(void 0===l&&(l=e.pattern?n[1].lastIndexOf("0")+1:1/0),l&&null==e.fractional&&(r.fractional=!0),!e.places&&+l<n[1].length&&(l+=","+n[1].length),r.places=l);let a=n[0].split(",");return a.length>1&&(r.groupSize=a.pop().length,a.length>1&&(r.groupSize2=a.pop().length)),"("+function(e){"places"in(e=e||{})||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!String(e.places).startsWith("0")||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);let t=d(e),r=c(e.fractional,t=>{let r="";return t&&0!==e.places&&(r="\\"+e.decimal,e.places===1/0?r="(?:"+r+"\\d+)?":r+="\\d{"+e.places+"}"),r},!0),n=t+r;return r&&(n="(?:(?:"+n+")|(?:"+r+"))"),n+c(e.exponent,t=>t?"([eE]"+d({signed:e.eSigned})+")":"")}(r)+")"}),!0).replaceAll(/[\xa0 ]/g,"[\\s\\xa0]"),group:i,decimal:s,factor:o}}function h(e,t){let r=u(t),n=RegExp("^"+r.regexp+"$").exec(e);if(!n)return NaN;let i=n[1];if(!n[1]){if(!n[2])return NaN;i=n[2],r.factor*=-1}return Number(i=i.replaceAll(RegExp("["+r.group+"\\s\\xa0]","g"),"").replace(r.decimal,"."))*r.factor}function d(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",c(e.signed,e=>e?"[-+]":"",!0)+c(e.separator,t=>{if(!t)return"(?:\\d+)";" "===(t=(0,n.Cj)(t))?t="\\s":"\xa0"===t&&(t="\\s\\xa0");let r=e.groupSize,i=e.groupSize2;if(i){let e="(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*["+t+"]\\d{"+r+"})";return r-i>0?"(?:"+e+"|(?:0|[1-9]\\d{0,"+(r-1)+"}))":e}return"(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+t+"]\\d{"+r+"})*)"},!0)}let c=(e,t,r)=>{if(!Array.isArray(e))return t(e);let n=[];for(let r=0;r<e.length;r++)n.push(t(e[r]));return f(n.join("|"),!!r)},f=(e,t)=>"("+(t?"?:":"")+e+")"},28386:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Z});var n=r(39166),i=r(83610),s=r(67039),l=r(32391),o=r(61939),a=r(92753),u=r(90525),h=r(65111),d=r(91463),c=r(46493),f=r(71760),m=r(6322),p=r(82795),g=r(56599),y=r(86925),_=r(11064),I=r(76461),x=r(41359),b=r(18914),N=r(39265),w=r(94884);let F=/^\s*"([\S\s]*)"\s*$/,M=/""/g,T=[","," ",";","|","	"];function*v(e,t,r){let n=0;for(;n<=e.length;){let i=e.indexOf(t,n),s=e.slice(n,i>-1?i:void 0);n+=s.length+t.length,r&&!s.trim()||(yield s)}}function A(e){let t=e.includes("\r\n")?"\r\n":"\n";return v(e,t,!0)}function*B(e,t,r,n=()=>Object.create(null)){let i=A(e);i.next();let s="",l="",o=0,a=n(),u=0;e:for(let e of i){for(let i of v(e,r,!1))if(s+=l+i,l="",(o+=O(i))%2==0){if(o>0){let e=F.exec(s);if(!e){a=n(),u=0,s="",o=0;continue e}a[t[u]]=e[1].replaceAll(M,'"'),u++}else a[t[u]]=s,u++;s="",o=0}else l=r;0===o?(yield a,a=n(),u=0):l="\n"}}function E(e,t){let r=S(e,t).filter(e=>null!=e),n=r.map(e=>(0,N.rS)(e));for(let e=n.length-1;e>=0;e--)n[e]||(n.splice(e,1),r.splice(e,1));return{names:n,aliases:r}}function S(e,t){if(!e?.length)return[];let r=[],n="",i="",s=0;for(let l of v(e,t,!1))if(n+=i+l,i="",(s+=O(l))%2==0){if(s>0){let e=F.exec(n);e&&r.push(e[1].replaceAll(M,'"'))}else r.push(n);n="",s=0}else i=t;return r}function O(e){let t=0,r=0;for(r=e.indexOf('"',r);r>=0;)t++,r=e.indexOf('"',r+1);return t}let Y=function(){let e=(0,b.B)(),t=RegExp("^"+e.regexp+"$"),r=RegExp("["+e.group+"\\s\\xa0]","g"),n=e.factor;return i=>{let s=t.exec(i);if(e.factor=n,!s)return NaN;let l=s[1];if(!s[1]){if(!s[2])return NaN;l=s[2],e.factor*=-1}return(l=l.replace(r,"").replace(e.decimal,"."))*e.factor}}();var C=r(17135),q=r(47823),G=r(48271),j=r(93682);let R=(0,C.F0)("esriGeometryPoint"),k=["csv"],P=[0,0];class X{constructor(e,t){this.x=e,this.y=t}}class Z{constructor(){this._queryEngine=null,this._snapshotFeatures=async e=>{let t=await this._fetch(e);return this._createFeatures(t)}}destroy(){this._queryEngine?.destroy(),this._queryEngine=null}async load(e,t={}){this._loadOptions=e;let[r]=await Promise.all([this._fetch(t.signal),this._checkProjection(e?.parsingOptions?.spatialReference)]),n=function(e,t){let r=t.parsingOptions||{},n={delimiter:r.delimiter,layerDefinition:null,locationInfo:{latitudeFieldName:r.latitudeField,longitudeFieldName:r.longitudeField}},i=n.layerDefinition={name:(0,u.e7)(t.url,k)||"csv",dateFieldsTimeReference:{timeZoneIANA:j.n$},drawingInfo:R,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:r.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:r.spatialReference||{wkid:4326}}},o=A(e),a=o.next().value?.trim(),h=o.next().value?.trim();if(!a)throw new l.A("csv-layer:empty-csv","CSV is empty",{csv:e});let{delimiter:d,locationInfo:c}=function(e,t,r){e=e.trim(),t=t?.trim();let n=[];for(let i of Array.from(new Set([r?.delimiter,...T])).filter(e=>null!=e)){let r=S(e,i).length,s=S(t,i).length??r;r>1&&n.push({weight:Math.min(r,s),delimiter:i})}let i=n.sort(({weight:e},{weight:t})=>t-e).map(({delimiter:e})=>e);for(let t of i){let n=E(e,t).names,i=(0,w.i_)(n,r?.longitudeField,r?.latitudeField);if(i.longitudeFieldName&&i.latitudeFieldName)return{delimiter:t,locationInfo:i}}return{delimiter:i[0],locationInfo:null}}(a,h,r);if(!d)throw new l.A("csv-layer:invalid-delimiter","Unable to detect the delimiter from CSV",{firstLine:a,secondLine:h,parsingOptions:r});if(!c)throw new l.A("csv-layer:location-fields-not-found","Unable to identify latitude and longitude fields from the CSV file",{firstLine:a,secondLine:h,parsingOptions:r});n.locationInfo=c,n.delimiter=d;let{names:f,aliases:m}=E(a,d),p=function(e,t,r,n,i){let l=[],o=B(e,r,t),a=[];for(let e of o){if(10===a.length)break;a.push(e)}for(let e=0;e<r.length;e++){let t=r[e],o=n[e];if(t===i.longitudeFieldName||t===i.latitudeFieldName)l.push({name:t,type:"esriFieldTypeDouble",alias:o});else{let e;switch(function(e){if(!e.length)return"string";let t=/[^+\-.,0-9]/;return e.map(e=>{if(""!==e){if(!t.test(e)){let t=Y(e);if(!isNaN(t))return/[.,]/.test(e)||!Number.isInteger(t)||t>0xccd569f||t<-0xccd56a0?"double":"integer";if(e.includes("E")&&(!Number.isNaN(t=Number(e))||e.includes(",")&&!Number.isNaN(t=Number(e=e.replace(",",".")))))return"double"}return(0,s.Cq)(e)?"date":"string"}}).reduce((e,t)=>void 0===e?t:void 0===t?e:e===t?t:"string"===e||"string"===t?"string":"double"===e||"double"===t?"double":void 0)}(a.map(e=>e[t]))){case"integer":e="esriFieldTypeInteger";break;case"double":e="esriFieldTypeDouble";break;case"date":e="esriFieldTypeDate";break;default:e="esriFieldTypeString"}l.push({name:t,type:e,alias:o,length:(0,N._b)(e)})}}return l}(e,n.delimiter,f,m,n.locationInfo);if(r.fields?.length){let e=new q.A(r.fields);for(let t of p){let r=e.get(t.name);r&&Object.assign(t,r)}}if(!p.some(e=>"esriFieldTypeOID"===e.type&&(i.objectIdField=e.name,!0))){let e={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1};i.objectIdField=e.name,p.unshift(e)}i.fields=p;let g=new q.A(i.fields);if(n.locationInfo&&(n.locationInfo.latitudeFieldName=g.get(n.locationInfo.latitudeFieldName).name,n.locationInfo.longitudeFieldName=g.get(n.locationInfo.longitudeFieldName).name),i.timeInfo){let e=i.timeInfo;if(e.startTimeField){let t=g.get(e.startTimeField);t?(e.startTimeField=t.name,t.type="esriFieldTypeDate"):e.startTimeField=null}if(e.endTimeField){let t=g.get(e.endTimeField);t?(e.endTimeField=t.name,t.type="esriFieldTypeDate"):e.endTimeField=null}if(e.trackIdField){let t=g.get(e.trackIdField);e.trackIdField=t?t.name:null}e.startTimeField||e.endTimeField||(i.timeInfo=null)}return n}(r,e);this._locationInfo=n.locationInfo,this._delimiter=n.delimiter,this._queryEngine=this._createQueryEngine(n);let i=await this._createFeatures(r);this._queryEngine.featureStore.addMany(i);let{fullExtent:o,timeExtent:a}=await this._queryEngine.fetchRecomputedExtents();if(n.layerDefinition.extent=o,a){let{start:e,end:t}=a;n.layerDefinition.timeInfo.timeExtent=[e,t]}return n}async applyEdits(){throw new l.A("csv-layer:editing-not-supported","applyEdits() is not supported on CSVLayer")}async queryFeatures(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return await this._waitSnapshotComplete(),(await this._queryEngine.executeQueryForIds(e,t.signal)).filter(G.Et)}async queryExtent(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(e,t.signal)}async querySnapping(e,t={}){return await this._waitSnapshotComplete(),(0,y.J)(this._queryEngine,e,t.signal)}async queryAttributeBins(e,t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeAttributeBinsQuery(e,t.signal)}async refresh(e){this._loadOptions.customParameters=e,this._snapshotTask?.abort(),this._snapshotTask=(0,i.UT)(this._snapshotFeatures),this._snapshotTask.promise.then(e=>{this._queryEngine.featureStore.clear(),e&&this._queryEngine.featureStore.addMany(e)},e=>{this._queryEngine.featureStore.clear(),(0,a.zf)(e)||o.A.getLogger("esri.layers.CSVLayer").error(new l.A("csv-layer:refresh","An error occurred during refresh",{error:e}))}),await this._waitSnapshotComplete();let{fullExtent:t,timeExtent:r}=await this._queryEngine.fetchRecomputedExtents();return{extent:t,timeExtent:r}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _fetch(e){let{url:t,customParameters:r}=this._loadOptions;if(!t)throw new l.A("csv-layer:invalid-source","url not defined");let i=(0,u.An)(t);return(await (0,n.A)(i.path,{query:{...i.query,...r},responseType:"text",signal:e})).data}_createQueryEngine(e){let{objectIdField:t,fields:r,extent:n,timeInfo:i}=e.layerDefinition,s=new _.A({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1});return new x.do({fieldsIndex:q.A.fromLayerJSON({fields:r,dateFieldsTimeReference:{timeZoneIANA:j.n$}}),geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,timeInfo:i,objectIdField:t,spatialReference:n.spatialReference||{wkid:4326},featureStore:s})}async _createFeatures(e){let{latitudeFieldName:t,longitudeFieldName:r}=this._locationInfo,{objectIdField:n,fieldsIndex:i,spatialReference:l}=this._queryEngine,o=[],a=[],u=i.fields.filter(e=>e.name!==n).map(e=>e.name),y=0,_={};for(let e of i.fields)if("esriFieldTypeOID"!==e.type&&"esriFieldTypeGlobalID"!==e.type){let t=(0,N.lD)(e);void 0!==t&&(_[e.name]=t)}for(let l of B(e,u,this._delimiter,(0,C.Vx)(_,n))){let e=this._parseCoordinateValue(l[t]),u=this._parseCoordinateValue(l[r]);if(null!=u&&null!=e&&!isNaN(e)&&!isNaN(u)){for(let n in l[t]=e,l[r]=u,l)if(n!==t&&n!==r)if(i.isDateField(n))l[n]=(0,s._U)(l[n]);else if(i.isNumericField(n)){let e=Y(l[n]);isNaN(e)?l[n]=null:l[n]=e}else null!=l[n]&&(l[n]=JSON.parse(JSON.stringify(l[n])));l[n]=y,y++,o.push(new X(u,e)),a.push(l)}}if(!(0,f.aI)({wkid:4326},l))if((0,f.K8)(l))for(let e of o)[e.x,e.y]=(0,m.je)(e.x,e.y,P);else o=(0,h.projectMany)(c.g,o,d.A.WGS84,l,null,null);let I=[];for(let e=0;e<o.length;e++){let{x:t,y:r}=o[e],i=a[e];i[n]=e+1,I.push(new p.Om(new g.A([],[t,r]),i,null,i[n]))}return I}_parseCoordinateValue(e){if(null==e||""===e)return null;let t=Y(e);return(isNaN(t)||Math.abs(t)>181)&&(t=parseFloat(e)),t}async _checkProjection(e){try{await (0,I.Nk)(f.KK,e)}catch{throw new l.A("csv-layer:projection-not-supported","Projection not supported")}}}},29499:(e,t,r)=>{r.d(t,{F:()=>o});var n=r(57845),i=r(2370),s=r(84766);let l={minX:0,minY:0,maxX:0,maxY:0};class o{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new i.w(9,(0,n.A)("esri-csp-restrictions")?e=>({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){let e=Array(this._idByBounds.size),t=0;this._idByBounds.forEach((r,n)=>{e[t++]=n}),this._indexInvalid=!1,this._index.clear(),this._index.load(e)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(e=>this._idByBounds.has(e))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;let e=(0,s.Ie)();for(let t of this._boundsById.values())t&&(e[0]=Math.min(t[0],e[0]),e[1]=Math.min(t[1],e[1]),e[2]=Math.max(t[2],e[2]),e[3]=Math.max(t[3],e[3]));return e}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(e){let t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))}forEachInBounds(e,t){var r;this._loadIndex(),r=this._index,l.minX=e[0],l.minY=e[1],l.maxX=e[2],l.maxY=e[3],r.search(l,e=>t(this._idByBounds.get(e)))}get(e){return this._boundsById.get(e)}has(e){return this._boundsById.has(e)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(e,t){if(!this._indexInvalid){let t=this._boundsById.get(e);t&&(this._index.remove(t),this._idByBounds.delete(t))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},54805:(e,t,r)=>{r.d(t,{A:()=>n});class n{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){let e=new n;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}}},56599:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(94264);class i{constructor(e=[],t=[]){this.lengths=e??[],this.coords=t??[]}static fromJSON(e){return new i(e.lengths,e.coords)}static fromRect(e){let[t,r,n,s]=e,l=n-t,o=s-r;return new i([5],[t,r,l,0,0,o,-l,0,0,-o])}get isPoint(){return 0===this.lengths.length&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((e,t)=>e+t)}get usedMemory(){return 64+(0,n.Qf)(this.lengths,this.coords)}area(){let e=0,t=0;if(!this.lengths.length)return 0;for(let r=0;r<this.lengths.length;r++){let n=this.lengths[r];if(n<3)continue;let i=this.coords[2*t],s=this.coords[2*t+1];for(let r=1;r<n;r+=1){let n=this.coords[2*(r+t)],l=this.coords[2*(r+t)+1];e+=-.5*(n-i)*(l+s),i=n,s=l}t+=n}return e}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){let n=this.lengths[r];for(let r=0;r<n;r++)e(this.coords[2*(r+t)],this.coords[2*(r+t)+1]);t+=n}}deltaDecode(){let e=this.clone(),{coords:t,lengths:r}=e,n=0;for(let e of r){for(let r=1;r<e;r++)t[2*(n+r)]+=t[2*(n+r)-2],t[2*(n+r)+1]+=t[2*(n+r)-1];n+=e}return e}clone(e){if(0===this.lengths.length)return new i([],[this.coords[0],this.coords[1]]);let t=(0===this.lengths.length?1:this.lengths.reduce((e,t)=>e+t))*2,r=this.coords.slice(0,t);return e?(e.set(r),new i(this.lengths,e)):new i(Array.from(this.lengths),Array.from(r))}}},60729:(e,t,r)=>{r.d(t,{B2:()=>b,BW:()=>R,Ch:()=>ei,DF:()=>M,Di:()=>V,E2:()=>z,IE:()=>x,Nl:()=>et,Q4:()=>es,Rk:()=>el,Ux:()=>Q,Ye:()=>X,ZF:()=>H,eU:()=>Z,eY:()=>K,hK:()=>eo,jH:()=>ee,jQ:()=>en,kz:()=>er,oN:()=>U,q3:()=>W,qK:()=>G,qN:()=>q,z5:()=>P,zv:()=>$});var n=r(32391),i=r(61939),s=r(40941),l=r(42845),o=r(84766),a=r(31789),u=r(82795),h=r(54805),d=r(56599);function c(e,t){return e?t?4:3:t?3:2}let f=()=>i.A.getLogger("esri.layers.graphics.featureConversionUtils"),m={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryMultiPatch:3,esriGeometryEnvelope:0},p=(e,t,r,n,i,s)=>{e[r]=i,e[r+1]=s},g=(e,t,r,n,i,s)=>{e[r]=i,e[r+1]=s,e[r+2]=t[n+2]},y=(e,t,r,n,i,s)=>{e[r]=i,e[r+1]=s,e[r+2]=t[n+3]},_=(e,t,r,n,i,s)=>{e[r]=i,e[r+1]=s,e[r+2]=t[n+2],e[r+3]=t[n+3]};function I(e,t,r,n){if(e){if(r)return t&&n?_:g;if(t&&n)return y}else if(t&&n)return g;return p}function x({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function b({scale:e,translate:t},r){return Math.round((t[1]-r)/e[1])}function N({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function w({scale:e,translate:t},r){return Math.round((r-t[1])/e[1])}function F({scale:e,translate:t},r,n){return r*e[n]+t[n]}function M(e,t,r){return e?t?r?O(e):A(e):r?E(e):T(e):null}function T(e){let t=e.coords;return{x:t[0],y:t[1]}}function v(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function A(e){let t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function B(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function E(e){let t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function S(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function O(e){let t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function Y(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function C(e,t){return e&&t?Y:e?B:t?S:v}function q(e,t,r=C(null!=t.z,null!=t.m)){return r(e,t)}function G(e,t,r){if(null==e)return null;let n=c(t,r),i=[];for(let t=0;t<e.coords.length;t+=n){let r=[];for(let i=0;i<n;i++)r.push(e.coords[t+i]);i.push(r)}return t?r?{points:i,hasZ:t,hasM:r}:{points:i,hasZ:t}:r?{points:i,hasM:r}:{points:i}}function j(e,t,r=c(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;let n=e.coords,i=0;for(let e of t.points)for(let t=0;t<r;t++)n[i++]=e[t];return e}function R(e,t,r){if(!e)return null;let n=c(t,r),{coords:i,lengths:s}=e,l=[],o=0;for(let e of s){let t=[];for(let r=0;r<e;r++){let e=[];for(let t=0;t<n;t++)e.push(i[o++]);t.push(e)}l.push(t)}return t?r?{paths:l,hasZ:t,hasM:r}:{paths:l,hasZ:t}:r?{paths:l,hasM:r}:{paths:l}}function k(e,t,r=c(t.hasZ,t.hasM)){let{lengths:n,coords:i}=e,s=0;for(let e of t.paths){for(let t of e)for(let e=0;e<r;e++)i[s++]=t[e];n.push(e.length)}return e}function P(e,t,r){if(!e)return null;let n=c(t,r),{coords:i,lengths:s}=e,l=[],o=0;for(let e of s){let t=[];for(let r=0;r<e;r++){let e=[];for(let t=0;t<n;t++)e.push(i[o++]);t.push(e)}l.push(t)}return t?r?{rings:l,hasZ:t,hasM:r}:{rings:l,hasZ:t}:r?{rings:l,hasM:r}:{rings:l}}function X(e,t,r=t.hasZ,n=t.hasM){return Z(e,t.rings,r,n)}function Z(e,t,r,n){let i=c(r,n),{lengths:s,coords:l}=e,o=0;for(let r of(ea(e),t)){for(let e of r)for(let t=0;t<i;t++)l[o++]=e[t];s.push(r.length)}return e}let L=[],D=[];function z(e,t,r,n,i){L[0]=e;let[s]=V(D,L,t,r,n,i);return eu(L),eu(D),s}function V(e,t,r,i,s,l){if(eu(e),!r){for(let r of t){let t=l?r.attributes[l]:void 0;e.push(new u.Om(null,r.attributes,null,t))}return e}switch(r){case"esriGeometryPoint":let o=C(i,s);for(let{geometry:r,attributes:n}of t){let t=null!=r?o(new d.A,r):null;e.push(new u.Om(t,n,null,l?n[l]:void 0))}break;case"esriGeometryMultipoint":let a=c(i,s);for(let{geometry:r,attributes:n}of t){let t=null!=r?j(new d.A,r,a):null;e.push(new u.Om(t,n,null,l?n[l]:void 0))}break;case"esriGeometryPolyline":let h=c(i,s);for(let{geometry:r,attributes:n,centroid:i}of t){let t=null!=r?k(new d.A,r,h):null,s=null!=i?q(new d.A,i):null;e.push(new u.Om(t,n,s,l?n[l]:void 0))}break;case"esriGeometryPolygon":case"esriGeometryMultiPatch":for(let{geometry:r,centroid:n,attributes:o}of t){let t=null!=r?X(new d.A,r,i,s):null,a=l?o[l]:void 0;null!=n?e.push(new u.Om(t,o,v(new d.A,n),a)):e.push(new u.Om(t,o,null,a))}break;default:f().error("convertToFeatureSet:unknown-geometry",new n.A(`Unable to parse unknown geometry type '${r}'`)),eu(e)}return e}function U(e,t,r,n){D[0]=e,J(L,D,t,r,n);let i=L[0];return eu(L),eu(D),i}function Q(e,t,r){if(null==e)return null;let i=new d.A;return("hasZ"in e&&null==t&&(t=e.hasZ),"hasM"in e&&null==r&&(r=e.hasM),(0,a.fT)(e))?C(null!=t?t:null!=e.z,null!=r?r:null!=e.m)(i,e):(0,a.Bi)(e)?X(i,e,t,r):(0,a.Rg)(e)?k(i,e,c(t,r)):(0,a.U9)(e)?j(i,e,c(t,r)):void f().error("convertFromGeometry:unknown-geometry",new n.A(`Unable to parse unknown geometry type '${e}'`))}function $(e,t,r,i){let s=e&&("coords"in e?e:e.geometry);if(null==s)return null;switch(t){case"esriGeometryPoint":{let e=T;return r&&i?e=O:r?e=A:i&&(e=E),e(s)}case"esriGeometryMultipoint":return G(s,r,i);case"esriGeometryPolyline":return R(s,r,i);case"esriGeometryPolygon":return P(s,r,i);default:return f().error("convertToGeometry:unknown-geometry",new n.A(`Unable to parse unknown geometry type '${t}'`)),null}}function J(e,t,r,i,s){if(eu(e),null==r){for(let r of t)e.push({attributes:r.attributes});return e}switch(r){case"esriGeometryPoint":let l=T;for(let r of(i&&s?l=O:i?l=A:s&&(l=E),t)){let{geometry:t,attributes:n}=r,i=null!=t?l(t):null;e.push({attributes:n,geometry:i})}break;case"esriGeometryMultipoint":for(let{geometry:r,attributes:n}of t)e.push({attributes:n,geometry:null!=r?G(r,i,s):null});break;case"esriGeometryPolyline":for(let{geometry:r,attributes:n}of t)e.push({attributes:n,geometry:null!=r?R(r,i,s):null});break;case"esriGeometryPolygon":for(let{geometry:r,attributes:n,centroid:l}of t){let t=null!=r?P(r,i,s):null;if(null!=l){let r=T(l);e.push({attributes:n,centroid:r,geometry:t})}else e.push({attributes:n,geometry:t})}break;default:f().error("convertToFeatureSet:unknown-geometry",new n.A(`Unable to parse unknown geometry type '${r}'`))}return e}function H(e){let{objectIdFieldName:t,spatialReference:r,transform:n,fields:i,hasM:s,hasZ:l,features:o,geometryType:a,exceededTransferLimit:u,uniqueIdField:h,queryGeometry:d,queryGeometryType:c}=e,f={features:J([],o,a,l,s),fields:i,geometryType:a,objectIdFieldName:t,spatialReference:r,uniqueIdField:h,queryGeometry:$(d,c,!1,!1)};return n&&(f.transform=n),u&&(f.exceededTransferLimit=u),s&&(f.hasM=s),l&&(f.hasZ=l),f}function W(e,t){let r=new h.A,{hasM:i,hasZ:s,features:l,objectIdFieldName:o,spatialReference:a,geometryType:u,exceededTransferLimit:d,transform:c,fields:m}=e;return m&&(r.fields=m),r.geometryType=u??null,r.objectIdFieldName=o??t??null,r.spatialReference=a??null,r.objectIdFieldName?(l&&V(r.features,l,u,s,i,r.objectIdFieldName),d&&(r.exceededTransferLimit=d),i&&(r.hasM=i),s&&(r.hasZ=s),c&&(r.transform=c)):f().error(new n.A("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),r}function K(e){let{transform:t,features:r,hasM:n,hasZ:i}=e;if(!t)return e;for(let e of r)null!=e.geometry&&ei(e.geometry,e.geometry,n,i,t),null!=e.centroid&&ei(e.centroid,e.centroid,n,i,t);return e.transform=null,e}function ee(e,t){let{geometryType:r,features:n,hasM:i,hasZ:s}=t;if(!e)return t;for(let t=0;t<n.length;t++){let l=n[t],o=l.weakClone();o.geometry=new d.A,et(o.geometry,l.geometry,i,s,r,e),l.centroid&&(o.centroid=new d.A,et(o.centroid,l.centroid,i,s,"esriGeometryPoint",e)),n[t]=o}return t.transform=e,t}function et(e,t,r,n,i,s,l=r,o=n){if(ea(e),!t?.coords.length)return null;let a=m[i],{coords:u,lengths:h}=t,d=c(r,n),f=c(r&&l,n&&o),p=I(r,n,l,o);if(!h.length)return p(e.coords,u,0,0,x(s,u[0]),b(s,u[1])),ea(e,d,0),e;let g,y,_,N,w=0,F=0,M=0;for(let t of h){if(t<a)continue;let r=0;F=M,_=g=x(s,u[w]),N=y=b(s,u[w+1]),p(e.coords,u,F,w,_,N),r++,w+=d,F+=f;for(let n=1;n<t;n++,w+=d)_=x(s,u[w]),N=b(s,u[w+1]),_===g&&N===y||(p(e.coords,u,F,w,_-g,N-y),F+=f,r++,g=_,y=N);r>=a&&(e.lengths.push(r),M=F)}return eu(e.coords,M),e.coords.length?e:null}function er(e,t,r,n,i,s,l=r,o=n){if(ea(e),!t?.coords.length)return null;let a=m[i],{coords:u,lengths:h}=t,d=c(r,n),f=c(r&&l,n&&o),p=I(r,n,l,o);if(!h.length)return p(e.coords,u,0,0,u[0],u[1]),ea(e,d,0),e;let g=0,y=s*s;for(let t of h){if(t<a){g+=t*d;continue}let r=e.coords.length/f,n=g,i=g+(t-1)*d;p(e.coords,u,e.coords.length,n,u[n],u[n+1]),function e(t,r,n,i,s,l,o){let a,u=i,h=0;for(let e=l+n;e<o;e+=n)(a=function(e,t,r,n){let i=e[t],s=e[t+1],l=e[r],o=e[r+1],a=e[n],u=e[n+1],h=l,d=o,c=a-h,f=u-d;if(0!==c||0!==f){let e=((i-h)*c+(s-d)*f)/(c*c+f*f);e>1?(h=a,d=u):e>0&&(h+=c*e,d+=f*e)}return(c=i-h)*c+(f=s-d)*f}(r,e,l,o))>u&&(h=e,u=a);u>i&&(h-l>n&&e(t,r,n,i,s,l,h),s(t,r,t.length,h,r[h],r[h+1]),o-h>n&&e(t,r,n,i,s,h,o))}(e.coords,u,d,y,p,n,i),p(e.coords,u,e.coords.length,i,u[i],u[i+1]);let s=e.coords.length/f-r;s>=a?e.lengths.push(s):eu(e.coords,r*f),g+=t*d}return e.coords.length?e:null}function en(e,t,r,n){if(!t?.coords?.length)return null;let i=c(r,n),s=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY;if(t&&t.coords){let e=t.coords;for(let t=0;t<e.length;t+=i){let r=e[t],n=e[t+1];s=Math.min(s,r),u=Math.max(u,r),a=Math.min(a,n),h=Math.max(h,n)}}return(0,l.is)(e)?(0,l.BI)(e,s,a,u,h):(0,o.fA)(s,a,u,h,e),e}function ei(e,t,r,n,i){let{coords:l,lengths:o}=t,a=c(r,n);if(!l.length)return e!==t&&ea(e),e;(0,s.Lw)(i);let{originPosition:u,scale:h,translate:d}=i;eh.originPosition=u;let f=eh.scale;f[0]=h[0]??1,f[1]=-(h[1]??1),f[2]=h[2]??1,f[3]=h[3]??1;let m=eh.translate;if(m[0]=d[0]??0,m[1]=d[1]??0,m[2]=d[2]??0,m[3]=d[3]??0,!o.length){for(let t=0;t<a;++t)e.coords[t]=function({scale:e,translate:t},r,n){return r*e[n]+t[n]}(eh,l[t],t);return e!==t&&ea(e,a,0),e}let p=0;for(let t=0;t<o.length;t++){let r=o[t];e.lengths[t]=r;for(let t=0;t<a;++t)e.coords[p+t]=function({scale:e,translate:t},r,n){return r*e[n]+t[n]}(eh,l[p+t],t);let n=e.coords[p],i=e.coords[p+1];p+=a;for(let t=1;t<r;t++,p+=a){n+=l[p]*f[0],i+=l[p+1]*f[1],e.coords[p]=n,e.coords[p+1]=i;for(let t=2;t<a;++t)e.coords[p+t]=function({scale:e,translate:t},r,n){return r*e[n]+t[n]}(eh,l[p+t],t)}}return e!==t&&ea(e,l.length,o.length),e}function es(e,t,r,n,i,s){if(ea(e),e.lengths.push(...t.lengths),r===i&&n===s)for(let r=0;r<t.coords.length;r++)e.coords.push(t.coords[r]);else{let l=c(r,n),o=I(r,n,i,s),a=t.coords;for(let t=0;t<a.length;t+=l)o(e.coords,a,e.coords.length,t,a[t],a[t+1])}return e}function el(e,t){let{coords:r,lengths:n}=e,i=0,s=0;for(let e=0;e<n.length;e++){let l=n[e];s+=function(e,t,r,n){let i=0,s=e[n*t],l=e[n*(t+1)];for(let o=1;o<r;o++){let r=s+e[n*(t+o)],a=l+e[n*(t+o)+1],u=(r-s)*(a+l);s=r,l=a,i+=u}return .5*i}(r,i,l,t),i+=l}return Math.abs(s)}function eo(e,t,r,n,i){let s=c(n,i);if(!e.lengths.length){if(e.coords.length<2)return null;let[r,n]=e.coords,i=N(t,r),s=w(t,n);return new d.A([],[i,s])}let l=new d.A([],[0,0]),o=m[r],a="esriGeometryPolygon"===r||"esriGeometryPolyline"===r,u=0,h=0;for(let r=0;r<e.lengths.length;r++){let n=e.lengths[r],i=h,d=N(t,e.coords[s*u]),c=w(t,e.coords[s*u+1]);l.coords[h++]=d,l.coords[h++]=c;let m=0,g=0,y=1;for(let r=1;r<n;r++){let n=N(t,e.coords[s*(r+u)]),i=w(t,e.coords[s*(r+u)+1]);if(n!==d||i!==c){var f,p;let e=n-d,t=i-c;a&&0==(f=m)*t-e*(p=g)&&f*e+p*t>0?(l.coords[h-2]+=e,l.coords[h-1]+=t,d+=e,c+=t):(l.coords[h++]=n,l.coords[h++]=i,d=n,c=i,m=e,g=t,y+=1)}}y<o?h=i:l.lengths.push(y),u+=n}return 0===l.lengths.length?null:l}function ea(e,t=0,r=0){eu(e.lengths,r),eu(e.coords,t)}function eu(e,t=0){e.length!==t&&(e.length=t)}let eh={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]}},67039:(e,t,r)=>{function n(e){return null!=o(e)||null!=l(e)}function i(e){return a.test(e)}function s(e){return o(e)??l(e)}function l(e){let t=new Date(e);return!function(e,t){if(Number.isNaN(e.getTime()))return!1;let r=!0;if(h&&/\d+\W*$/.test(t)){let e=t.match(/[a-zA-Z]{2,}/);if(e){let t=!1,n=0;for(;!t&&n<=e.length;)t=!u.test(e[n]),n++;r=!t}}return r}(t,e)?null:Number.isNaN(t.getTime())?null:t.getTime()-6e4*t.getTimezoneOffset()}function o(e){let t,r=a.exec(e);if(!r?.groups)return null;let n=r.groups,i=+n.year,s=n.month-1,l=+n.day,o=+(n.hours??"0"),u=+(n.minutes??"0"),h=+(n.seconds??"0");if(o>23||u>59||h>59)return null;let d=n.ms??"0",c=d?+d.padEnd(3,"0").slice(0,3):0;if(n.isUTC||!n.offsetSign)t=Date.UTC(i,s,l,o,u,h,c);else{let e=+n.offsetHours,r=+n.offsetMinutes;t=6e4*("+"===n.offsetSign?-1:1)*(60*e+r)+Date.UTC(i,s,l,o,u,h,c)}return Number.isNaN(t)?null:t}r.d(t,{Br:()=>i,Cq:()=>n,_U:()=>s});let a=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/,u=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,h=!Number.isNaN(new Date("technology 10").getTime())},82795:(e,t,r)=>{r.d(t,{N3:()=>o,Om:()=>l});var n=r(94264),i=r(11506),s=r(56599);class l{constructor(e=null,t={},r,n,i=0){this.geometry=e,this.attributes=t,this.centroid=r,this.objectId=n,this.displayId=i}static fromJSON(e){let t=e.geometry?s.A.fromJSON(e.geometry):null,r=e.centroid?s.A.fromJSON(e.centroid):null,n=e.objectId;return new l(t,e.attributes,r,n)}weakClone(){let e=new l(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e}clone(){let e=new l(this.geometry?.clone(),{...this.attributes},this.centroid?.clone(),this.objectId);return e.displayId=this.displayId,e}ensureCentroid(e){return this.centroid??=(0,i.Q)(new s.A,this.geometry,e.hasZ,e.hasM),this.centroid}get usedMemory(){return 128+(0,n.lM)(this.attributes)+(this.geometry?.usedMemory??0)}}function o(e){return!!e.geometry?.coords?.length}},86925:(e,t,r)=>{r.d(t,{J:()=>m});var n=r(33715),i=r(92753),s=r(31789),l=r(25606),o=r(71760),a=r(76461),u=r(41359),h=r(90804),d=r(91738),c=r(6515),f=r(40513);async function m(e,t,r){let f=(0,i.Mq)(r),{point:m,distance:g,returnEdge:y,vertexMode:_}=t;if(!y&&"none"===_)return{candidates:[]};let I=(0,n.o8)(t.query);I=await e.schedule(()=>(0,d.T2)(I,e.definitionExpression,e.spatialReference),f),I=await e.reschedule(()=>(0,c.B4)(I,{availableFields:e.availableFields,fieldsIndex:e.fieldsIndex,geometryType:e.geometryType,spatialReference:e.spatialReference}),f);let x=!(0,o.aI)(m.spatialReference,e.spatialReference);x&&await (0,a.Nk)(m.spatialReference,e.spatialReference);let b="number"==typeof g?g:g.x,N="number"==typeof g?g:g.y,w={xmin:m.x-b,xmax:m.x+b,ymin:m.y-N,ymax:m.y+N,spatialReference:m.spatialReference},F=x?(0,a.Cv)(w,e.spatialReference):w;if(!F)return{candidates:[]};let M=(await (0,l.el)((0,s.rS)(m),null,{signal:f}))[0],T=(await (0,l.el)((0,s.rS)(F),null,{signal:f}))[0];if(null==M||null==T)return{candidates:[]};let v=new h.G(await e.reschedule(()=>e.searchFeatures((0,u.ux)(T.toJSON())),f),I,e);await e.reschedule(()=>e.executeObjectIdsQuery(v),f),await e.reschedule(()=>e.executeTimeQuery(v),f),await e.reschedule(()=>e.executeAttributesQuery(v),f),await e.reschedule(()=>p(e,v,f),f);let A=M.toJSON(),B=x?(0,a.Cv)(A,e.spatialReference):A,E=x?Math.max(F.xmax-F.xmin,F.ymax-F.ymin)/2:g;return v.createSnappingResponse({...t,point:B,distance:E},m.spatialReference)}async function p(e,t,r){let{query:n}=t,{spatialRel:i}=n;if(!t?.items?.length||!n.geometry||!i)return;let s=await (0,f.xt)(i,n.geometry,e.geometryType,e.hasZ,e.hasM),l=await e.runSpatialFilter(t.items,e=>s(e.geometry),r);t.items=l}},94264:(e,t,r)=>{r.d(t,{Qf:()=>a,Qh:()=>l,RS:()=>i,ez:()=>h,i5:()=>d,lM:()=>s,qK:()=>u});var n=r(48678);let i=16;function s(e){if(!e)return 0;let t=u;for(let r in e)e.hasOwnProperty(r)&&(t+=o(e[r],!1));return t}function l(e){if(!e)return 0;if("number"==typeof e[0])return a(e);if(Array.isArray(e)){var t=e;let r=t.length;if(0===r||"number"==typeof t[0])return function(e,t){return h+e.length*t}(t,8);let n=h;for(let e=0;e<r;e++)n+=o(t[e]);return n}let r=u;for(let t in e)e.hasOwnProperty(t)&&(r+=o(e[t]));return r}function o(e,t=!0){switch(typeof e){case"object":return t?l(e):u;case"string":return 32+e.length;case"number":return i;case"boolean":return 4;default:return 8}}function a(...e){return e.reduce((e,t)=>{var r,s;return e+(t?(0,n.iu)(t)?t.byteLength+d:Array.isArray(t)?(r=t,s=i,h+r.length*s):0:0)},0)}let u=32,h=16,d=145},94884:(e,t,r)=>{r.d(t,{i_:()=>i});var n=r(39265);function i(e,t,r){t=(0,n.rS)(t)?.toLowerCase(),r=(0,n.rS)(r)?.toLowerCase();let i=e.map(e=>e.toLowerCase()),o=t?e[i.indexOf(t)]:null,a=r?e[i.indexOf(r)]:null;return{longitudeFieldName:o||e[i.indexOf(l.find(e=>i.includes(e)))],latitudeFieldName:a||e[i.indexOf(s.find(e=>i.includes(e)))]}}let s=["lat","lat83","latitude","latitude83","latdecdeg","lat_dd","y","ycenter","point_y"],l=["lon","lng","lng83","long","long83","longitude","longitude83","longdecdeg","long_dd","x","xcenter","point_x"]}}]);