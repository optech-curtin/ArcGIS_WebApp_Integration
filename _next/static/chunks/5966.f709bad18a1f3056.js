"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5966],{2907:(t,e,r)=>{var n;r.d(e,{c:()=>n}),function(t){t[t.Bind=0]="Bind",t[t.Pass=1]="Pass",t[t.Draw=2]="Draw"}(n||(n={}))},3391:(t,e,r)=>{function n(){return[1,0,0,0,1,0,0,0,1]}function i(t,e,r,n,i,s,o,u,a){return[t,e,r,n,i,s,o,u,a]}r.d(e,{fA:()=>i,vt:()=>n,zK:()=>s});let s=n();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:function(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},create:n,createView:function(t,e){return new Float64Array(t,e,9)},fromValues:i},Symbol.toStringTag,{value:"Module"}))},7916:(t,e,r)=>{r.d(e,{N:()=>d,a:()=>p,c:()=>m,e:()=>v,f:()=>E,g:()=>b,i:()=>P,l:()=>T,m:()=>I,n:()=>w,o:()=>L,p:()=>F,s:()=>U,w:()=>M}),r(57845),r(61939);var n=r(20538),i=r(40998),s=r(63599),o=r(56911),u=r(13784),a=r(44120),c=r(19461),l=r(97067),h=r(23146);function f(t,e){let r=(0,s.l)(t),i=(0,n.YN)(t[2]/r),o=Math.atan2(t[1]/r,t[0]/r);return(0,s.i)(e,r,i,o),e}var _=r(47325),g=r(42378);let d=m();function m(){return(0,a.vt)()}let I=u.e,S=u.e;function v(t,e){return(0,u.c)(e,t)}function T(t,e){return(0,a.fA)(t[0],t[1],t[2],e)}function M(t){return t}function b(t){return t[3]}function p(t){return t}function E(t,e,r,n){return(0,a.fA)(t,e,r,n)}function N(t,e,r){if(null==e||!y(t,e,$))return!1;let{t0:n,t1:i}=$;if((n<0||i<n&&i>0)&&(n=i),n<0)return!1;if(r){let{origin:t,direction:i}=e;r[0]=t[0]+i[0]*n,r[1]=t[1]+i[1]*n,r[2]=t[2]+i[2]*n}return!0}function w(t,e,r){let n=(0,h.Cr)(e,r);if(!y(t,n,$))return[];let{origin:i,direction:u}=n,{t0:a,t1:l}=$,f=e=>{let r=(0,o.vt)();return(0,s.b)(r,i,u,e),F(t,r,r)};return Math.abs(a-l)<(0,c.FD)()?[f(a)]:[f(a),f(l)]}let $={t0:0,t1:0};function y(t,e,r){let{origin:n,direction:i}=e;A[0]=n[0]-t[0],A[1]=n[1]-t[1],A[2]=n[2]-t[2];let s=i[0]*i[0]+i[1]*i[1]+i[2]*i[2];if(0===s)return!1;let o=2*(i[0]*A[0]+i[1]*A[1]+i[2]*A[2]),u=o*o-4*s*(A[0]*A[0]+A[1]*A[1]+A[2]*A[2]-t[3]*t[3]);if(u<0)return!1;let a=Math.sqrt(u);return r.t0=(-o-a)/(2*s),r.t1=(-o+a)/(2*s),!0}let A=(0,o.vt)();function P(t,e){return N(t,e,null)}function O(t,e,r){let n=g.rq.get(),o=g.Rc.get();(0,s.e)(n,e.origin,e.direction);let u=b(t);(0,s.e)(r,n,e.origin),(0,s.h)(r,r,1/(0,s.l)(r)*u);let a=q(t,e.origin),c=(0,_.g7)(e.origin,r);return(0,i.$0)(o,c+a,n),(0,s.t)(r,r,o),r}function F(t,e,r){let n=(0,s.d)(g.rq.get(),e,p(t)),i=(0,s.h)(g.rq.get(),n,t[3]/(0,s.l)(n));return(0,s.g)(r,i,p(t))}function q(t,e){let r=(0,s.d)(g.rq.get(),e,p(t)),i=(0,s.l)(r),o=b(t),u=o+Math.abs(o-i);return(0,n.XM)(o/u)}let D=(0,o.vt)();function R(t,e,r,n){let i=(0,s.d)(D,e,p(t));switch(r){case l._.X:{let t=f(i,D)[2];return(0,s.i)(n,-Math.sin(t),Math.cos(t),0)}case l._.Y:{let t=f(i,D),e=t[1],r=t[2],o=Math.sin(e);return(0,s.i)(n,-o*Math.cos(r),-o*Math.sin(r),Math.cos(e))}case l._.Z:return(0,s.n)(n,i);default:return}}function C(t,e){let r=(0,s.d)(x,e,p(t));return(0,s.l)(r)-t[3]}function L(t,e){let r=(0,s.s)(p(t),e),n=b(t);return r<=n*n}let x=(0,o.vt)(),j=m(),U=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:d,altitudeAt:C,angleToSilhouette:q,axisAt:R,cameraFrustumCoverage:function(t,e,r,n){let i=b(t),s=i*i,o=e+.5*Math.PI,u=r*r+s-2*Math.cos(o)*r*i,a=Math.sqrt(u),c=u-s;return c<=0?.5:Math.min(1,(Math.acos(Math.sqrt(c)/a)-Math.asin(i/(a/Math.sin(o)))+.5*n)/n)},clear:function(t){t[0]=t[1]=t[2]=t[3]=0},closestPoint:function(t,e,r){return N(t,e,r)?r:((0,h.oC)(e,p(t),r),F(t,r,r))},closestPointOnSilhouette:O,containsPoint:L,copy:v,create:m,distanceToSilhouette:function(t,e){let r=(0,s.d)(g.rq.get(),e,p(t));return Math.sqrt(Math.abs((0,s.k)(r)-t[3]*t[3]))},elevate:function(t,e,r){return t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=t[3]+e,r},equals:S,exactEquals:I,fromCenterAndRadius:T,fromRadius:function(t,e){return t[0]=t[1]=t[2]=0,t[3]=e,t},fromValues:E,getCenter:p,getExtent:function(t,e){return e},getRadius:b,intersectLine:w,intersectRay:N,intersectRayClosestSilhouette:function(t,e,r){if(N(t,e,r))return r;let n=O(t,e,g.rq.get());return(0,s.g)(r,e.origin,(0,s.h)(g.rq.get(),e.direction,(0,s.j)(e.origin,n)/(0,s.l)(e.direction))),r},intersectsRay:P,projectPoint:F,setAltitudeAt:function(t,e,r,n){let i=C(t,e),o=R(t,e,l._.Z,x),u=(0,s.h)(x,o,r-i);return(0,s.g)(n,e,u)},setExtent:function(t,e,r){return t!==r&&v(t,r),r},tmpSphere:j,union:function(t,e,r=(0,a.vt)()){let n=(0,s.j)(p(t),p(e)),i=t[3],o=e[3];return n+o<i?(0,u.c)(r,t):n+i<o?(0,u.c)(r,e):((0,s.m)(r,p(t),p(e),(n+o-i)/(2*n)),r[3]=(n+i+o)/2),r},wrap:M},Symbol.toStringTag,{value:"Module"}))},17656:(t,e,r)=>{r.d(e,{I:()=>i});var n=r(86075);class i{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,n.d)(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){let t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*s);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,s));t++)this._items.push(this._allocator())}}let s=1024},23146:(t,e,r)=>{r.d(e,{C:()=>h,Cr:()=>f,LV:()=>l,kb:()=>_,oC:()=>g,vt:()=>a}),r(31461);var n=r(17656);r(6815);var i=r(3391),s=r(63599),o=r(56911),u=r(42378);function a(t){return t?c((0,o.o8)(t.origin),(0,o.o8)(t.direction)):c((0,o.vt)(),(0,o.vt)())}function c(t,e){return{origin:t,direction:e}}function l(t,e){let r=d.get();return r.origin=t,r.direction=e,r}function h(t,e=a()){return function(t,e,r=a()){return(0,s.c)(r.origin,t),(0,s.c)(r.direction,e),r}(t.origin,t.direction,e)}function f(t,e,r=a()){return(0,s.c)(r.origin,t),(0,s.d)(r.direction,e,t),r}function _(t,e){let r=(0,s.e)(u.rq.get(),(0,s.n)(u.rq.get(),t.direction),(0,s.d)(u.rq.get(),e,t.origin));return(0,s.f)(r,r)}function g(t,e,r){let n=(0,s.f)(t.direction,(0,s.d)(r,e,t.origin));return(0,s.g)(r,t.origin,(0,s.h)(r,t.direction,n)),r}let d=new n.I(()=>a());(0,o.vt)(),(0,o.vt)(),(0,o.vt)(),(0,i.vt)()},38715:(t,e,r)=>{function n(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function s(t,e,r,n,i,s,o,u,a,c,l,h,f,_,g,d){return[t,e,r,n,i,s,o,u,a,c,l,h,f,_,g,d]}r.d(e,{fA:()=>s,o8:()=>i,vt:()=>n,zK:()=>o});let o=n();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:i,create:n,createView:function(t,e){return new Float64Array(t,e,16)},fromValues:s},Symbol.toStringTag,{value:"Module"}))},42378:(t,e,r)=>{r.d(e,{Rc:()=>g,J8:()=>d,oG:()=>h,rq:()=>f,Km:()=>_}),r(57845);var n=r(86075),i=r(3391),s=r(38715),o=r(79019),u=r(35430),a=r(56911),c=r(44120);class l{constructor(t){this._create=t,this._items=[],this._itemsPtr=0}get(){return 0===this._itemsPtr&&(0,n.d)(()=>this._reset()),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){let t=2*this._itemsPtr;this._items.length>t&&(this._items.length=t),this._itemsPtr=0}static createVec2f64(){return new l(u.vt)}static createVec3f64(){return new l(a.vt)}static createVec4f64(){return new l(c.vt)}static createMat3f64(){return new l(i.vt)}static createMat4f64(){return new l(s.vt)}static createQuatf64(){return new l(o.vt)}get test(){}}let h=l.createVec2f64(),f=l.createVec3f64(),_=l.createVec4f64(),g=(l.createMat3f64(),l.createMat4f64()),d=l.createQuatf64()},47325:(t,e,r)=>{r.d(e,{EJ:()=>c,_I:()=>o,g7:()=>a,gr:()=>u});var n=r(20538),i=r(63599),s=r(56911);function o(t,e,r){let n=(0,i.f)(t,e)/(0,i.f)(t,t);return(0,i.h)(r,t,n)}function u(t,e){return(0,i.f)(t,e)/(0,i.l)(t)}function a(t,e){let r=(0,i.f)(t,e)/((0,i.l)(t)*(0,i.l)(e));return-(0,n.XM)(r)}function c(t,e,r){(0,i.n)(l,t),(0,i.n)(h,e);let s=(0,i.f)(l,h),o=(0,n.XM)(s),u=(0,i.e)(l,l,h);return 0>(0,i.f)(u,r)?2*Math.PI-o:o}let l=(0,s.vt)(),h=(0,s.vt)()},61910:(t,e,r)=>{r.d(e,{O:()=>n});class n{constructor(){this._outer=new Map}clear(){this._outer.clear()}get empty(){return 0===this._outer.size}get(t,e){return this._outer.get(t)?.get(e)}getInner(t){return this._outer.get(t)}set(t,e,r){let n=this._outer.get(t);n?n.set(e,r):this._outer.set(t,new Map([[e,r]]))}delete(t,e){let r=this._outer.get(t);r&&(r.delete(e),0===r.size&&this._outer.delete(t))}forEach(t){this._outer.forEach((e,r)=>t(e,r))}forAll(t){for(let e of this._outer.values())for(let r of e.values())t(r)}}},72500:(t,e,r)=>{r.d(e,{C:()=>_,Cr:()=>I,Io:()=>L,LV:()=>f,O_:()=>m,Qj:()=>g,T7:()=>O,Tj:()=>q,U5:()=>A,Ui:()=>P,Z1:()=>C,_I:()=>R,b6:()=>D,ci:()=>v,fA:()=>d,gv:()=>F,lU:()=>S,mN:()=>x,mP:()=>w,mR:()=>y,vt:()=>h,ze:()=>$});var n,i,s=r(20538),o=r(63599),u=r(56911);r(13784);var a=r(47325),c=r(42378),l=r(87261);function h(t=V){return[t[0],t[1],t[2],t[3]]}function f(t=V[0],e=V[1],r=V[2],n=V[3]){return d(t,e,r,n,c.Km.get())}function _(t,e){return d(e[0],e[1],e[2],e[3],t)}function g(t){return t}function d(t,e,r,n,i=h()){return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function m(t,e,r){let n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=Math.abs(n-1)>1e-5&&n>1e-12?1/Math.sqrt(n):1;return r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*i,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),r}function I(t,e,r,n=h()){let i=r[0]-e[0],s=r[1]-e[1],o=r[2]-e[2],u=t[0]-e[0],a=t[1]-e[1],c=t[2]-e[2],l=s*c-o*a,f=o*u-i*c,_=i*a-s*u,g=l*l+f*f+_*_,d=Math.abs(g-1)>1e-5&&g>1e-12?1/Math.sqrt(g):1;return n[0]=l*d,n[1]=f*d,n[2]=_*d,n[3]=-(n[0]*t[0]+n[1]*t[1]+n[2]*t[2]),n}function S(t,e,r,n=0,i=Math.floor(1/3*r),s=Math.floor(2/3*r)){if(r<3)return!1;e(M,n);let u=i,a=!1;for(;u<r-1&&!a;)e(b,u),u++,a=!(0,o.p)(M,b);if(!a)return!1;for(u=Math.max(u,s),a=!1;u<r&&!a;)e(p,u),u++,(0,o.d)(E,M,b),(0,o.n)(E,E),(0,o.d)(N,b,p),(0,o.n)(N,N),a=!(0,o.p)(M,p)&&!(0,o.p)(b,p)&&Math.abs((0,o.f)(E,N))<T;return a?(I(M,b,p,t),!0):(0!==n||1!==i||2!==s)&&S(t,e,r,0,1,2)}function v(t,e,r=!0){let n=e.length/3;return S(t,(t,r)=>(0,o.i)(t,e[3*r+0],e[3*r+1],e[3*r+2]),r?n-1:n)}let T=.99619469809,M=(0,u.vt)(),b=(0,u.vt)(),p=(0,u.vt)(),E=(0,u.vt)(),N=(0,u.vt)();function w(t,e,r){return e!==t&&_(t,e),t[3]=-(0,o.f)(t,r),t}function $(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function y(t,e,r,n){return(0,o.e)(p,e,t),m(r,p,n)}function A(t,e,r,n){return j(U(t,e,(0,o.d)(c.rq.get(),r,e),k,n))}function P(t,e,r){return null!=e&&j(U(t,e.origin,e.direction,z,r))}function O(t,e,r){return j(U(t,e.origin,e.vector,i.NONE,r))}function F(t,e,r){return j(U(t,e.origin,e.vector,i.CLAMP,r))}function q(t,e){return x(t,e)>=0}function D(t,e){let r=(0,o.f)(t,e.ray.direction),n=-x(t,e.ray.origin);if(r>-1e-6&&r<1e-6)return n>0;let i=n/r;return r>0?i<e.c1&&(e.c1=i):i>e.c0&&(e.c0=i),e.c0<=e.c1}function R(t,e,r){let n=(0,o.h)(c.rq.get(),t,-t[3]),i=function(t,e,r){let n=(0,o.h)(c.rq.get(),t,(0,o.f)(t,e));return(0,o.d)(r,e,n),r}(t,(0,o.d)(c.rq.get(),e,n),c.rq.get());return(0,o.g)(r,i,n),r}function C(t,e,r,n){let i=c.rq.get(),s=c.rq.get();(0,l.VV)(t,i,s);let u=(0,o.d)(c.rq.get(),r,e),h=(0,a.gr)(i,u),f=(0,a.gr)(s,u),_=(0,a.gr)(t,u);return(0,o.i)(n,h,f,_)}function L(t,e){return Math.abs(x(t,e))}function x(t,e){return(0,o.f)(t,e)+t[3]}function j(t){return t===n.INTERSECTS_INSIDE_OUT||t===n.INTERSECTS_OUTSIDE_IN}function U(t,e,r,u,a){let c=(0,o.f)(t,r),l=x(t,e);if(0===c)return l>=0?n.INSIDE:n.OUTSIDE;let h=-l/c;return u&i.CLAMP&&(h=(0,s.qE)(h,0,1)),!(u&i.INFINITE_MIN)&&h<0||!(u&i.INFINITE_MAX)&&h>1?l>=0?n.INSIDE:n.OUTSIDE:((0,o.g)(a,e,(0,o.h)(a,r,h)),l>=0?n.INTERSECTS_INSIDE_OUT:n.INTERSECTS_OUTSIDE_IN)}!function(t){t[t.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",t[t.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",t[t.INSIDE=2]="INSIDE",t[t.OUTSIDE=3]="OUTSIDE"}(n||(n={}));let V=[0,0,1,0];!function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"}(i||(i={}));let k=i.INFINITE_MIN|i.INFINITE_MAX,z=i.INFINITE_MAX},79019:(t,e,r)=>{function n(){return[0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3]]}r.d(e,{o8:()=>i,vt:()=>n,zK:()=>s});let s=n();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:i,create:n,fromValues:function(t,e,r,n){return[t,e,r,n]}},Symbol.toStringTag,{value:"Module"}))},87261:(t,e,r)=>{r.d(e,{VV:()=>u,hG:()=>s,wp:()=>o}),r(20538);var n=r(63599),i=r(56911);function s(t){let e=t[0]*t[0]+t[4]*t[4]+t[8]*t[8];return Math.sqrt(Math.max(e,t[1]*t[1]+t[5]*t[5]+t[9]*t[9],t[2]*t[2]+t[6]*t[6]+t[10]*t[10]))}function o(t,e){let r=Math.sqrt(e[0]*e[0]+e[4]*e[4]+e[8]*e[8]),i=Math.sqrt(e[1]*e[1]+e[5]*e[5]+e[9]*e[9]),s=Math.sqrt(e[2]*e[2]+e[6]*e[6]+e[10]*e[10]);return(0,n.i)(t,r,i,s),t}function u(t,e,r){Math.abs(t[0])>Math.abs(t[1])?(0,n.i)(e,0,1,0):(0,n.i)(e,1,0,0),(0,n.e)(r,t,e),(0,n.e)(e,r,t),(0,n.n)(r,r),(0,n.n)(e,e)}(0,i.vt)(),(0,i.vt)(),(0,i.vt)(),(0,i.vt)(),(0,i.vt)()},90564:(t,e,r)=>{r.d(e,{N5:()=>a});var n=r(32391);r(57845);var i=r(61939),s=r(2907);let o=()=>i.A.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");class u{constructor(){this._includedModules=new Map}include(t,e){this._includedModules.has(t)?this._includedModules.get(t):(this._includedModules.set(t,e),t(this.builder,e))}}class a extends u{constructor(){super(...arguments),this.vertex=new f,this.fragment=new f,this.attributes=new _,this.varyings=new g,this.extensions=new d,this.outputs=new m}get fragmentUniforms(){return this.fragment.uniforms.entries}get builder(){return this}generate(t,e=!1){let r=this.extensions.generateSource(t),n=this.attributes.generateSource(t),i=this.varyings.generateSource(t),s="vertex"===t?this.vertex:this.fragment,o=s.uniforms.generateSource(),u=s.code.generateSource(),a=s.main.generateSource(e),c="vertex"===t?v:S,l=s.constants.generateSource(),h=this.outputs.generateSource(t);return`#version 300 es
${r.join("\n")}
${c}
${l.join("\n")}
${o.join("\n")}
${n.join("\n")}
${i.join("\n")}
${h.join("\n")}
${u.join("\n")}
${a.join("\n")}`}generateBind(t){let e=new Map;this.vertex.uniforms.entries.forEach(t=>{let r=t.bind[s.c.Bind];r&&e.set(t.name,r)}),this.fragment.uniforms.entries.forEach(t=>{let r=t.bind[s.c.Bind];r&&e.set(t.name,r)});let r=Array.from(e.values()),n=r.length;return e=>{for(let i=0;i<n;++i)r[i](t,e)}}generateBindPass(t){let e=new Map;this.vertex.uniforms.entries.forEach(t=>{let r=t.bind[s.c.Pass];r&&e.set(t.name,r)}),this.fragment.uniforms.entries.forEach(t=>{let r=t.bind[s.c.Pass];r&&e.set(t.name,r)});let r=Array.from(e.values()),n=r.length;return(e,i)=>{for(let s=0;s<n;++s)r[s](t,e,i)}}generateBindDraw(t){let e=new Map;this.vertex.uniforms.entries.forEach(t=>{let r=t.bind[s.c.Draw];r&&e.set(t.name,r)}),this.fragment.uniforms.entries.forEach(t=>{let r=t.bind[s.c.Draw];r&&e.set(t.name,r)});let r=Array.from(e.values()),n=r.length;return(e,i,s)=>{for(let o=0;o<n;++o)r[o](t,s,e,i)}}}class c{constructor(t){this._stage=t,this._entries=new Map}add(...t){for(let e of t)this._add(e);return this._stage}get(t){return this._entries.get(t)}_add(t){if(null!=t){if(this._entries.has(t.name)&&!this._entries.get(t.name).equals(t))throw new n.A(`Duplicate uniform name ${t.name} for different uniform type`);this._entries.set(t.name,t)}else o().error(`Trying to add null Uniform from ${Error().stack}.`)}generateSource(){return Array.from(this._entries.values()).map(t=>null!=t.arraySize?`uniform ${t.type} ${t.name}[${t.arraySize}];`:`uniform ${t.type} ${t.name};`)}get entries(){return Array.from(this._entries.values())}}class l{constructor(t){this._stage=t,this._bodies=[]}add(t){return this._bodies.push(t),this._stage}generateSource(t){if(this._bodies.length>0)return[`void main() {
 ${this._bodies.join("\n")||""} 
}`];if(t)throw new n.A("Shader does not contain main function body.");return[]}}class h{constructor(t){this._stage=t,this._entries=[]}add(t){return this._entries.push(t),this._stage}generateSource(){return this._entries}}class f extends u{constructor(){super(...arguments),this.uniforms=new c(this),this.main=new l(this),this.code=new h(this),this.constants=new I(this)}get builder(){return this}}class _{constructor(){this._entries=[]}add(t,e){this._entries.push([t,e])}generateSource(t){return"fragment"===t?[]:this._entries.map(t=>`in ${t[1]} ${t[0]};`)}}class g{constructor(){this._entries=new Map}add(t,e){this._entries.has(t)?o().warn(`Ignoring duplicate varying ${e} ${t}`):this._entries.set(t,e)}generateSource(t){let e=[];return this._entries.forEach((r,n)=>e.push("vertex"===t?`out ${r} ${n};`:`in ${r} ${n};`)),e}}class d{constructor(){this._entries=new Set}add(t){this._entries.add(t)}generateSource(t){let e="vertex"===t?d.ALLOWLIST_VERTEX:d.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter(t=>e.includes(t)).map(t=>`#extension ${t} : enable`)}}d.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"],d.ALLOWLIST_VERTEX=[];class m{constructor(){this._entries=new Map}add(t,e,r=0){let n=this._entries.get(r);n?.name!==t||n?.type!==e?this._entries.set(r,{name:t,type:e}):o().warn(`Fragment shader output location ${r} occupied`)}generateSource(t){if("vertex"===t)return[];0===this._entries.size&&this._entries.set(0,{name:m.DEFAULT_NAME,type:m.DEFAULT_TYPE});let e=[];return this._entries.forEach((t,r)=>e.push(`layout(location = ${r}) out ${t.type} ${t.name};`)),e}}m.DEFAULT_TYPE="vec4",m.DEFAULT_NAME="fragColor";class I{constructor(t){this._stage=t,this._entries=new Set}add(t,e,r){let n="ERROR_CONSTRUCTOR_STRING";switch(e){case"float":n=I._numberToFloatStr(r);break;case"int":n=I._numberToIntStr(r);break;case"bool":n=r.toString();break;case"vec2":n=`vec2(${I._numberToFloatStr(r[0])},                            ${I._numberToFloatStr(r[1])})`;break;case"vec3":n=`vec3(${I._numberToFloatStr(r[0])},                            ${I._numberToFloatStr(r[1])},                            ${I._numberToFloatStr(r[2])})`;break;case"vec4":n=`vec4(${I._numberToFloatStr(r[0])},                            ${I._numberToFloatStr(r[1])},                            ${I._numberToFloatStr(r[2])},                            ${I._numberToFloatStr(r[3])})`;break;case"ivec2":n=`ivec2(${I._numberToIntStr(r[0])},                             ${I._numberToIntStr(r[1])})`;break;case"ivec3":n=`ivec3(${I._numberToIntStr(r[0])},                             ${I._numberToIntStr(r[1])},                             ${I._numberToIntStr(r[2])})`;break;case"ivec4":n=`ivec4(${I._numberToIntStr(r[0])},                             ${I._numberToIntStr(r[1])},                             ${I._numberToIntStr(r[2])},                             ${I._numberToIntStr(r[3])})`;break;case"mat2":case"mat3":case"mat4":n=`${e}(${Array.prototype.map.call(r,t=>I._numberToFloatStr(t)).join(", ")})`}return this._entries.add(`const ${e} ${t} = ${n};`),this._stage}static _numberToIntStr(t){return t.toFixed(0)}static _numberToFloatStr(t){return Number.isInteger(t)?t.toFixed(1):t.toString()}generateSource(){return Array.from(this._entries)}}let S="#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp int;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump int;\n  precision mediump sampler2D;\n#endif",v="precision highp float;\nprecision highp sampler2D;"},94264:(t,e,r)=>{r.d(e,{Qf:()=>a,Qh:()=>o,RS:()=>i,ez:()=>l,i5:()=>h,lM:()=>s,qK:()=>c});var n=r(48678);let i=16;function s(t){if(!t)return 0;let e=c;for(let r in t)t.hasOwnProperty(r)&&(e+=u(t[r],!1));return e}function o(t){if(!t)return 0;if("number"==typeof t[0])return a(t);if(Array.isArray(t)){var e=t;let r=e.length;if(0===r||"number"==typeof e[0])return function(t,e){return l+t.length*e}(e,8);let n=l;for(let t=0;t<r;t++)n+=u(e[t]);return n}let r=c;for(let e in t)t.hasOwnProperty(e)&&(r+=u(t[e]));return r}function u(t,e=!0){switch(typeof t){case"object":return e?o(t):c;case"string":return 32+t.length;case"number":return i;case"boolean":return 4;default:return 8}}function a(...t){return t.reduce((t,e)=>{var r,s;return t+(e?(0,n.iu)(e)?e.byteLength+h:Array.isArray(e)?(r=e,s=i,l+r.length*s):0:0)},0)}let c=32,l=16,h=145}}]);