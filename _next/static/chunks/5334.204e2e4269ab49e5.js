"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5334],{85334:(e,l,t)=>{t.d(l,{getRampStops:()=>v});var n,i=t(70152),r=t(83390);t(32391);var o=t(33715);t(56879),t(72082),t(46499);function a(e){return"CIMVectorMarker"===e?.type?e.markerGraphics?.[0]:void 0}function s(e){return"CIMPolygonSymbol"===e?.symbol?.type?e.symbol.symbolLayers?.[0]:void 0}!function(e){e.OuterRing="reference-size-outer-ring",e.InnerDot="reference-size-inner-dot"}(n||(n={}));var u=t(71230),c=t(22191),y=t(20131),m=t(76558),f=t(89700),p=t(85448);t(41390);var b=t(62543);let d=[255,255,255],h=[200,200,200],g=[128,128,128];async function v(e,l,t,u,c,y,b){let d=l.legendOptions,g=d?.customValues,v=b||await w(e,t),L=l.stops,C=!!v,M=!!g,V=null!=l.minSize&&null!=l.maxSize,D=L&&L.length>1,A=!!l.target;if(!C||!M&&!(V||D&&!A))return;let O=(0,f.$d)(v),P=!1,R=null,_=null;R=O&&!D?(0,r.LI)([l.minDataValue,l.maxDataValue]):g??await k(l,v,u,c?.type);let q=e?.authoringInfo,E="univariate-color-size"===q?.type,B=E&&"above-and-below"===q?.univariateTheme,N=!!(0,p._l)(e);if(!R&&D&&(R=L.map(e=>e.value),P=L.some(e=>!!e.label),"flow"===e.type&&(R=(0,r.LI)(R)),P&&(_=L.map(e=>e.label))),O&&null!=R&&R?.length>2&&!B&&(R=[R[0],R[R.length-1]]),!R)return null;E&&5!==R?.length&&(R=I({minSize:R[0],maxSize:R[R.length-1]}));let T=O?function(e,l){let t=e?.authoringInfo,n="univariate-color-size"===t?.type,i=[12,30];if(n){let e=l[0],t=l[l.length-1];i=l.map(l=>12+(l-e)/(t-e)*18)}return n&&"below"===t?.univariateTheme&&i.reverse(),i}(e,R):null,$=(0,f.k_)(v),F=P?null:function(e,l){let t=e.length-1;return e.map((e,n)=>(0,p.Dd)(e,n,t,l))}(R,y);return(await Promise.all(R.map(async(r,y)=>{let p=O?T[y]:await x(l,v,r,u,c?.type);return{value:r,symbol:N&&("class-breaks"===e.type||"unique-value"===e.type)?function(e,l,t,r){let u="class-breaks"===e.type,c=u?e.classBreakInfos?.[0]?.symbol?.clone():e.uniqueValueInfos?.[0]?.symbol?.clone();return c&&"type"in c&&"cim"===c.type?(function(e,l){let{outerRingSize:t,innerDotSize:i,type:r,color:u,colorLocked:c,primitiveOverrides:y}=l,m="CIMPolygonSymbol"===e.data.symbol?.type?e.data.symbol.symbolLayers:null;if(2===m?.length)for(let e of m){var f;let l=e.primitiveName===n.OuterRing;f=l?t:i,"CIMVectorMarker"===e?.type&&null!=f&&(e.size=f),function(e,l){let t=a(e);t&&null!=l&&(t.geometry=function(e){switch(e){case"circle":return{rings:[[[8.5,.2],[7.06,.33],[5.66,.7],[4.35,1.31],[3.16,2.14],[2.14,3.16],[1.31,4.35],[.7,5.66],[.33,7.06],[.2,8.5],[.33,9.94],[.7,11.34],[1.31,12.65],[2.14,13.84],[3.16,14.86],[4.35,15.69],[5.66,16.3],[7.06,16.67],[8.5,16.8],[9.94,16.67],[11.34,16.3],[12.65,15.69],[13.84,14.86],[14.86,13.84],[15.69,12.65],[16.3,11.34],[16.67,9.94],[16.8,8.5],[16.67,7.06],[16.3,5.66],[15.69,4.35],[14.86,3.16],[13.84,2.14],[12.65,1.31],[11.34,.7],[9.94,.33],[8.5,.2]]]};case"square":return{rings:[[[.5,.5],[.5,16.5],[16.5,16.5],[16.5,.5],[.5,.5]]]};case"diamond":return{rings:[[[8.5,.5],[.2,8.5],[8.5,16.5],[16.5,8.5],[8.5,.5]]]};case"hexagon-pointy":return{rings:[[[15.86,12.75],[15.86,4.25],[8.5,0],[1.14,4.25],[1.14,12.75],[8.5,17],[15.86,12.75]]]};case"hexagon-flat":return{rings:[[[12.75,15.86],[17,8.5],[12.75,1.14],[4.25,1.14],[0,8.5],[4.25,15.86],[12.75,15.86]]]}}}(l))}(e,r),function(e,l){let t=s(a(e));t&&null!=l&&(t.color=l.toArray())}(e,u),function(e,l,t){let n=s(a(e));n&&null!=l&&t&&(n.colorLocked=l)}(e,c,l)}null!=t&&null!=i&&(e.data.primitiveOverrides=null),void 0!==y&&(e.data.primitiveOverrides=(0,o.o8)(y))}(c,{color:r??(u?null:new i.A(h)),innerDotSize:24/t*l||1,outerRingSize:24}),c):null}(e,p,l.maxSize,t)??v:function(e,l){let t=e.clone();if((0,m.wk)(t))(0,f.$d)(t)||t.symbolLayers.forEach(e=>{"fill"!==e.type&&(e.size=l)});else if("esri.symbols.SimpleMarkerSymbol"===t.declaredClass)t.size=l;else if("esri.symbols.PictureMarkerSymbol"===t.declaredClass){let e=t.width,n=t.height;t.height=l,t.width=e/n*l}else"esri.symbols.SimpleLineSymbol"===t.declaredClass?t.width=l:"esri.symbols.TextSymbol"===t.declaredClass&&t.font&&(t.font.size=l);return t}(B&&"class-breaks"===e.type?function(e,l){let t=e.classBreakInfos,n=t.length,i=n<2||!(l>=2)?t[0].symbol.clone():t[n-1].symbol.clone();return e.visualVariables?.some(e=>"color"===e.type)&&(i.type.includes("3d")?z(i):S(i)),i}(e,y):v,p),label:P?_[y]:F[y],size:N?24:p,outlineSize:$}}))).reverse()}async function w(e,l){var t;if("flow"===e.type)return(0,p.Zo)(e,l);if("pie-chart"===e.type)return new c.A({color:null,outline:e.outline?.width?e.outline:new u.A});let n=null,i=null;if("simple"===e.type)n=e.symbol;else if("class-breaks"===e.type){let l=e.classBreakInfos;n=l&&l[0]&&l[0].symbol,i=l.length>1}else if("unique-value"===e.type){let l=e.uniqueValueInfos;n=l?.[0]?.symbol,i=null!=l&&l.length>1}return!n||(t=n,(0,m.wk)(t)?t.symbolLayers?.some(e=>"fill"===e?.type)??!1:t?.type.includes("fill")??!1)?null:(n=n.clone(),(l||i)&&(n.type.includes("3d")?z(n):S(n)),n)}function z(e){"line-3d"===e.type?e.symbolLayers.forEach(e=>{e.material={color:g}}):e.symbolLayers.forEach(e=>{"icon"!==e.type||e.resource?.href?e.material={color:h}:(e.material={color:d},e.outline={color:g,size:1.5})})}function S(e){let l=(0,b.g4)();"cim"===e.type?(0,y.Fe)(e,new i.A(h)):e.type.includes("line")?e.color=g:(e.color=l?g:d,"simple-marker"===e.type&&(e.outline?"#ffffff"===e.outline?.color?.toHex()&&(e.outline.color=g):e.outline={color:g,width:1.5}))}async function k(e,l,n,i){let o=(await Promise.resolve().then(t.bind(t,72919))).getSizeRangeAtScale(e,n,i),a=o&&I(o);if(!o||!a)return;let s=a.map(l=>(function(e,l,t){let n,i=t.minSize,r=t.maxSize,o=l.minDataValue,a=l.maxDataValue;return e<=i?o:e>=r?a:(e-i)/(r-i)*(a-o)+o})(l,e,o));s=(0,r.LI)(s);for(let t=1;t<s.length-1;t++){let r=await L(e,l,s[t],s[t-1],n,i);r&&(s[t]=r[0],a[t]=r[1])}return s}function I(e){let l=e.minSize,t=(e.maxSize-l)/4,n=[];for(let e=0;e<5;e++)n.push(l+t*e);return n}async function L(e,l,t,n,i,o){let a=await x(e,l,t,i,o),s=await x(e,l,n,i,o),u=(0,r.lc)(t),c=u.fractional,y=u.integer,m=null,f=null;t>0&&t<1&&(m=10**c,y=(0,r.lc)(t*=m).integer);for(let n=y-1;n>=0;n--){let u=10**n,c=Math.floor(t/u)*u,y=Math.ceil(t/u)*u;null!=m&&(c/=m,y/=m);let p=(c+y)/2;[,p]=(0,r.LI)([c,p,y],{indexes:[1]});let b=await x(e,l,c,i,o),d=await x(e,l,y,i,o),h=await x(e,l,p,i,o),g=(0,r.u5)(a,b,s,null),v=(0,r.u5)(a,d,s,null),w=(0,r.u5)(a,h,s,null),z=g.previous<=20,S=v.previous<=20;if(z&&S&&(g.previous<=v.previous?(z=!0,S=!1):(S=!0,z=!1)),z?f=[c,b]:S?f=[y,d]:w.previous<=20&&(f=[p,h]),f)break}return f}async function x(e,l,n,i,r){let{getSize:o}=await Promise.resolve().then(t.bind(t,72919));return o(e,n,{scale:i,view:r,shape:"simple-marker"===l.type?l.style:null})}}}]);