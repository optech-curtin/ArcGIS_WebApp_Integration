"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8542],{28293:(e,t,r)=>{r.d(t,{A:()=>y});var i=r(81856),l=r(30781),n=r(92713),a=r(91838);r(57845),r(61939),r(33638);var o=r(33498),s=r(12709);let u=new l.J({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),d=new l.J({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),p=class extends n.A{constructor(e){super(e),this.type="class-breaks-definition",this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null}set standardDeviationInterval(e){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",e)}set definedInterval(e){"defined-interval"===this.classificationMethod&&this._set("definedInterval",e)}};(0,i._)([(0,o.e)({classBreaksDef:"class-breaks-definition"})],p.prototype,"type",void 0),(0,i._)([(0,a.MZ)({json:{write:!0}})],p.prototype,"breakCount",void 0),(0,i._)([(0,a.MZ)({json:{write:!0}})],p.prototype,"classificationField",void 0),(0,i._)([(0,a.MZ)({type:String,json:{read:u.read,write:u.write}})],p.prototype,"classificationMethod",void 0),(0,i._)([(0,a.MZ)({json:{write:!0}})],p.prototype,"normalizationField",void 0),(0,i._)([(0,a.MZ)({json:{read:d.read,write:d.write}})],p.prototype,"normalizationType",void 0),(0,i._)([(0,a.MZ)({value:null,json:{write:!0}})],p.prototype,"standardDeviationInterval",null),(0,i._)([(0,a.MZ)({value:null,json:{write:!0}})],p.prototype,"definedInterval",null);let y=p=(0,i._)([(0,s.$)("esri.rest.support.ClassBreaksDefinition")],p)},58542:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ey});var i=r(81856),l=r(39166),n=r(54335),a=r(32391),o=r(90304),s=r(21892),u=r(92753),d=r(90525),p=r(91838);r(57845),r(61939),r(33638);var y=r(12709),h=r(64171),c=r(19158),f=r(16082),m=r(69358),g=r(45257),v=r(22303),_=r(86942),b=r(24743),M=r(23281),F=r(76572),w=r(72621),I=r(73140);let Z=class extends(0,M.j)((0,b.dM)((0,s.P)(h.A))){constructor(e){super(e),this._layerCache=new f.q(20,e=>e.destroy()),this._oidToReference=new m.A,this._layerToReference=new Map,this.legendEnabled=!0,this.layers=new n.A,this.maximumVisibleSublayers=10,this.opacity=1,this.parent=null,this.persistenceEnabled=!0,this.title="Layers in view",this.type="catalog-dynamic-group",this.visible=!0}initialize(){this.addHandles([this.layers.on("after-add",({item:e})=>{e.parent=this}),this.layers.on("after-remove",({item:e})=>{e.parent=null}),(0,g.wB)(()=>this._orderBy,()=>{this._updateLayerSortValues(),this._sortAllLayers()})])}load(e){return this.addResolvingPromise(this.parent.load()),Promise.resolve(this)}destroy(){this._layerCache.destroy(),this._oidToReference.clear(),this._layerToReference.clear()}get _orderBy(){return this.parent?this.parent.orderBy?.find(e=>!e.valueExpression&&e.field)??new w.A({field:this.parent.objectIdField}):null}get _referenceComparator(){let e=this._orderBy;if(!this.parent||!e)return()=>0;let t=this.parent.fieldsIndex.get(e.field),r=(0,I.FM)(t?.toJSON().type,"descending"===e.order),i=(0,I.FM)("esriFieldTypeOID","descending"===e.order);return(e,t)=>r(t.sortValue,e.sortValue)||i(t.objectId,e.objectId)}get fullExtent(){return this.parent?.fullExtent??null}get updating(){return(0,o.Bs)(this._oidToReference,({pending:e})=>null!=e)}acquireLayer(e){if(this.destroyed)return(0,c.hA)();let t=this._getLayerReference(e);return t.count++,(0,c.hA)(()=>{t.count--,t.count||this._destroyLayerReference(t)})}_getLayerReference(e){let t=e.getObjectId();return(0,o.tE)(this._oidToReference,t,()=>{let t=e.getObjectId(),r=`${t}`,i=e.getAttribute(this.parent.itemSourceField),l=new x(e,t,i),n=this._layerCache.pop(r);return n?this._addLayer(l,n):l.pending=this.parent.createLayerFromFootprint(e).then(e=>{l.count?this._addLayer(l,e):(this.destroyed||this._layerCache.get(r)||this._layerCache.put(r,e),l.layer=null)}).catch(()=>{}).finally(()=>{l.pending=null}),l})}_destroyLayerReference(e){e.layer&&(this._layerToReference.delete(e.layer),this.layers.remove(e.layer),this.destroyed?e.layer.destroy():this._layerCache.put(`${e.objectId}`,e.layer),e.layer=null),this._oidToReference.delete(e.objectId)}_addLayer(e,t){e.layer=t,t.persistenceEnabled=!1,this._layerToReference.set(t,e),this._updateLayerSortValue(e),this.layers.add(t),this._sortAllLayers()}_updateLayerSortValues(){for(let e of this._layerToReference.values())this._updateLayerSortValue(e)}_updateLayerSortValue(e){this._orderBy&&(e.sortValue=e.footprint.getAttribute(this._orderBy.field))}_sortAllLayers(){this.layers.sort((e,t)=>this._referenceComparator(this._layerToReference.get(e),this._layerToReference.get(t)))}};(0,i._)([(0,p.MZ)()],Z.prototype,"_orderBy",null),(0,i._)([(0,p.MZ)({readOnly:!0})],Z.prototype,"_referenceComparator",null),(0,i._)([(0,p.MZ)(F.fV)],Z.prototype,"legendEnabled",void 0),(0,i._)([(0,p.MZ)({type:["show","hide","hide-children"],json:{write:!0}})],Z.prototype,"listMode",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],Z.prototype,"fullExtent",null),(0,i._)([(0,p.MZ)({type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}},write:{ignoreOrigin:!0,isRequired:!0}}})],Z.prototype,"id",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],Z.prototype,"layers",void 0),(0,i._)([(0,p.MZ)({type:_.jz,range:{min:0,max:50},json:{write:!0,default:10}})],Z.prototype,"maximumVisibleSublayers",void 0),(0,i._)([(0,p.MZ)(F.ke)],Z.prototype,"opacity",void 0),(0,i._)([(0,p.MZ)({clonable:!1})],Z.prototype,"parent",void 0),(0,i._)([(0,p.MZ)({type:String,nonNullable:!0,json:{write:{ignoreOrigin:!0,isRequired:!0}}})],Z.prototype,"title",void 0),(0,i._)([(0,p.MZ)({json:{read:!1}})],Z.prototype,"type",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],Z.prototype,"updating",null),(0,i._)([(0,p.MZ)({type:Boolean,json:{name:"visibility",write:!0}})],Z.prototype,"visible",void 0);let T=Z=(0,i._)([(0,y.$)("esri.layers.catalog.CatalogDynamicGroupLayer")],Z);class x{constructor(e,t,r){this.footprint=e,this.objectId=t,this.itemSource=r,this.count=0,this.layer=null,this.sortValue=void 0,this._pending=(0,v.v)(null)}get pending(){return this._pending.value}set pending(e){this._pending.value=e}}var V=r(39267),O=r(33715),S=r(44151),E=r(9401),j=r(54843),L=r(39265),A=r(21798),q=r(68266),C=r(21221),D=r(73358),z=r(52438),k=r(59276);let N=class extends(0,M.j)((0,j.F)((0,b.dM)((0,s.P)(h.A)))){constructor(e){super(e),this.attributeTableTemplate=null,this.charts=null,this.editingEnabled=!0,this.elevationInfo=null,this.formTemplate=null,this.labelingInfo=null,this.labelsVisible=!0,this.legendEnabled=!0,this.maxScale=0,this.minScale=0,this.opacity=1,this.parent=null,this.persistenceEnabled=!0,this.popupEnabled=!0,this.popupTemplate=null,this.title="Footprints",this.type="catalog-footprint",this.visible=!0}load(e){return this.addResolvingPromise(this._doLoad(e)),Promise.resolve(this)}async _doLoad(e){await this.parent.load(e),(0,L.yp)(this.renderer,this.fieldsIndex),this.addHandles([this.parent.on("apply-edits",e=>this.emit("apply-edits",e)),this.parent.on("edits",e=>this.emit("edits",e)),this.parent.on("refresh",e=>this.emit("refresh",e))])}get apiKey(){return this.parent?.apiKey}get capabilities(){return this.parent?.capabilities}get customParameters(){return this.parent?.customParameters}get dateFieldsTimeZone(){return this.parent?.dateFieldsTimeZone??null}get datesInUnknownTimezone(){return this.parent?.datesInUnknownTimezone??!1}get definitionExpression(){return this.parent?.definitionExpression}get editingInfo(){return this.parent?.editingInfo}get effectiveCapabilities(){return this.parent?.effectiveCapabilities}get createQueryVersion(){return this.parent?.createQueryVersion}get defaultPopupTemplate(){return this.createPopupTemplate()}get displayField(){return this.parent?.displayField}get displayFilterEnabled(){return this.parent?.displayFilterEnabled??!0}get displayFilterInfo(){return this.parent?.displayFilterInfo??null}get effectiveEditingEnabled(){return!1}get fields(){return this.parent?.fields}get fieldsIndex(){return this.parent?.fieldsIndex}get fullExtent(){return this.parent?.fullExtent}get geometryFieldsInfo(){return this.parent?.geometryFieldsInfo}get geometryType(){return this.parent?.geometryType}get globalIdField(){return this.parent?.globalIdField}get hasM(){return this.parent?.hasM??!1}get hasZ(){return this.parent?.hasZ??!1}get objectIdField(){return this.parent?.objectIdField}get orderBy(){return this.parent?.orderBy??null}get outFields(){return this.parent?.outFields}get parsedUrl(){return this.parent?.parsedUrl??null}get preferredTimeZone(){return this.parent?.preferredTimeZone??null}set renderer(e){(0,L.yp)(e,this.fieldsIndex),this._set("renderer",e)}get renderer(){return this._isOverridden("renderer")?this._get("renderer"):function(){let e=new k.A({style:"solid",color:[0,0,0,0],outline:{style:"solid",color:[96,96,96,.75],width:.75}});return new C.A({symbol:e})}()}get returnM(){return this.parent?.returnM}get returnZ(){return this.parent?.returnZ}get source(){return this.parent?.source}get timeExtent(){return this.parent?.timeExtent}get timeInfo(){return this.parent?.timeInfo}get timeOffset(){return this.parent?.timeOffset}get typeIdField(){return this.parent?.typeIdField}get types(){return this.parent?.types}get useViewTime(){return this.parent?.useViewTime??!0}get version(){return this.parent?.version}async applyEdits(e,t){return await this.load(),this.parent.applyEdits(e,t)}createPopupTemplate(e){let t={fields:this.fields,objectIdField:this.objectIdField,title:this.title};return(0,z.tn)(t,e)}createQuery(){return this.parent?.createQuery()}getField(e){return this.parent?.getField(e)}getFieldDomain(e,t){return this.parent?.getFieldDomain(e,t)}async queryExtent(e,t){return await this.load(),this.parent.queryExtent(e,t)}async queryFeatures(e,t){return await this.load(),this.parent.queryFeatures(e,t)}async queryFeatureCount(e,t){return await this.load(),this.parent.queryFeatureCount(e,t)}async queryObjectIds(e,t){return await this.load(),this.parent.queryObjectIds(e,t)}};(0,i._)([(0,p.MZ)(F.zQ)],N.prototype,"attributeTableTemplate",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"apiKey",null),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"capabilities",null),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"customParameters",null),(0,i._)([(0,p.MZ)()],N.prototype,"dateFieldsTimeZone",null),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"datesInUnknownTimezone",null),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"definitionExpression",null),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"editingInfo",null),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"effectiveCapabilities",null),(0,i._)([(0,p.MZ)({json:{origins:{"web-scene":{write:!1}},write:!0}})],N.prototype,"charts",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"createQueryVersion",null),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"defaultPopupTemplate",null),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"displayField",null),(0,i._)([(0,p.MZ)({type:Boolean,nonNullable:!0,json:{name:"enableEditing",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],N.prototype,"editingEnabled",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"effectiveEditingEnabled",null),(0,i._)([(0,p.MZ)((()=>{let e=(0,O.o8)(F.Yj);return e.json.origins["web-map"]={read:!1,write:!1},e})())],N.prototype,"elevationInfo",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"fields",null),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"fieldsIndex",null),(0,i._)([(0,p.MZ)({type:E.A,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],N.prototype,"formTemplate",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"fullExtent",null),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"geometryFieldsInfo",null),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"geometryType",null),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"globalIdField",null),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"hasM",null),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"hasZ",null),(0,i._)([(0,p.MZ)({type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}},write:{ignoreOrigin:!0,isRequired:!0}}})],N.prototype,"id",void 0),(0,i._)([(0,p.MZ)({type:[A.A],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:q.w,write:!0}})],N.prototype,"labelingInfo",void 0),(0,i._)([(0,p.MZ)(F.kF)],N.prototype,"labelsVisible",void 0),(0,i._)([(0,p.MZ)(F.fV)],N.prototype,"legendEnabled",void 0),(0,i._)([(0,p.MZ)({type:["show","hide"],json:{write:!0}})],N.prototype,"listMode",void 0),(0,i._)([(0,p.MZ)((()=>{let e=(0,O.o8)(F.hG);return e.json.origins.service.read=!1,e})())],N.prototype,"maxScale",void 0),(0,i._)([(0,p.MZ)((()=>{let e=(0,O.o8)(F.hn);return e.json.origins.service.read=!1,e})())],N.prototype,"minScale",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"objectIdField",null),(0,i._)([(0,p.MZ)(F.ke)],N.prototype,"opacity",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"orderBy",null),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"outFields",null),(0,i._)([(0,p.MZ)({clonable:!1})],N.prototype,"parent",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"parsedUrl",null),(0,i._)([(0,p.MZ)(F.M6)],N.prototype,"popupEnabled",void 0),(0,i._)([(0,p.MZ)({type:V.A,json:{name:"popupInfo",write:!0}})],N.prototype,"popupTemplate",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"preferredTimeZone",null),(0,i._)([(0,p.MZ)({types:D.Hg,json:{origins:{"web-scene":{types:D.XJ}},name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy(e,t){return{ignoreOrigin:this.originIdOf(t)<S.Gr.PORTAL_ITEM}}}}})],N.prototype,"renderer",null),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"returnM",null),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"returnZ",null),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"source",null),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"timeExtent",null),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"timeInfo",null),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"timeOffset",null),(0,i._)([(0,p.MZ)({type:String,nonNullable:!0,json:{write:{ignoreOrigin:!0,isRequired:!0}}})],N.prototype,"title",void 0),(0,i._)([(0,p.MZ)({json:{read:!1}})],N.prototype,"type",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"typeIdField",null),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"types",null),(0,i._)([(0,p.MZ)({readOnly:!0})],N.prototype,"useViewTime",null),(0,i._)([(0,p.MZ)({type:Boolean,json:{name:"visibility",write:!0}})],N.prototype,"visible",void 0);let P=N=(0,i._)([(0,y.$)("esri.layers.catalog.CatalogFootprintLayer")],N);var B=r(67328),R=r(14925),U=r(81877),G=r(60349),Q=r(9263),$=r(55016),J=r(7885),H=r(2043),K=r(16217),Y=r(54882),W=r(6255),X=r(70442),ee=r(11604),et=r(59274),er=r(34929),ei=r(63145),el=r(14307),en=r(28015),ea=r(47326),eo=r(86099);let es=(0,er.p)();function eu(e,t,r,i){let l=e.write({},i);(function(e){if(null==e)return!0;let t=Object.keys(e);return!t.length||1===t.length&&"id"===t[0]})(l)||(t[r]=l)}let ed=class extends(0,Q.FJ)((0,J.j)((0,$.w6)((0,b.dM)((0,K.fY)((0,X.e)((0,M.j)((0,W.J)((0,U.b)((0,H.q)((0,Y.A)((0,s.P)((0,G.d)((0,R.p)(h.A)))))))))))))){constructor(e){super(e),this.legendEnabled=!0,this._portals=new Map,this._layerToFootprint=new WeakMap,this.drawOrderField="cd_draworder",this.dynamicGroupLayer=new T({parent:this}),this.elevationInfo=null,this.fields=null,this.fieldsIndex=null,this.floorInfo=null,this.footprintLayer=new P({parent:this}),this.itemNameField="cd_itemname",this.itemSourceField="cd_itemsource",this.itemTypeField="cd_itemtype",this.layers=new n.A([this.dynamicGroupLayer,this.footprintLayer]),this.maxScaleField="cd_maxscale",this.minScaleField="cd_minscale",this.orderBy=null,this.outFields=null,this.supportedSourceTypes=new Set(["Catalog Layer"]),this.source=new B.default({layer:this,supportedSourceTypes:this.supportedSourceTypes}),this.type="catalog",this.typeIdField=null,this.types=null}load(e){let t=null!=e?e.signal:null,r=this.loadFromPortal({supportedTypes:["Feature Service"]},e).catch(u.QP).then(async()=>{let{url:e,source:r,portalItem:i}=this;if(!e)throw new a.A("catalog-layer:missing-url","Catalog layer must be created with a url");if(null==this.layerId){let r=await this._fetchFirstValidLayerId(t);if(null==r)throw new a.A("catalog-layer:missing-layerId","There is no Catalog Layer in the service",{service:e});this.layerId=r}await r.load({signal:t});let{sourceJSON:l}=r;l&&(this.sourceJSON=l,this.read(l,{origin:"service",portalItem:i,portal:i?.portal,url:this.parsedUrl}))}).then(()=>{let e=[this.itemNameField,this.itemSourceField,this.itemTypeField,this.minScaleField,this.maxScaleField],t=e.filter(e=>!this.fieldsIndex.has(e));if(t.length)throw new a.A("catalog-layer:missing-fields","There are missing fields to operate properly",{requiredFields:e,missingFields:t})}).then(()=>(0,ee.VA)(this,"load",e));return this.addResolvingPromise(r),Promise.resolve(this)}destroy(){for(let e of(this.footprintLayer.destroy(),this.dynamicGroupLayer.destroy(),this._portals.values()))e.destroy();this._portals.clear()}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("capabilities"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){return this.loaded&&null!=this.capabilities&&this.capabilities.operations.supportsEditing&&this.userHasEditingPrivileges}get effectiveEditingEnabled(){return!1}get parsedUrl(){let e=(0,d.An)(this.url);return null!=e&&null!=this.layerId&&(e.path=(0,d.fj)(e.path,this.layerId.toString())),e}async applyEdits(e,t){return(0,ee.ct)(this,e,t)}on(e,t){return super.on(e,t)}async createLayerFromFootprint(e){let t=await this._createLayer(e);return this._configureLayer(t,e),this._layerToFootprint.set(t,e),t}createFootprintFromLayer(e){return this._layerToFootprint.get(e)?.clone()}createQuery(){let e=new eo.A,t=this.capabilities?.query;e.returnGeometry=!0,t&&(e.compactGeometryEnabled=t.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=t.supportsDefaultSpatialReference),e.outFields=["*"];let{timeOffset:r,timeExtent:i}=this;return e.timeExtent=null!=r&&null!=i?i.offset(-r.value,r.unit):i||null,e.where=this.definitionExpression||"1=1",e}getFeatureType(e){return(0,ee.xd)(this.types,this.typeIdField,e)}getFieldDomain(e,t){let r=t?.feature,i=this.getFeatureType(r);if(i){let t=i.domains&&i.domains[e];if(t&&"inherited"!==t.type)return t}return this.getField(e)?.domain}async hasDataChanged(){return(0,ee.jp)(this)}async queryFeatures(e,t){let r=await this.load(),i=await r.source.queryFeatures(eo.A.from(e)??r.createQuery(),t);if(i?.features)for(let e of i.features)e.layer=e.sourceLayer=r.footprintLayer;return i}async queryObjectIds(e,t){return(await this.load()).source.queryObjectIds(eo.A.from(e)??this.createQuery(),t)}async queryFeatureCount(e,t){return(await this.load()).source.queryFeatureCount(eo.A.from(e)??this.createQuery(),t)}async queryExtent(e,t){return(await this.load()).source.queryExtent(eo.A.from(e)??this.createQuery(),t)}serviceSupportsSpatialReference(e){return this.loaded&&(0,ei.D)(this,e)}read(e,t){if(super.read(e,t),e){let{footprintLayer:r,dynamicGroupLayer:i}=e;r&&this.footprintLayer.read(r,t),i&&this.dynamicGroupLayer.read(i,t)}}async _fetchFirstValidLayerId(e){let{data:t}=await (0,l.A)(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e});if(Array.isArray(t?.layers))return t.layers.find(({type:e})=>this.supportedSourceTypes.has(e))?.id}async _createLayer(e){let t=e.getAttribute(this.itemSourceField);if(!t)throw new a.A("catalog-layer:item-source-missing",`The footprint is missing the "${this.itemSourceField}" attribute`);let i=JSON.parse(t);if("object"==typeof i&&null!=i&&"itemId"in i&&"portalUrl"in i){let{itemId:e,portalUrl:t}=i,r=(0,ea.qG)(t),l=this.portalItem?.portal,n=el.A.getDefault(),a,s=!0;l&&(0,d.ut)(t,l.url)?a=l:(0,d.ut)(t,n.url)?a=n:(a=(0,o.tE)(this._portals,r,()=>new el.A({url:r})),s=!1);let u=await h.A.fromPortalItem(new en.default({id:e,portal:a}));return s||await ep(u),u}if("object"==typeof i&&null!=i&&"url"in i)return h.A.fromArcGISServerUrl({url:i.url});let{default:l}=await r.e(368).then(r.bind(r,368));return new l}_configureLayer(e,t){let r=t.getAttribute(this.itemNameField);r&&(e.title=r);let i=t.getAttribute(this.maxScaleField);null!=i&&"maxScale"in e&&(e.maxScale=i);let l=t.getAttribute(this.minScaleField);null!=l&&"minScale"in e&&(e.minScale=l)}};async function ep(e){if("portalItem"in e&&e.portalItem){try{await e.load()}catch{}e.portalItem=null,"group"===e.type&&await Promise.allSettled([...e.layers.map(e=>ep(e)),...e.tables.map(e=>ep(e))])}}(0,i._)([(0,p.MZ)(F.fV)],ed.prototype,"legendEnabled",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],ed.prototype,"createQueryVersion",null),(0,i._)([(0,p.MZ)({readOnly:!0})],ed.prototype,"drawOrderField",void 0),(0,i._)([(0,p.MZ)({type:T,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:eu}}})],ed.prototype,"dynamicGroupLayer",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],ed.prototype,"editingEnabled",null),(0,i._)([(0,p.MZ)({readOnly:!0})],ed.prototype,"effectiveEditingEnabled",null),(0,i._)([(0,p.MZ)({json:{origins:{"web-scene":{name:"layerDefinition.elevationInfo",read:!1,write:!1}}}})],ed.prototype,"elevationInfo",void 0),(0,i._)([(0,p.MZ)({...es.fields,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],ed.prototype,"fields",void 0),(0,i._)([(0,p.MZ)(es.fieldsIndex)],ed.prototype,"fieldsIndex",void 0),(0,i._)([(0,p.MZ)({json:{origins:{"web-scene":{name:"layerDefinition.floorInfo",read:!1,write:!1}}}})],ed.prototype,"floorInfo",void 0),(0,i._)([(0,p.MZ)({type:P,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:eu}}})],ed.prototype,"footprintLayer",void 0),(0,i._)([(0,p.MZ)(F.id)],ed.prototype,"id",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],ed.prototype,"itemNameField",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],ed.prototype,"itemSourceField",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],ed.prototype,"itemTypeField",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],ed.prototype,"layers",void 0),(0,i._)([(0,p.MZ)({type:["show","hide","hide-children"]})],ed.prototype,"listMode",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],ed.prototype,"maxScaleField",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],ed.prototype,"minScaleField",void 0),(0,i._)([(0,p.MZ)({value:"CatalogLayer",type:["CatalogLayer"]})],ed.prototype,"operationalLayerType",void 0),(0,i._)([(0,p.MZ)({json:{origins:{"web-scene":{name:"layerDefinition.orderBy",write:!0,read:!0}}}})],ed.prototype,"orderBy",void 0),(0,i._)([(0,p.MZ)(es.outFields)],ed.prototype,"outFields",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],ed.prototype,"parsedUrl",null),(0,i._)([(0,p.MZ)({readOnly:!0})],ed.prototype,"source",void 0),(0,i._)([(0,p.MZ)({json:{read:!1}})],ed.prototype,"type",void 0),(0,i._)([(0,p.MZ)({type:String})],ed.prototype,"typeIdField",void 0),(0,i._)([(0,p.MZ)({type:[et.A]})],ed.prototype,"types",void 0);let ey=ed=(0,i._)([(0,y.$)("esri.layers.CatalogLayer")],ed)},73140:(e,t,r)=>{r.d(t,{$y:()=>L,Ak:()=>q,FM:()=>c,G_:()=>y,OR:()=>C,Rw:()=>S,Vb:()=>d,al:()=>E,b3:()=>T,gJ:()=>u,jM:()=>j,lv:()=>V,oZ:()=>Z,qg:()=>h,sU:()=>A,wy:()=>s,z9:()=>p,zS:()=>O});var i=r(28293),l=r(76001);let n=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,a=new Set(["esriFieldTypeDate","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeOID","esriFieldTypeBigInteger"]),o=new Set(["esriFieldTypeTimeOnly","esriFieldTypeDateOnly"]),s=["min","max","avg","stddev","count","sum","variance","nullcount","median"];function u(e){return null!=e&&("string"!=typeof e||e)?e:"<Null>"}function d(e){let t=null!=e.normalizationField||null!=e.normalizationType,r=null!=e.minValue||null!=e.maxValue,i=!!e.sqlExpression&&e.supportsSQLExpression;return!t&&!r&&!i}function p(e){let{outStatisticTypes:t}=e,r=e.returnDistinct?[...new Set(e.values)]:e.values,i=r.filter(e=>null!=e).sort(),l=i.length,n={count:l,min:i[0],max:i[l-1]};return e.supportsNullCount&&(n.nullcount=r.length-l),!e.percentileParams||t?.include?.length&&!t.include.includes("median")||t?.exclude?.length&&t.exclude.includes("median")||(n.median=h(r,e.percentileParams)),n}function y(e){let{values:t,useSampleStdDev:r,supportsNullCount:i,outStatisticTypes:l}=e,n=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=null,s=null,u=null,d=null,p=0,y=null==e.minValue?-1/0:e.minValue,c=null==e.maxValue?1/0:e.maxValue;for(let e of t)Number.isFinite(e)?e>=y&&e<=c&&(o=null===o?e:o+e,n=Math.min(n,e),a=Math.max(a,e),p++):"string"==typeof e&&p++;if(p&&null!=o){s=o/p;let e=0;for(let r of t)Number.isFinite(r)&&r>=y&&r<=c&&(e+=(r-s)**2);u=Math.sqrt(d=r?p>1?e/(p-1):0:p>0?e/p:0)}else n=null,a=null;let f={avg:s,count:p,max:a,min:n,stddev:u,sum:o,variance:d};return i&&(f.nullcount=t.length-p),!e.percentileParams||l?.include?.length&&!l.include.includes("median")||l?.exclude?.length&&l.exclude.includes("median")||(f.median=h(t,e.percentileParams)),f}function h(e,t){let{fieldType:r,value:i,orderBy:l,isDiscrete:n}=t,a=c(r,"desc"===l);if(0===(e=[...e].filter(e=>null!=e).sort((e,t)=>a(e,t))).length)return null;if(i<=0)return e[0];if(i>=1)return e[e.length-1];let o=(e.length-1)*i,s=Math.floor(o),u=s+1,d=o%1,p=e[s],y=e[u];return u>=e.length||n||"string"==typeof p||"string"==typeof y?p:p*(1-d)+y*d}function c(e,t){if(e){if(a.has(e))return t?F:w;if(o.has(e))return M(t,!1);if("esriFieldTypeTimestampOffset"===e)return t?v:g;let r=M(t,!0);if("esriFieldTypeString"===e)return r;if("esriFieldTypeGUID"===e||"esriFieldTypeGlobalID"===e)return(e,t)=>r(I(e),I(t))}let r=t?1:-1,i=t?F:w,l=M(t,!0),n=t?f:m;return(e,t)=>"number"==typeof e&&"number"==typeof t?i(e,t):"string"==typeof e&&"string"==typeof t?l(e,t):n(e,t)??r}let f=(e,t)=>null==e?+(null!=t):null==t?-1:null,m=(e,t)=>null==e?null==t?0:-1:null==t?1:null,g=(e,t)=>m(e,t)??(e===t?0:new Date(e).getTime()-new Date(t).getTime()),v=(e,t)=>f(e,t)??(e===t?0:new Date(t).getTime()-new Date(e).getTime()),_=(e,t)=>m(e,t)??(e===t?0:e<t?-1:1),b=(e,t)=>f(e,t)??(e===t?0:e<t?1:-1);function M(e,t){if(!t)return e?b:_;let r=e?f:m;return e?(e,t)=>{let i=r(e,t);return null!=i?i:(e=e.toUpperCase())>(t=t.toUpperCase())?-1:+(e<t)}:(e,t)=>{let i=r(e,t);return null!=i?i:(e=e.toUpperCase())<(t=t.toUpperCase())?-1:+(e>t)}}let F=(e,t)=>f(e,t)??t-e,w=(e,t)=>m(e,t)??e-t;function I(e){return e.slice(24,36)+e.slice(19,23)+e.slice(16,18)+e.slice(14,16)+e.slice(11,13)+e.slice(9,11)+e.slice(6,8)+e.slice(4,6)+e.slice(2,4)+e.slice(0,2)}function Z(e,t,r){let i;for(i in e)t?.include?.length&&!t.include.includes(i)||t?.exclude?.length&&t.exclude.includes(i)?delete e[i]:s.includes(i)&&(Number.isFinite(e[i])||(e[i]=null));return r&&["avg","stddev","variance"].forEach(t=>{null!=e[t]&&(e[t]=Math.ceil(e[t]??0))}),e}function T(e){let t={};for(let r of e)(null==r||"string"==typeof r&&""===r.trim())&&(r=null),null==t[r]?t[r]={count:1,data:r}:t[r].count++;return{count:t}}function x(e){return"coded-value"!==e?.type?[]:e.codedValues.map(e=>e.code)}function V(e,t,r,i){let l=e.count,n=[];if(r&&t){let e=[];for(let r of x(t[0]))if(t[1])for(let l of x(t[1]))if(t[2])for(let n of x(t[2]))e.push(`${u(r)}${i}${u(l)}${i}${u(n)}`);else e.push(`${u(r)}${i}${u(l)}`);else e.push(r);for(let t of e)l.hasOwnProperty(t)||(l[t]={data:t,count:0})}for(let e in l){let t=l[e];n.push({value:t.data,count:t.count,label:t.label})}return{uniqueValueInfos:n}}function O(e,t,r,i){let l=null;switch(t){case"log":0!==e&&(l=Math.log(e)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(i)&&0!==i&&(l=e/i*100);break;case"field":Number.isFinite(r)&&0!==r&&(l=e/r);break;case"natural-log":e>0&&(l=Math.log(e));break;case"square-root":e>0&&(l=e**.5)}return l}function S(e,t,r){let i=E({field:t.field,normalizationType:t.normalizationType,normalizationField:t.normalizationField,classificationMethod:t.classificationMethod,standardDeviationInterval:t.standardDeviationInterval,definedInterval:t.definedInterval,breakCount:t.numClasses||5});return e=function(e,t,r){let i=t??-1/0,l=r??1/0;return e.filter(e=>Number.isFinite(e)&&e>=i&&e<=l)}(e,t.minValue,t.maxValue),(0,l.t)({definition:i,values:e,normalizationTotal:t.normalizationTotal},r)}function E(e){let{breakCount:t,field:r,normalizationField:l,normalizationType:n}=e,a=e.classificationMethod||"equal-interval",o="standard-deviation"===a?e.standardDeviationInterval||1:void 0,s="defined-interval"===a?e.definedInterval:void 0;return new i.A({breakCount:t,classificationField:r,classificationMethod:a,normalizationField:"field"===n?l:void 0,normalizationType:n,standardDeviationInterval:o,definedInterval:s})}function j(e,t){let r=e.classBreaks,i=r.length,l=r[0]?.minValue,a=r[i-1]?.maxValue,o="standard-deviation"===t;return{minValue:l,maxValue:a,classBreakInfos:r=r.map(e=>{let t=e.label,r={minValue:e.minValue,maxValue:e.maxValue,label:t};if(o&&t){let e=t.match(n),i=e?.map(e=>+e.trim())??[];2===i.length?(r.minStdDev=i[0],r.maxStdDev=i[1],i[0]<0&&i[1]>0&&(r.hasAvg=!0)):1===i.length&&(t.includes("<")?(r.minStdDev=null,r.maxStdDev=i[0]):t.includes(">")&&(r.minStdDev=i[0],r.maxStdDev=null))}return r}),normalizationTotal:e.normalizationTotal}}function L(e,t){let r=A(e,t);if(null==r.min&&null==r.max)return{bins:[],minValue:r.min,maxValue:r.max,normalizationTotal:t.normalizationTotal};let i=r.intervals,l=r.min??0,n=r.max??0,a=i.map((e,t)=>({minValue:i[t][0],maxValue:i[t][1],count:0}));for(let t of e)if(null!=t&&t>=l&&t<=n){let e=q(i,t);e>-1&&a[e].count++}return{bins:a,minValue:l,maxValue:n,normalizationTotal:t.normalizationTotal}}function A(e,t,r=!1){let{field:i,classificationMethod:l,standardDeviationInterval:n,definedInterval:a,normalizationType:o,normalizationField:s,normalizationTotal:u,minValue:p,maxValue:h}=t,c=t.numBins||10,f=null,m=null,g=null;if(l&&"equal-interval"!==l||o){let{classBreaks:t}=S(e,{field:i,normalizationType:o,normalizationField:s,normalizationTotal:u,classificationMethod:l,standardDeviationInterval:n,definedInterval:a,minValue:p,maxValue:h,numClasses:c},null!=p&&null!=h?[p,h]:void 0);f=t[0]?.minValue,m=t[t.length-1]?.maxValue,g=t.map(e=>[e.minValue,e.maxValue])}else{if(null!=p&&null!=h)f=p,m=h;else{let t=y({values:e,minValue:p,maxValue:h,useSampleStdDev:!o,supportsNullCount:d({normalizationType:o,normalizationField:s,minValue:p,maxValue:h})});f=t.min??null,m=t.max??null}g=C(f??0,m??0,c)}if(r){let e=g.at(-1)[1];g.push([e,e])}return{min:f,max:m,intervals:g}}function q(e,t){let r=-1;for(let i=e.length-1;i>=0;i--)if(t>=e[i][0]){r=i;break}return r}function C(e,t,r){let i=(t-e)/r,l=[],n,a=e;for(let e=1;e<=r;e++)n=Number((n=a+i).toFixed(16)),l.push([a,e===r?t:n]),a=n;return l}},76001:(e,t,r)=>{r.d(t,{_:()=>a,t:()=>o});var i=r(61939);let l=()=>i.A.getLogger("esri.rest.support.generateRendererUtils");function n(e,t){return Number(e.toFixed(t))}function a(e){let t=u(e),r=[],i=t.uniqueValues.length;for(let e=0;e<i;e++){let i=t.uniqueValues[e],l=t.valueFrequency[e],n=i.toString();r.push({value:i,count:l,label:n})}return{uniqueValues:r}}function o(e,t){let{normalizationTotal:r}=e;return{classBreaks:function(e,t){let r=e.definition,{classificationMethod:i,normalizationType:l,definedInterval:a}=r,o=r.breakCount??1,y=[],h=e.values;if(0===h.length)return[];h=h.sort((e,t)=>e-t);let[c,f]=t??[h.at(0),h.at(-1)];if("equal-interval"===i)if(h.length>=o){let e=(f-c)/o,t=c;for(let r=1;r<o;r++){let i=n(c+r*e,6);y.push({minValue:t,maxValue:i,label:s(t,i,l)}),t=i}y.push({minValue:t,maxValue:f,label:s(t,f,l)})}else h.forEach(e=>{y.push({minValue:e,maxValue:e,label:s(e,e,l)})});else if("natural-breaks"===i){let t=u(h),r=e.valueFrequency||t.valueFrequency,i=function(e,t,r){let i=e.length,l=[];r>i&&(r=i);for(let e=0;e<r;e++)l.push(Math.round(e*i/r-1));l.push(i-1);let n=d(l,e,t,r);return function(e,t,r,i,l,n){let a=0,o=0,s=0,u=0,d=!0;for(let y=0;y<2&&d;y++){0===y&&(d=!1);for(let y=0;y<n-1;y++)for(;r[y+1]+1!==r[y+2];){r[y+1]=r[y+1]+1;let n=p(y,r,i,l);s=n.sbMean,a=n.sbSdcm;let h=p(y+1,r,i,l);if(u=h.sbMean,!(a+(o=h.sbSdcm)<t[y]+t[y+1])){r[y+1]=r[y+1]-1;break}t[y]=a,t[y+1]=o,e[y]=s,e[y+1]=u,d=!0}for(let y=n-1;y>0;y--)for(;r[y]!==r[y-1]+1;){r[y]=r[y]-1;let n=p(y-1,r,i,l);s=n.sbMean,a=n.sbSdcm;let h=p(y,r,i,l);if(u=h.sbMean,!(a+(o=h.sbSdcm)<t[y-1]+t[y])){r[y]=r[y]+1;break}t[y-1]=a,t[y]=o,e[y-1]=s,e[y]=u,d=!0}}return d}(n.mean,n.sdcm,l,e,t,r)&&(n=d(l,e,t,r)),l}(t.uniqueValues,r,o),a=c;for(let e=1;e<o;e++)if(t.uniqueValues.length>e){let r=n(t.uniqueValues[i[e]],6);y.push({minValue:a,maxValue:r,label:s(a,r,l)}),a=r}y.push({minValue:a,maxValue:f,label:s(a,f,l)})}else if("quantile"===i)if(h.length>=o&&c!==f){let e=c,t=Math.ceil(h.length/o),r=0;for(let i=1;i<o;i++){let n=t+r-1;n>h.length&&(n=h.length-1),n<0&&(n=0),y.push({minValue:e,maxValue:h[n],label:s(e,h[n],l)}),e=h[n],r+=t,t=Math.ceil((h.length-r)/(o-i))}y.push({minValue:e,maxValue:f,label:s(e,f,l)})}else{let e=-1;for(let t=0;t<h.length;t++){let r=h[t];r!==e&&(e=r,y.push({minValue:e,maxValue:r,label:s(e,r,l)}),e=r)}}else if("standard-deviation"===i){let e=function(e){let t=0;for(let r=0;r<e.length;r++)t+=e[r];return t/e.length}(h),t=function(e,t){let r=0;for(let i=0;i<e.length;i++){let l=e[i];r+=(l-t)*(l-t)}return Math.sqrt(r/=e.length)}(h,e);if(0===t)y.push({minValue:h[0],maxValue:h[0],label:s(h[0],h[0],l)});else{var m,g,v,_;let r,i=(m=c,g=f,v=o,((r=Math.max((_=e)-m,g-_)/t/v)>=1?1:r>=.5?.5:.25)*t),a=0,u=c;for(let t=o;t>=1;t--){let r=n(e-(t-.5)*i,6);y.push({minValue:u,maxValue:r,label:s(u,r,l)}),u=r,a++}let d=n(e+.5*i,6);y.push({minValue:u,maxValue:d,label:s(u,d,l)}),u=d,a++;for(let t=1;t<=o;t++)d=a===2*o?f:n(e+(t+.5)*i,6),y.push({minValue:u,maxValue:d,label:s(u,d,l)}),u=d,a++}}else if("defined-interval"===i){if(!a)return y;let[e,r]=t??[h.at(0),h.at(-1)],i=Math.ceil((r-e)/a),o=e;for(let t=1;t<i;t++){let r=n(e+t*a,6);y.push({minValue:o,maxValue:r,label:s(o,r,l)}),o=r}y.push({minValue:o,maxValue:r,label:s(o,r,l)})}return y}(e,t),normalizationTotal:r}}function s(e,t,r){return e===t?r&&"percent-of-total"===r?e+"%":e.toString():r&&"percent-of-total"===r?e+"% - "+t+"%":e+" - "+t}function u(e){let t=[],r=[],i=Number.MIN_VALUE,l=1,n=-1;for(let a=0;a<e.length;a++){let o=e[a];o===i?(l++,r[n]=l):null!==o&&(t.push(o),i=o,l=1,r.push(l),n++)}return{uniqueValues:t,valueFrequency:r}}function d(e,t,r,i){let l=[],n=[],a=[],o=0,s=[],u=[];for(let l=0;l<i;l++){let i=p(l,e,t,r);s.push(i.sbMean),u.push(i.sbSdcm),o+=u[l]}let d,y=o,h=!0;for(;h||o<y;){h=!1,l=[];for(let t=0;t<i;t++)l.push(e[t]);for(let r=0;r<i;r++)for(let l=e[r]+1;l<=e[r+1];l++)if(d=t[l],r>0&&l!==e[r+1]&&Math.abs(d-s[r])>Math.abs(d-s[r-1]))e[r]=l;else if(r<i-1&&e[r]!==l-1&&Math.abs(d-s[r])>Math.abs(d-s[r+1])){e[r+1]=l-1;break}y=o,o=0,n=[],a=[];for(let l=0;l<i;l++){n.push(s[l]),a.push(u[l]);let i=p(l,e,t,r);s[l]=i.sbMean,u[l]=i.sbSdcm,o+=u[l]}}if(o>y){for(let t=0;t<i;t++)e[t]=l[t],s[t]=n[t],u[t]=a[t];o=y}return{mean:s,sdcm:u}}function p(e,t,r,i){let n=0,a=0;for(let l=t[e]+1;l<=t[e+1];l++){let e=i[l];n+=r[l]*e,a+=e}a<=0&&l().warn("Exception in Natural Breaks calculation");let o=n/a,s=0;for(let l=t[e]+1;l<=t[e+1];l++)s+=i[l]*(r[l]-o)**2;return{sbMean:o,sbSdcm:s}}}}]);