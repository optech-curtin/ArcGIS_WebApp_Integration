"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9063],{13506:(e,t,r)=>{r.d(t,{default:()=>a});var n=r(32391),l=r(61939),i=r(99572);function a(e,t,r,a,s){if(null==e)return null;let u=e.references("geometry")&&s?function(e,t,r){let{transform:a,hasZ:s,hasM:u}=r;o.has(t)||o.set(t,function(e){let t={};switch(e){case"esriGeometryPoint":return(e,r,n,l)=>(0,i.Tr)(r,t,e,n,l);case"esriGeometryPolygon":return(e,r,n,l)=>(0,i.$X)(r,t,e,n,l);case"esriGeometryPolyline":return(e,r,n,l)=>(0,i.P5)(r,t,e,n,l);case"esriGeometryMultipoint":return(e,r,n,l)=>(0,i.SW)(r,t,e,n,l);default:return l.A.getLogger("esri.views.2d.support.arcadeOnDemand").error(new n.A("mapview-arcade",`Unable to handle geometryType: ${e}`)),e=>e}}(t));let f=o.get(t)(e.geometry,a,s,u);return{...e,geometry:f}}(t,a,s):t,f=e.repurposeFeature(u);try{return e.evaluate({...r,$feature:f},e.services)}catch(e){return l.A.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",e),null}}let o=new Map},64763:(e,t,r)=>{r.d(t,{$:()=>b,IB:()=>s,Iy:()=>L,N2:()=>v,QP:()=>A,RH:()=>C,Vl:()=>O,Ws:()=>k,ZD:()=>x,_L:()=>P,bJ:()=>I,e$:()=>w,f6:()=>N,pW:()=>n,pf:()=>S});var n,l=r(70152),i=r(31461),a=r(33715);r(20538),r(13784);var o=r(44120);function s(e){return"r"in e&&"g"in e&&"b"in e}function u(e){return"h"in e&&"s"in e&&"v"in e}function f(e){return"l"in e&&"a"in e&&"b"in e}function c(e){return"l"in e&&"c"in e&&"h"in e}let p=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],h=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function m(e,t){let r,n,l=[];if(e[0].length!==t.length)throw Error("dimensions do not match");let i=e.length,a=e[0].length,o=0;for(r=0;r<i;r++){for(o=0,n=0;n<a;n++)o+=e[r][n]*t[n];l.push(o)}return l}function g(e){let t=m(p,[e.r/255,e.g/255,e.b/255].map(e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4));return{x:100*t[0],y:100*t[1],z:100*t[2]}}function y(e){let t=m(h,[e.x/100,e.y/100,e.z/100]).map(e=>Math.min(1,Math.max(e<=.0031308?12.92*e:1.055*e**(1/2.4)-.055,0)));return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function d(e){let t=[e.x/95.047,e.y/100,e.z/108.883].map(e=>e>(6/29)**3?e**(1/3):1/3*(29/6)**2*e+4/29);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function M(e){let t=e.l,r=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(e=>e>6/29?e**3:3*(6/29)**2*(e-4/29));return{x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function b(e){return s(e)?e:c(e)?y(M(function(e){let t=e.l,r=e.c,n=e.h;return{l:t,a:r*Math.cos(n),b:r*Math.sin(n)}}(e))):f(e)?y(M(e)):"x"in e&&"y"in e&&"z"in e?y(e):u(e)?function(e){let t,r=(e.h+360)%360/60,n=e.s/100,l=e.v/100*255,i=l*n,a=i*(1-Math.abs(r%2-1));switch(Math.floor(r)){case 0:t={r:i,g:a,b:0};break;case 1:t={r:a,g:i,b:0};break;case 2:t={r:0,g:i,b:a};break;case 3:t={r:0,g:a,b:i};break;case 4:t={r:a,g:0,b:i};break;case 5:case 6:t={r:i,g:0,b:a};break;default:t={r:0,g:0,b:0}}return t.r=Math.round(t.r+l-i),t.g=Math.round(t.g+l-i),t.b=Math.round(t.b+l-i),t}(e):e}function v(e){return u(e)?e:function(e){let t=e.r,r=e.g,n=e.b,l=Math.max(t,r,n),i=l-Math.min(t,r,n),a=l,o=0===i?0:l===t?(r-n)/i%6:l===r?(n-t)/i+2:(t-r)/i+4,s=0===i?0:i/a;return o<0&&(o+=6),{h:o*=60,s:s*=100,v:a*=100/255}}(b(e))}function x(e){return f(e)?e:d(g(b(e)))}function C(e){return c(e)?e:function(e){let t=e.l,r=e.a,n=e.b,l=Math.sqrt(r*r+n*n),i=Math.atan2(n,r);return{l:t,c:l,h:i=i>0?i:i+2*Math.PI}}(d(g(b(e))))}function k(e,t){let{r,g:n,b:i}=t?.ignoreAlpha?e:function(e){let{r:t,g:r,b:n,a:i}=e;return i<1&&(t=Math.round(i*t+255*(1-i)),r=Math.round(i*r+255*(1-i)),n=Math.round(i*n+255*(1-i))),new l.A({r:t,g:r,b:n})}(e);return .2126*r+.7152*n+.0722*i}function I(e,t=n.High){return new l.A(k(e,{ignoreAlpha:!0})>t?[0,0,0,e.a]:[255,255,255,e.a])}function w(e,t){let r=x(e);r.l*=1-t;let n=b(r),l=e.clone();return l.setColor(n),l.a=e.a,l}function P(e,t){let r=e.clone();return r.a*=t,r}function O(e,t){let r=v(e);r.s*=t;let n=b(r),l=e.clone();return l.setColor(n),l.a=e.a,l}function A(e){return l.A.toUnitRGBA(e)}function S(e){return(0,o.fA)(e[0],e[1],e[2],e.length>3?e[3]:1)}function N(e,t){let r=l.A.toUnitRGBA(e);return r[3]*=t,r}function L(e,t,r={}){if(0===e.length||t<=0)return[];if(1===(e=e.map(e=>"string"==typeof e?new l.A(e):e)).length||1===t){let r=[],n=e[0];for(let e=0;e<t;e++)r.push(n.clone());return r}if(r.shuffle&&(e=(0,i.k4)((0,a.o8)(e),r.seed)),e.length>=t){let r=[],n=(e.length-1)/(t-1);for(let l=0;l<t;l++){let t=Math.round(l*n);r.push(e[t].clone())}return r}return function(e,t,r={}){let n=[],a=e.length-1,o=Math.ceil((t-e.length)/a);e:for(let s=0;s<a;s++){let a=e[s],u=e[s+1];for(let s=1;s<=o;s++){let f=s/(o+1);if(n.push(function(e,t,r,n={}){let a=e.r,o=e.g,s=e.b,u=t.r,f=t.g,c=t.b,p=Math.round(a+(u-a)*r),h=Math.round(o+(f-o)*r),m=Math.round(s+(c-s)*r);if(!n.offset)return new l.A([p,h,m]);let g=(0,i.Mo)(n.seed);return new l.A([E(p,g),E(h,g),E(m,g)])}(a,u,f,r)),n.length+e.length===t)break e}}return[...e.map(e=>e.clone()),...(0,i.k4)(n,r.seed??1)]}(e,t,r)}!function(e){e[e.Low=160]="Low",e[e.High=225]="High"}(n||(n={}));let E=(e,t)=>Math.min(255,Math.max(0,e+(Math.floor(10*t())-5)))},89063:(e,t,r)=>{r.d(t,{OverrideHelper:()=>f});var n=r(70152),l=r(64763),i=r(33715),a=r(20703),o=r(95832),s=r(13506);let u=e=>{if(!e)return[0,0,0,0];let{r:t,g:r,b:n,a:l}=e;return[t,r,n,255*l]};class f{static findApplicableOverrides(e,t,r){if(e&&t){if(e.primitiveName){let n=!1;for(let t of r)if(t.primitiveName===e.primitiveName){n=!0;break}if(!n)for(let n of t)n.primitiveName===e.primitiveName&&r.push(n)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(let n of e.effects)f.findApplicableOverrides(n,t,r);if(e.symbolLayers)for(let n of e.symbolLayers)f.findApplicableOverrides(n,t,r);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects)for(let n of e.effects)f.findApplicableOverrides(n,t,r);if(e.markerPlacement&&f.findApplicableOverrides(e.markerPlacement,t,r),"CIMVectorMarker"===e.type){if(e.markerGraphics)for(let n of e.markerGraphics)f.findApplicableOverrides(n,t,r),f.findApplicableOverrides(n.symbol,t,r)}else"CIMCharacterMarker"===e.type?f.findApplicableOverrides(e.symbol,t,r):"CIMHatchFill"===e.type?f.findApplicableOverrides(e.lineSymbol,t,r):"CIMPictureMarker"===e.type&&f.findApplicableOverrides(e.animatedSymbolProperties,t,r)}}}static findEffectOverrides(e,t){if(!e)return null;if("CIMGeometricEffectDashes"===e.type&&(0,o.FH)(e),!t||!e.primitiveName)return{type:"cim-effect-param",effect:e,overrides:[]};let r=(0,o.rB)(e),n=e.primitiveName,l=[];for(let e of t)e.primitiveName===n&&l.push((0,o.rB)(e));return{type:"cim-effect-param",effect:r,overrides:(0,o.pk)(l)}}static async resolveSymbolOverrides(e,t,r,n,l,a,s){if(!e?.symbol)return null;let{symbol:u,primitiveOverrides:c}=e,p=!!c;if(!p&&!n)return u;u=(0,i.o8)(u),c=(0,i.o8)(c);let h=!0;if(t||(t={attributes:{}},h=!1),p){if(h||(c=c.filter(e=>!e.valueExpressionInfo?.expression.includes("$feature"))),s||(c=c.filter(e=>!e.valueExpressionInfo?.expression.includes("$view"))),c.length>0){let e={spatialReference:r,fields:(0,o.O2)(t.attributes),geometryType:l};await f.createRenderExpressions(c,e),f.evaluateOverrides(c,t,l??"esriGeometryPoint",a,s)}f.applyOverrides(u,c)}return n&&f.applyDictionaryTextOverrides(u,t,n,null),u}static async createRenderExpressions(e,t){let r=[];for(let n of e){let e=n.valueExpressionInfo;if(!e||f._expressionToRenderExpression.has(e.expression))continue;let l=(0,a.Ad)(e.expression,t.spatialReference,t.fields);r.push(l),l.then(t=>f._expressionToRenderExpression.set(e.expression,t))}r.length>0&&await Promise.all(r)}static evaluateOverrides(e,t,r,n,i){let a={$view:{scale:i?.scale}};for(let i of e){i.value&&"object"==typeof i.value&&(0,l.IB)(i.value)&&("Color"===i.propertyName||"StrokeColor"===i.propertyName)&&(i.value=u(i.value));let e=i.valueExpressionInfo;if(!e)continue;let o=f._expressionToRenderExpression.get(e.expression);o&&(i.value=(0,s.default)(o,t,a,r,n))}}static applyDictionaryTextOverrides(e,t,r,n,l="Normal"){if(e?.type)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{let i=e.symbolLayers;if(!i)return;for(let a of i)a&&"CIMVectorMarker"===a.type&&f.applyDictionaryTextOverrides(a,t,r,n,"CIMTextSymbol"===e.type?e.textCase:l)}break;case"CIMVectorMarker":{let l=e.markerGraphics;if(!l)return;for(let e of l)e&&f.applyDictionaryTextOverrides(e,t,r,n)}break;case"CIMMarkerGraphic":{let i=e.textString;if(i&&i.includes("[")){let a=(0,o.gQ)(i,r);e.textString=(0,o.FM)(t,a,n,l)}}}}static applyOverrides(e,t,r,n){if(e.primitiveName){for(let l of t)if(l.primitiveName===e.primitiveName){let t=(0,o.YF)(l.propertyName);if(n&&n.push({cim:e,nocapPropertyName:t,value:e[t]}),r){let t=!1;for(let n of r)n.primitiveName===e.primitiveName&&(t=!0);t||r.push(l)}null!=l.value&&(e[t]=l.value)}}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(let l of e.effects)f.applyOverrides(l,t,r,n);if(e.symbolLayers)for(let l of e.symbolLayers)f.applyOverrides(l,t,r,n);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects)for(let l of e.effects)f.applyOverrides(l,t,r,n);if("CIMVectorMarker"===e.type&&e.markerGraphics)for(let l of e.markerGraphics)f.applyOverrides(l,t,r,n),f.applyOverrides(l.symbol,t,r,n)}}static restoreOverrides(e){for(let t of e)t.cim[t.nocapPropertyName]=t.value}static buildOverrideKey(e){let t="";for(let r of e)void 0!==r.value&&(t+=`${r.primitiveName}${r.propertyName}${JSON.stringify(r.value)}`);return t}static toValue(e,t){if("DashTemplate"===e)return t.split(" ").map(e=>Number(e));if("Color"===e){let e=new n.A(t).toRgba();return e[3]*=255,e}return t}}f._expressionToRenderExpression=new Map},99572:(e,t,r)=>{function n(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:null!=e.extent?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null}function l(e){if("lowerLeft"===e.originPosition&&4===e.scale.length&&4===e.translate.length)return e;let{originPosition:t,scale:r,translate:n}=e,l=r[0]??1,i=r[1]??1;return{originPosition:"lowerLeft",scale:[l,"lowerLeft"===t?i:-i,r[2]??1,r[3]??1],translate:[n[0]??0,n[1]??0,n[2]??0,n[3]??0]}}function i({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function a({scale:e,translate:t},r){return Math.round((r-t[1])/e[1])}function o({scale:e,translate:t},r){return Math.round(((r??0)-t[2])/e[2])}function s({scale:e,translate:t},r){return r?Math.round((r-t[3])/e[3]):0}function u(e,t){return e&&t?h:e&&!t?c:!e&&t?p:f}r.d(t,{$X:()=>S,B2:()=>a,Gy:()=>I,IE:()=>i,P5:()=>N,Q1:()=>l,QE:()=>P,SW:()=>O,Tr:()=>A,VV:()=>n,wp:()=>w}),r(31789);let f=(e,t)=>{let r=[];if(!t.length)return null;let n=t[0],l=i(e,n[0]),o=a(e,n[1]);r.push([l,o]);for(let n=1;n<t.length;n++){let[s,u]=t[n],f=i(e,s),c=a(e,u);f===l&&c===o||r.push([f-l,c-o]),l=f,o=c}return r},c=(e,t)=>{let r=[];if(!t.length)return null;let n=t[0],l=i(e,n[0]),s=a(e,n[1]),u=o(e,n[2]);r.push([l,s,u]);for(let n=1;n<t.length;n++){let[f,c,p]=t[n],h=i(e,f),m=a(e,c),g=o(e,p);h===l&&m===s&&g===u||r.push([h-l,m-s,g]),l=h,s=m,u=g}return r},p=(e,t)=>{let r=[];if(!t.length)return null;let n=t[0],l=i(e,n[0]),o=a(e,n[1]),u=s(e,n[2]);r.push([l,o,u]);for(let n=1;n<t.length;n++){let[f,c,p]=t[n],h=i(e,f),m=a(e,c),g=s(e,p);h===l&&m===o&&g===u||r.push([h-l,m-o,g]),l=h,o=m,u=g}return r},h=(e,t)=>{let r=[];if(!t.length)return null;let n=t[0],l=i(e,n[0]),u=a(e,n[1]),f=o(e,n[2]),c=s(e,n[3]);r.push([l,u,f,c]);for(let n=1;n<t.length;n++){let[p,h,m,g]=t[n],y=i(e,p),d=a(e,h),M=o(e,m),b=s(e,g);y===l&&d===u&&M===f&&b===c||r.push([y-l,d-u,M,b]),l=y,u=d,f=M,c=b}return r};function m({scale:e,translate:t},r){return r*e[0]+t[0]}function g({scale:e,translate:t},r){return r*e[1]+t[1]}function y({scale:e,translate:t},r){return(r??0)*e[2]+t[2]}function d({scale:e,translate:t},r){return r?r*e[3]+t[3]:0}function M(e,t){return e&&t?C:e&&!t?v:!e&&t?x:b}let b=(e,t)=>{let r=Array(t.length);if(!t.length)return r;let n=t[0],l=m(e,n[0]),i=g(e,n[1]);r[0]=[l,i];let{scale:a,originPosition:o}=e,s=a[0],u="lowerLeft"===o?a[1]:-a[1];for(let e=1;e<t.length;e++){let[n,a]=t[e];l+=s*n,i+=u*a,r[e]=[l,i]}return r},v=(e,t)=>{let r=Array(t.length);if(!t.length)return r;let n=t[0],l=m(e,n[0]),i=g(e,n[1]);r[0]=[l,i,y(e,n[2])];let{scale:a,originPosition:o}=e,s=a[0],u="lowerLeft"===o?a[1]:-a[1];for(let n=1;n<t.length;n++){let[a,o,f]=t[n];l+=s*a,i+=u*o,r[n]=[l,i,y(e,f)]}return r},x=(e,t)=>{let r=Array(t.length);if(!t.length)return r;let n=t[0],l=m(e,n[0]),i=g(e,n[1]);r[0]=[l,i,d(e,n[2])];let{scale:a,originPosition:o}=e,s=a[0],u="lowerLeft"===o?a[1]:-a[1];for(let n=1;n<t.length;n++){let[a,o,f]=t[n];l+=s*a,i+=u*o,r[n]=[l,i,d(e,f)]}return r},C=(e,t)=>{let r=Array(t.length);if(!t.length)return r;let n=t[0],l=m(e,n[0]),i=g(e,n[1]);r[0]=[l,i,y(e,n[2]),d(e,n[3])];let{scale:a,originPosition:o}=e,s=a[0],u="lowerLeft"===o?a[1]:-a[1];for(let n=1;n<t.length;n++){let[a,o,f,c]=t[n];l+=s*a,i+=u*o,r[n]=[l,i,y(e,f),d(e,c)]}return r};function k(e,t,r){let n=Array(r.length);for(let l=0;l<r.length;l++)n[l]=t(e,r[l]);return n}function I(e,t,r){let n=l(e);return t.x=i(n,r.x),t.y=a(n,r.y),null!=r.z&&(t.z=o(n,r.z)),null!=r.m&&(t.m=s(n,r.m)),t}function w(e,t,r){let n=function(e,t,r,n){let l=[],i=u(r,n);for(let r=0;r<t.length;r++){let n=i(e,t[r]);n&&n.length>=3&&l.push(n)}return l.length?l:null}(l(e),r.rings,r.hasZ,r.hasM);return n?(t.rings=n,t.hasZ=r.hasZ??!1,t.hasM=r.hasM??!1,t):null}function P(e,t,r){let n=function(e,t,r,n){let l=[],i=u(r,n);for(let r=0;r<t.length;r++){let n=i(e,t[r]);n&&n.length>=2&&l.push(n)}return l.length?l:null}(l(e),r.paths,r.hasZ,r.hasM);return n?(t.paths=n,t.hasZ=r.hasZ??!1,t.hasM=r.hasM??!1,t):null}function O(e,t,r,n=r?.hasZ??!1,i=r?.hasM??!1){if(null!=r){let a=l(e);t.points=M(n,i)(a,r.points),t.hasZ=n,t.hasM=i}return t}function A(e,t,r,n=null!=r?.z,i=null!=r?.m){if(null==r)return t;let a=l(e);return t.x=m(a,r.x),t.y=g(a,r.y),n&&(t.z=y(a,r.z)),i&&(t.m=d(a,r.m)),t}function S(e,t,r,n=r?.hasZ??!1,i=r?.hasM??!1){return null!=r&&(t.rings=k(l(e),M(n,i),r.rings),t.hasZ=n,t.hasM=i),t}function N(e,t,r,n=r?.hasZ??!1,i=r?.hasM??!1){return null!=r&&(t.paths=k(l(e),M(n,i),r.paths),t.hasZ=n,t.hasM=i),t}}}]);