"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1264,7108],{7108:(e,t,r)=>{r.r(t),r.d(t,{default:()=>V});var o=r(81856),s=r(39166),n=r(32391),l=r(43650),i=r(21892),a=r(92753),u=r(91838),h=r(86942);r(57845),r(33638);var c=r(53480),d=r(12709),y=r(7780),f=r(44151),m=r(61414),g=r(70429),p=r(71760),b=r(64171),I=r(14925),N=r(2411),v=r(81877),M=r(24743),w=r(60349),T=r(2043),S=r(54882),x=r(6255),_=r(23281),P=r(92884),F=r(70442),A=r(76572),Z=r(37779),O=r(72875),E=r(83583),G=r(85312),L=r(63145),j=r(47840),k=r(90628);let q=class extends(0,M.dM)((0,F.e)((0,_.j)((0,P.I)((0,N.V)((0,v.b)((0,T.q)((0,S.A)((0,i.P)((0,x.J)((0,I.p)((0,w.d)(b.A)))))))))))){constructor(...e){super(...e),this._exportImageParameters=new Z.g({layer:this}),this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.preferredTimeZone=null,this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){let t=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(a.QP).then(()=>this._fetchService(t))),Promise.resolve(this)}destroy(){this._exportImageParameters.destroy()}readImageFormat(e,t){let r=t.supportedImageFormatTypes;return r&&r.includes("PNG32")?"png32":"png24"}writeSublayers(e,t,r,o){if(!this.loaded||!e)return;let s=e.slice().reverse().flatten(({sublayers:e})=>e&&e.toArray().reverse()).toArray(),n=!1,l=(0,f.aB)(o.origin);if(this.capabilities?.operations.supportsExportMap&&this.capabilities?.exportMap?.supportsDynamicLayers){if(l===f.Gr.PORTAL_ITEM){let e=this.createSublayersForOrigin("service").sublayers;n=(0,G.Zx)(s,e,f.Gr.SERVICE)}else if(l>f.Gr.PORTAL_ITEM){let e=this.createSublayersForOrigin("portal-item");n=(0,G.Zx)(s,e.sublayers,(0,f.aB)(e.origin))}}let i=[],a={writeSublayerStructure:n,...o},u=n||this.hasVisibleLayersForOrigin(l);s.forEach(e=>{let t=e.write({},a);i.push(t),u=u||"user"===e.originOf("visible")}),i.some(e=>Object.keys(e).length>1)&&(t.layers=i),u&&(t.visibleLayers=s.filter(e=>e.visible).map(e=>e.id))}createExportImageParameters(e,t,r,o){let s=o?.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian()),this._exportImageParameters.floors=o?.floors??null,this._exportImageParameters.scale=(0,g.X_)({extent:e,width:t})*s;let n=this._exportImageParameters.toJSON(),l=!o?.rotation||this.version<10.3?{}:{rotation:-o.rotation},i=e?.spatialReference,a=(0,p.YX)(i);n.dpi*=s;let u={};if(o?.timeExtent){let{start:e,end:t}=o.timeExtent.toJSON();u.time=e&&t&&e===t?""+e:`${e??"null"},${t??"null"}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(u.time="null,null");return{bbox:e?e.xmin+","+e.ymin+","+e.xmax+","+e.ymax:void 0,bboxSR:a,imageSR:a,size:t+","+r,...n,...l,...u}}async fetchImage(e,t,r,o){let{data:s}=await this._fetchImage("image",e,t,r,o);return s}async fetchImageBitmap(e,t,r,o){let{data:s,url:n}=await this._fetchImage("blob",e,t,r,o);return(0,O.m)(s,n,o?.signal)}async fetchRecomputedExtents(e={}){let t={...e,query:{returnUpdates:!0,f:"json",...this.customParameters,token:this.apiKey}},{data:r}=await (0,s.A)(this.url,t),{extent:o,fullExtent:n,timeExtent:l}=r,i=o||n;return{fullExtent:i&&m.A.fromJSON(i),timeExtent:l&&j.A.fromJSON({start:l[0],end:l[1]})}}loadAll(){return(0,l.g)(this,e=>{e(this.allSublayers),e(this.subtables)})}serviceSupportsSpatialReference(e){return(0,L.D)(this,e)}async _fetchImage(e,t,r,o,l){let i={responseType:e,signal:l?.signal??null,query:{...this.parsedUrl.query,...this.createExportImageParameters(t,r,o,l),f:"image",...this.refreshParameters,...this.customParameters,token:this.apiKey}},u=this.parsedUrl.path+"/export";if(null!=i.query?.dynamicLayers&&!this.capabilities?.exportMap?.supportsDynamicLayers)throw new n.A("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:i.query});try{let{data:e}=await (0,s.A)(u,i);return{data:e,url:u}}catch(e){if((0,a.zf)(e))throw e;throw new n.A("mapimagelayer:image-fetch-error",`Unable to load image: ${u}`,{error:e})}}async _fetchService(e){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});let{data:t,ssl:r}=await (0,s.A)(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:e});r&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=t,this.read(t,{origin:"service",url:this.parsedUrl})}hasVisibleLayersForOrigin(e){return!(null==e||!this.sublayersSourceJSON[e]?.visibleLayers)}};(0,o._)([(0,u.MZ)((0,k.P6)("dateFieldsTimeReference"))],q.prototype,"dateFieldsTimeZone",void 0),(0,o._)([(0,u.MZ)({type:Boolean})],q.prototype,"datesInUnknownTimezone",void 0),(0,o._)([(0,u.MZ)()],q.prototype,"dpi",void 0),(0,o._)([(0,u.MZ)()],q.prototype,"gdbVersion",void 0),(0,o._)([(0,u.MZ)()],q.prototype,"imageFormat",void 0),(0,o._)([(0,c.w)("imageFormat",["supportedImageFormatTypes"])],q.prototype,"readImageFormat",null),(0,o._)([(0,u.MZ)({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],q.prototype,"imageMaxHeight",void 0),(0,o._)([(0,u.MZ)({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],q.prototype,"imageMaxWidth",void 0),(0,o._)([(0,u.MZ)()],q.prototype,"imageTransparency",void 0),(0,o._)([(0,u.MZ)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],q.prototype,"isReference",void 0),(0,o._)([(0,u.MZ)({json:{read:!1,write:!1}})],q.prototype,"labelsVisible",void 0),(0,o._)([(0,u.MZ)({type:["ArcGISMapServiceLayer"]})],q.prototype,"operationalLayerType",void 0),(0,o._)([(0,u.MZ)({json:{read:!1,write:!1}})],q.prototype,"popupEnabled",void 0),(0,o._)([(0,u.MZ)((0,k.P6)("preferredTimeReference"))],q.prototype,"preferredTimeZone",void 0),(0,o._)([(0,u.MZ)()],q.prototype,"sourceJSON",void 0),(0,o._)([(0,u.MZ)({json:{write:{ignoreOrigin:!0}}})],q.prototype,"sublayers",void 0),(0,o._)([(0,y.K)("sublayers",{layers:{type:[E.A]},visibleLayers:{type:[h.jz]}})],q.prototype,"writeSublayers",null),(0,o._)([(0,u.MZ)({type:["show","hide","hide-children"]})],q.prototype,"listMode",void 0),(0,o._)([(0,u.MZ)({json:{read:!1},readOnly:!0,value:"map-image"})],q.prototype,"type",void 0),(0,o._)([(0,u.MZ)(A.OZ)],q.prototype,"url",void 0);let V=q=(0,o._)([(0,d.$)("esri.layers.MapImageLayer")],q)},11506:(e,t,r)=>{function o(e,t){return e?t?4:3:t?3:2}function s(e,t,r,s){if(!t?.lengths.length)return null;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);let n=e.coords,l=[],i=r?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:a,coords:u}=t,h=o(r,s),c=0;for(let e of a){let t=function(e,t,r,s,n,l){let i=o(n,l),a=r,u=r+i,h=0,c=0,d=0,y=0,f=0;for(let r=0,o=s-1;r<o;r++,a+=i,u+=i){let r=t[a],o=t[a+1],s=t[a+2],l=t[u],i=t[u+1],m=t[u+2],g=r*i-l*o;y+=g,h+=(r+l)*g,c+=(o+i)*g,n&&(g=r*m-l*s,d+=(s+m)*g,f+=g),r<e[0]&&(e[0]=r),r>e[1]&&(e[1]=r),o<e[2]&&(e[2]=o),o>e[3]&&(e[3]=o),n&&(s<e[4]&&(e[4]=s),s>e[5]&&(e[5]=s))}if(y>0&&(y*=-1),f>0&&(f*=-1),!y)return null;let m=[h,c,.5*y];return n&&(m[3]=d,m[4]=.5*f),m}(i,u,c,e,r,s);t&&l.push(t),c+=e*h}if(l.sort((e,t)=>{let o=e[2]-t[2];return 0===o&&r&&(o=e[4]-t[4]),o}),l.length){let e=6*l[0][2];n[0]=l[0][0]/e,n[1]=l[0][1]/e,r&&(e=6*l[0][4],n[2]=0!==e?l[0][3]/e:0),(n[0]<i[0]||n[0]>i[1]||n[1]<i[2]||n[1]>i[3]||r&&(n[2]<i[4]||n[2]>i[5]))&&(n.length=0)}if(!n.length){let e=t.lengths[0]?function(e,t,r,s,n){let l=o(s,n),i=0,a=t+l,u=0,h=0,c=0,d=0;for(let t=0,o=r-1;t<o;t++,i+=l,a+=l){var y,f,m,g,p;let t=e[i],r=e[i+1],o=e[i+2],n=e[a],l=e[a+1],b=e[a+2],I=s?function(e,t,r,o,s,n){let l=o-e,i=s-t,a=n-r;return Math.sqrt(l*l+i*i+a*a)}(t,r,o,n,l,b):function(e,t,r,o){let s=r-e,n=o-t;return Math.sqrt(s*s+n*n)}(t,r,n,l);if(I)if(u+=I,s){let e=[(y=t)+.5*(n-y),(f=r)+.5*(l-f),(m=o)+.5*(b-m)];h+=I*e[0],c+=I*e[1],d+=I*e[2]}else{let e=[(g=t)+.5*(n-g),(p=r)+.5*(l-p)];h+=I*e[0],c+=I*e[1]}}return u>0?s?[h/u,c/u,d/u]:[h/u,c/u]:r>0?s?[e[t],e[t+1],e[t+2]]:[e[t],e[t+1]]:null}(u,0,a[0],r,s):null;if(!e)return null;n[0]=e[0],n[1]=e[1],r&&e.length>2&&(n[2]=e[2])}return e}r.d(t,{Q:()=>s})},37779:(e,t,r)=>{r.d(t,{g:()=>d});var o=r(81856),s=r(28690),n=r(97409),l=r(91838);r(57845),r(61939),r(33638);var i=r(12709),a=r(70429),u=r(98569),h=r(85312);let c={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"},d=class extends s.A{constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;let e=this.visibleSublayers.map(e=>{let t=(0,u.f)(this.floors,e);return e.toExportImageJSON(t)});return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&(0,h.Sk)(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.removeHandles("layer"),e&&this.addHandles([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",e=>this.notifyChange(c[e.propertyName]))],"layer"))}get layers(){let e=this.visibleSublayers;return e?e.length?"show:"+e.map(e=>e.id).join(","):"show:-1":null}get layerDefs(){let e=!!this.floors?.length,t=this.visibleSublayers.filter(t=>null!=t.definitionExpression||e&&null!=t.floorInfo);return t.length?JSON.stringify(t.reduce((e,t)=>{let r=(0,u.f)(this.floors,t),o=(0,n.mA)(r,t.definitionExpression);return null!=o&&(e[t.id]=o),e},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers");let e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){let e=[];if(!this.layer)return e;let t=this.layer.sublayers,r=this.scale,o=t=>{t.visible&&(0===r||(0,a.zx)(r,t.minScale,t.maxScale))&&(t.sublayers?t.sublayers.forEach(o):e.unshift(t))};t&&t.forEach(o);let s=this._get("visibleSublayers");return!s||s.length!==e.length||s.some((t,r)=>e[r]!==t)?e:s}toJSON(){let e=this.layer,t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t={...t,layers:this.layers,layerDefs:this.layerDefs},t}};(0,o._)([(0,l.MZ)({readOnly:!0})],d.prototype,"dynamicLayers",null),(0,o._)([(0,l.MZ)()],d.prototype,"floors",void 0),(0,o._)([(0,l.MZ)({readOnly:!0})],d.prototype,"hasDynamicLayers",null),(0,o._)([(0,l.MZ)()],d.prototype,"layer",null),(0,o._)([(0,l.MZ)({readOnly:!0})],d.prototype,"layers",null),(0,o._)([(0,l.MZ)({readOnly:!0})],d.prototype,"layerDefs",null),(0,o._)([(0,l.MZ)({type:Number})],d.prototype,"scale",void 0),(0,o._)([(0,l.MZ)({readOnly:!0})],d.prototype,"version",null),(0,o._)([(0,l.MZ)({readOnly:!0})],d.prototype,"visibleSublayers",null),d=(0,o._)([(0,i.$)("esri.layers.support.ExportImageParameters")],d)},54805:(e,t,r)=>{r.d(t,{A:()=>o});class o{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){let e=new o;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}}},56599:(e,t,r)=>{r.d(t,{A:()=>s});var o=r(94264);class s{constructor(e=[],t=[]){this.lengths=e??[],this.coords=t??[]}static fromJSON(e){return new s(e.lengths,e.coords)}static fromRect(e){let[t,r,o,n]=e,l=o-t,i=n-r;return new s([5],[t,r,l,0,0,i,-l,0,0,-i])}get isPoint(){return 0===this.lengths.length&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((e,t)=>e+t)}get usedMemory(){return 64+(0,o.Qf)(this.lengths,this.coords)}area(){let e=0,t=0;if(!this.lengths.length)return 0;for(let r=0;r<this.lengths.length;r++){let o=this.lengths[r];if(o<3)continue;let s=this.coords[2*t],n=this.coords[2*t+1];for(let r=1;r<o;r+=1){let o=this.coords[2*(r+t)],l=this.coords[2*(r+t)+1];e+=-.5*(o-s)*(l+n),s=o,n=l}t+=o}return e}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){let o=this.lengths[r];for(let r=0;r<o;r++)e(this.coords[2*(r+t)],this.coords[2*(r+t)+1]);t+=o}}deltaDecode(){let e=this.clone(),{coords:t,lengths:r}=e,o=0;for(let e of r){for(let r=1;r<e;r++)t[2*(o+r)]+=t[2*(o+r)-2],t[2*(o+r)+1]+=t[2*(o+r)-1];o+=e}return e}clone(e){if(0===this.lengths.length)return new s([],[this.coords[0],this.coords[1]]);let t=(0===this.lengths.length?1:this.lengths.reduce((e,t)=>e+t))*2,r=this.coords.slice(0,t);return e?(e.set(r),new s(this.lengths,e)):new s(Array.from(this.lengths),Array.from(r))}}},60729:(e,t,r)=>{r.d(t,{B2:()=>v,BW:()=>q,Ch:()=>es,DF:()=>S,Di:()=>$,E2:()=>Y,IE:()=>N,Nl:()=>et,Q4:()=>en,Rk:()=>el,Ux:()=>B,Ye:()=>D,ZF:()=>H,eU:()=>z,eY:()=>X,hK:()=>ei,jH:()=>ee,jQ:()=>eo,kz:()=>er,oN:()=>C,q3:()=>W,qK:()=>j,qN:()=>L,z5:()=>R,zv:()=>Q});var o=r(32391),s=r(61939),n=r(40941),l=r(42845),i=r(84766),a=r(31789),u=r(82795),h=r(54805),c=r(56599);function d(e,t){return e?t?4:3:t?3:2}let y=()=>s.A.getLogger("esri.layers.graphics.featureConversionUtils"),f={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryMultiPatch:3,esriGeometryEnvelope:0},m=(e,t,r,o,s,n)=>{e[r]=s,e[r+1]=n},g=(e,t,r,o,s,n)=>{e[r]=s,e[r+1]=n,e[r+2]=t[o+2]},p=(e,t,r,o,s,n)=>{e[r]=s,e[r+1]=n,e[r+2]=t[o+3]},b=(e,t,r,o,s,n)=>{e[r]=s,e[r+1]=n,e[r+2]=t[o+2],e[r+3]=t[o+3]};function I(e,t,r,o){if(e){if(r)return t&&o?b:g;if(t&&o)return p}else if(t&&o)return g;return m}function N({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function v({scale:e,translate:t},r){return Math.round((t[1]-r)/e[1])}function M({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function w({scale:e,translate:t},r){return Math.round((r-t[1])/e[1])}function T({scale:e,translate:t},r,o){return r*e[o]+t[o]}function S(e,t,r){return e?t?r?O(e):P(e):r?A(e):x(e):null}function x(e){let t=e.coords;return{x:t[0],y:t[1]}}function _(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function P(e){let t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function F(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function A(e){let t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function Z(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function O(e){let t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function E(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function G(e,t){return e&&t?E:e?F:t?Z:_}function L(e,t,r=G(null!=t.z,null!=t.m)){return r(e,t)}function j(e,t,r){if(null==e)return null;let o=d(t,r),s=[];for(let t=0;t<e.coords.length;t+=o){let r=[];for(let s=0;s<o;s++)r.push(e.coords[t+s]);s.push(r)}return t?r?{points:s,hasZ:t,hasM:r}:{points:s,hasZ:t}:r?{points:s,hasM:r}:{points:s}}function k(e,t,r=d(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;let o=e.coords,s=0;for(let e of t.points)for(let t=0;t<r;t++)o[s++]=e[t];return e}function q(e,t,r){if(!e)return null;let o=d(t,r),{coords:s,lengths:n}=e,l=[],i=0;for(let e of n){let t=[];for(let r=0;r<e;r++){let e=[];for(let t=0;t<o;t++)e.push(s[i++]);t.push(e)}l.push(t)}return t?r?{paths:l,hasZ:t,hasM:r}:{paths:l,hasZ:t}:r?{paths:l,hasM:r}:{paths:l}}function V(e,t,r=d(t.hasZ,t.hasM)){let{lengths:o,coords:s}=e,n=0;for(let e of t.paths){for(let t of e)for(let e=0;e<r;e++)s[n++]=t[e];o.push(e.length)}return e}function R(e,t,r){if(!e)return null;let o=d(t,r),{coords:s,lengths:n}=e,l=[],i=0;for(let e of n){let t=[];for(let r=0;r<e;r++){let e=[];for(let t=0;t<o;t++)e.push(s[i++]);t.push(e)}l.push(t)}return t?r?{rings:l,hasZ:t,hasM:r}:{rings:l,hasZ:t}:r?{rings:l,hasM:r}:{rings:l}}function D(e,t,r=t.hasZ,o=t.hasM){return z(e,t.rings,r,o)}function z(e,t,r,o){let s=d(r,o),{lengths:n,coords:l}=e,i=0;for(let r of(ea(e),t)){for(let e of r)for(let t=0;t<s;t++)l[i++]=e[t];n.push(r.length)}return e}let J=[],U=[];function Y(e,t,r,o,s){J[0]=e;let[n]=$(U,J,t,r,o,s);return eu(J),eu(U),n}function $(e,t,r,s,n,l){if(eu(e),!r){for(let r of t){let t=l?r.attributes[l]:void 0;e.push(new u.Om(null,r.attributes,null,t))}return e}switch(r){case"esriGeometryPoint":let i=G(s,n);for(let{geometry:r,attributes:o}of t){let t=null!=r?i(new c.A,r):null;e.push(new u.Om(t,o,null,l?o[l]:void 0))}break;case"esriGeometryMultipoint":let a=d(s,n);for(let{geometry:r,attributes:o}of t){let t=null!=r?k(new c.A,r,a):null;e.push(new u.Om(t,o,null,l?o[l]:void 0))}break;case"esriGeometryPolyline":let h=d(s,n);for(let{geometry:r,attributes:o,centroid:s}of t){let t=null!=r?V(new c.A,r,h):null,n=null!=s?L(new c.A,s):null;e.push(new u.Om(t,o,n,l?o[l]:void 0))}break;case"esriGeometryPolygon":case"esriGeometryMultiPatch":for(let{geometry:r,centroid:o,attributes:i}of t){let t=null!=r?D(new c.A,r,s,n):null,a=l?i[l]:void 0;null!=o?e.push(new u.Om(t,i,_(new c.A,o),a)):e.push(new u.Om(t,i,null,a))}break;default:y().error("convertToFeatureSet:unknown-geometry",new o.A(`Unable to parse unknown geometry type '${r}'`)),eu(e)}return e}function C(e,t,r,o){U[0]=e,K(J,U,t,r,o);let s=J[0];return eu(J),eu(U),s}function B(e,t,r){if(null==e)return null;let s=new c.A;return("hasZ"in e&&null==t&&(t=e.hasZ),"hasM"in e&&null==r&&(r=e.hasM),(0,a.fT)(e))?G(null!=t?t:null!=e.z,null!=r?r:null!=e.m)(s,e):(0,a.Bi)(e)?D(s,e,t,r):(0,a.Rg)(e)?V(s,e,d(t,r)):(0,a.U9)(e)?k(s,e,d(t,r)):void y().error("convertFromGeometry:unknown-geometry",new o.A(`Unable to parse unknown geometry type '${e}'`))}function Q(e,t,r,s){let n=e&&("coords"in e?e:e.geometry);if(null==n)return null;switch(t){case"esriGeometryPoint":{let e=x;return r&&s?e=O:r?e=P:s&&(e=A),e(n)}case"esriGeometryMultipoint":return j(n,r,s);case"esriGeometryPolyline":return q(n,r,s);case"esriGeometryPolygon":return R(n,r,s);default:return y().error("convertToGeometry:unknown-geometry",new o.A(`Unable to parse unknown geometry type '${t}'`)),null}}function K(e,t,r,s,n){if(eu(e),null==r){for(let r of t)e.push({attributes:r.attributes});return e}switch(r){case"esriGeometryPoint":let l=x;for(let r of(s&&n?l=O:s?l=P:n&&(l=A),t)){let{geometry:t,attributes:o}=r,s=null!=t?l(t):null;e.push({attributes:o,geometry:s})}break;case"esriGeometryMultipoint":for(let{geometry:r,attributes:o}of t)e.push({attributes:o,geometry:null!=r?j(r,s,n):null});break;case"esriGeometryPolyline":for(let{geometry:r,attributes:o}of t)e.push({attributes:o,geometry:null!=r?q(r,s,n):null});break;case"esriGeometryPolygon":for(let{geometry:r,attributes:o,centroid:l}of t){let t=null!=r?R(r,s,n):null;if(null!=l){let r=x(l);e.push({attributes:o,centroid:r,geometry:t})}else e.push({attributes:o,geometry:t})}break;default:y().error("convertToFeatureSet:unknown-geometry",new o.A(`Unable to parse unknown geometry type '${r}'`))}return e}function H(e){let{objectIdFieldName:t,spatialReference:r,transform:o,fields:s,hasM:n,hasZ:l,features:i,geometryType:a,exceededTransferLimit:u,uniqueIdField:h,queryGeometry:c,queryGeometryType:d}=e,y={features:K([],i,a,l,n),fields:s,geometryType:a,objectIdFieldName:t,spatialReference:r,uniqueIdField:h,queryGeometry:Q(c,d,!1,!1)};return o&&(y.transform=o),u&&(y.exceededTransferLimit=u),n&&(y.hasM=n),l&&(y.hasZ=l),y}function W(e,t){let r=new h.A,{hasM:s,hasZ:n,features:l,objectIdFieldName:i,spatialReference:a,geometryType:u,exceededTransferLimit:c,transform:d,fields:f}=e;return f&&(r.fields=f),r.geometryType=u??null,r.objectIdFieldName=i??t??null,r.spatialReference=a??null,r.objectIdFieldName?(l&&$(r.features,l,u,n,s,r.objectIdFieldName),c&&(r.exceededTransferLimit=c),s&&(r.hasM=s),n&&(r.hasZ=n),d&&(r.transform=d)):y().error(new o.A("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),r}function X(e){let{transform:t,features:r,hasM:o,hasZ:s}=e;if(!t)return e;for(let e of r)null!=e.geometry&&es(e.geometry,e.geometry,o,s,t),null!=e.centroid&&es(e.centroid,e.centroid,o,s,t);return e.transform=null,e}function ee(e,t){let{geometryType:r,features:o,hasM:s,hasZ:n}=t;if(!e)return t;for(let t=0;t<o.length;t++){let l=o[t],i=l.weakClone();i.geometry=new c.A,et(i.geometry,l.geometry,s,n,r,e),l.centroid&&(i.centroid=new c.A,et(i.centroid,l.centroid,s,n,"esriGeometryPoint",e)),o[t]=i}return t.transform=e,t}function et(e,t,r,o,s,n,l=r,i=o){if(ea(e),!t?.coords.length)return null;let a=f[s],{coords:u,lengths:h}=t,c=d(r,o),y=d(r&&l,o&&i),m=I(r,o,l,i);if(!h.length)return m(e.coords,u,0,0,N(n,u[0]),v(n,u[1])),ea(e,c,0),e;let g,p,b,M,w=0,T=0,S=0;for(let t of h){if(t<a)continue;let r=0;T=S,b=g=N(n,u[w]),M=p=v(n,u[w+1]),m(e.coords,u,T,w,b,M),r++,w+=c,T+=y;for(let o=1;o<t;o++,w+=c)b=N(n,u[w]),M=v(n,u[w+1]),b===g&&M===p||(m(e.coords,u,T,w,b-g,M-p),T+=y,r++,g=b,p=M);r>=a&&(e.lengths.push(r),S=T)}return eu(e.coords,S),e.coords.length?e:null}function er(e,t,r,o,s,n,l=r,i=o){if(ea(e),!t?.coords.length)return null;let a=f[s],{coords:u,lengths:h}=t,c=d(r,o),y=d(r&&l,o&&i),m=I(r,o,l,i);if(!h.length)return m(e.coords,u,0,0,u[0],u[1]),ea(e,c,0),e;let g=0,p=n*n;for(let t of h){if(t<a){g+=t*c;continue}let r=e.coords.length/y,o=g,s=g+(t-1)*c;m(e.coords,u,e.coords.length,o,u[o],u[o+1]),function e(t,r,o,s,n,l,i){let a,u=s,h=0;for(let e=l+o;e<i;e+=o)(a=function(e,t,r,o){let s=e[t],n=e[t+1],l=e[r],i=e[r+1],a=e[o],u=e[o+1],h=l,c=i,d=a-h,y=u-c;if(0!==d||0!==y){let e=((s-h)*d+(n-c)*y)/(d*d+y*y);e>1?(h=a,c=u):e>0&&(h+=d*e,c+=y*e)}return(d=s-h)*d+(y=n-c)*y}(r,e,l,i))>u&&(h=e,u=a);u>s&&(h-l>o&&e(t,r,o,s,n,l,h),n(t,r,t.length,h,r[h],r[h+1]),i-h>o&&e(t,r,o,s,n,h,i))}(e.coords,u,c,p,m,o,s),m(e.coords,u,e.coords.length,s,u[s],u[s+1]);let n=e.coords.length/y-r;n>=a?e.lengths.push(n):eu(e.coords,r*y),g+=t*c}return e.coords.length?e:null}function eo(e,t,r,o){if(!t?.coords?.length)return null;let s=d(r,o),n=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY;if(t&&t.coords){let e=t.coords;for(let t=0;t<e.length;t+=s){let r=e[t],o=e[t+1];n=Math.min(n,r),u=Math.max(u,r),a=Math.min(a,o),h=Math.max(h,o)}}return(0,l.is)(e)?(0,l.BI)(e,n,a,u,h):(0,i.fA)(n,a,u,h,e),e}function es(e,t,r,o,s){let{coords:l,lengths:i}=t,a=d(r,o);if(!l.length)return e!==t&&ea(e),e;(0,n.Lw)(s);let{originPosition:u,scale:h,translate:c}=s;eh.originPosition=u;let y=eh.scale;y[0]=h[0]??1,y[1]=-(h[1]??1),y[2]=h[2]??1,y[3]=h[3]??1;let f=eh.translate;if(f[0]=c[0]??0,f[1]=c[1]??0,f[2]=c[2]??0,f[3]=c[3]??0,!i.length){for(let t=0;t<a;++t)e.coords[t]=function({scale:e,translate:t},r,o){return r*e[o]+t[o]}(eh,l[t],t);return e!==t&&ea(e,a,0),e}let m=0;for(let t=0;t<i.length;t++){let r=i[t];e.lengths[t]=r;for(let t=0;t<a;++t)e.coords[m+t]=function({scale:e,translate:t},r,o){return r*e[o]+t[o]}(eh,l[m+t],t);let o=e.coords[m],s=e.coords[m+1];m+=a;for(let t=1;t<r;t++,m+=a){o+=l[m]*y[0],s+=l[m+1]*y[1],e.coords[m]=o,e.coords[m+1]=s;for(let t=2;t<a;++t)e.coords[m+t]=function({scale:e,translate:t},r,o){return r*e[o]+t[o]}(eh,l[m+t],t)}}return e!==t&&ea(e,l.length,i.length),e}function en(e,t,r,o,s,n){if(ea(e),e.lengths.push(...t.lengths),r===s&&o===n)for(let r=0;r<t.coords.length;r++)e.coords.push(t.coords[r]);else{let l=d(r,o),i=I(r,o,s,n),a=t.coords;for(let t=0;t<a.length;t+=l)i(e.coords,a,e.coords.length,t,a[t],a[t+1])}return e}function el(e,t){let{coords:r,lengths:o}=e,s=0,n=0;for(let e=0;e<o.length;e++){let l=o[e];n+=function(e,t,r,o){let s=0,n=e[o*t],l=e[o*(t+1)];for(let i=1;i<r;i++){let r=n+e[o*(t+i)],a=l+e[o*(t+i)+1],u=(r-n)*(a+l);n=r,l=a,s+=u}return .5*s}(r,s,l,t),s+=l}return Math.abs(n)}function ei(e,t,r,o,s){let n=d(o,s);if(!e.lengths.length){if(e.coords.length<2)return null;let[r,o]=e.coords,s=M(t,r),n=w(t,o);return new c.A([],[s,n])}let l=new c.A([],[0,0]),i=f[r],a="esriGeometryPolygon"===r||"esriGeometryPolyline"===r,u=0,h=0;for(let r=0;r<e.lengths.length;r++){let o=e.lengths[r],s=h,c=M(t,e.coords[n*u]),d=w(t,e.coords[n*u+1]);l.coords[h++]=c,l.coords[h++]=d;let f=0,g=0,p=1;for(let r=1;r<o;r++){let o=M(t,e.coords[n*(r+u)]),s=w(t,e.coords[n*(r+u)+1]);if(o!==c||s!==d){var y,m;let e=o-c,t=s-d;a&&0==(y=f)*t-e*(m=g)&&y*e+m*t>0?(l.coords[h-2]+=e,l.coords[h-1]+=t,c+=e,d+=t):(l.coords[h++]=o,l.coords[h++]=s,c=o,d=s,f=e,g=t,p+=1)}}p<i?h=s:l.lengths.push(p),u+=o}return 0===l.lengths.length?null:l}function ea(e,t=0,r=0){eu(e.lengths,r),eu(e.coords,t)}function eu(e,t=0){e.length!==t&&(e.length=t)}let eh={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]}},82795:(e,t,r)=>{r.d(t,{N3:()=>i,Om:()=>l});var o=r(94264),s=r(11506),n=r(56599);class l{constructor(e=null,t={},r,o,s=0){this.geometry=e,this.attributes=t,this.centroid=r,this.objectId=o,this.displayId=s}static fromJSON(e){let t=e.geometry?n.A.fromJSON(e.geometry):null,r=e.centroid?n.A.fromJSON(e.centroid):null,o=e.objectId;return new l(t,e.attributes,r,o)}weakClone(){let e=new l(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e}clone(){let e=new l(this.geometry?.clone(),{...this.attributes},this.centroid?.clone(),this.objectId);return e.displayId=this.displayId,e}ensureCentroid(e){return this.centroid??=(0,s.Q)(new n.A,this.geometry,e.hasZ,e.hasM),this.centroid}get usedMemory(){return 128+(0,o.lM)(this.attributes)+(this.geometry?.usedMemory??0)}}function i(e){return!!e.geometry?.coords?.length}},94264:(e,t,r)=>{r.d(t,{Qf:()=>a,Qh:()=>l,RS:()=>s,ez:()=>h,i5:()=>c,lM:()=>n,qK:()=>u});var o=r(48678);let s=16;function n(e){if(!e)return 0;let t=u;for(let r in e)e.hasOwnProperty(r)&&(t+=i(e[r],!1));return t}function l(e){if(!e)return 0;if("number"==typeof e[0])return a(e);if(Array.isArray(e)){var t=e;let r=t.length;if(0===r||"number"==typeof t[0])return function(e,t){return h+e.length*t}(t,8);let o=h;for(let e=0;e<r;e++)o+=i(t[e]);return o}let r=u;for(let t in e)e.hasOwnProperty(t)&&(r+=i(e[t]));return r}function i(e,t=!0){switch(typeof e){case"object":return t?l(e):u;case"string":return 32+e.length;case"number":return s;case"boolean":return 4;default:return 8}}function a(...e){return e.reduce((e,t)=>{var r,n;return e+(t?(0,o.iu)(t)?t.byteLength+c:Array.isArray(t)?(r=t,n=s,h+r.length*n):0:0)},0)}let u=32,h=16,c=145},98569:(e,t,r)=>{function o(e){let t=e.layer;return"floorInfo"in t&&t.floorInfo?.floorField&&"floors"in e.view?n(e.view.floors,t.floorInfo.floorField):null}function s(e,t){return"floorInfo"in t&&t.floorInfo?.floorField?n(e,t.floorInfo.floorField):null}function n(e,t){if(!e?.length)return null;let r=e.filter(e=>""!==e).map(e=>`'${e}'`);return r.push("''"),`${t} IN (${r.join(",")}) OR ${t} IS NULL`}r.d(t,{E:()=>o,f:()=>s})}}]);