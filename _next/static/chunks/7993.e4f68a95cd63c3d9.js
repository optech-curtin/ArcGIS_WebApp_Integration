"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7993],{27993:(e,t,i)=>{i.d(t,{PieChartAm5:()=>C,PieSeriesAm5:()=>S});var s=i(81856),a=i(96545),l=i(85605),r=i(91461),n=i(59570);class h extends l.w{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeRadialText("",this.textStyle)})}_afterNew(){super._afterNew()}_beforeChanged(){super._beforeChanged(),this._display.clear(),this.isDirty("textType")&&(this._display.textType=this.get("textType"),this.markDirtyBounds()),this.isDirty("radius")&&(this._display.radius=this.get("radius"),this.markDirtyBounds()),this.isDirty("startAngle")&&(this._display.startAngle=(this.get("startAngle",0)+90)*l.x,this.markDirtyBounds()),this.isDirty("inside")&&(this._display.inside=this.get("inside"),this.markDirtyBounds()),this.isDirty("orientation")&&(this._display.orientation=this.get("orientation"),this.markDirtyBounds()),this.isDirty("kerning")&&(this._display.kerning=this.get("kerning"),this.markDirtyBounds())}}Object.defineProperty(h,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialText"}),Object.defineProperty(h,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:l.w.classNames.concat([h.className])});class u extends l.L{constructor(){super(...arguments),Object.defineProperty(this,"_flipped",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._textKeys.push("textType","kerning"),super._afterNew()}_makeText(){this._text=this.children.push(h.new(this._root,{}))}baseRadius(){let e=this.getPrivate("radius",0),t=this.getPrivate("innerRadius",0),i=this.get("baseRadius",0);return t+(0,l.l)(i,e-t)}radius(){let e=this.get("inside",!1);return this.baseRadius()+this.get("radius",0)*(e?-1:1)}_updateChildren(){if(super._updateChildren(),this.isDirty("baseRadius")||this.isPrivateDirty("radius")||this.isPrivateDirty("innerRadius")||this.isDirty("labelAngle")||this.isDirty("radius")||this.isDirty("inside")||this.isDirty("orientation")||this.isDirty("textType")){let e=this.get("textType","adjusted"),t=this.get("inside",!1),i=this.get("orientation"),s=(0,l.y)(this.get("labelAngle",0));this._text.set("startAngle",this.get("labelAngle",0)),this._text.set("inside",t);let a=(0,l.A)(s),r=(0,l.z)(s),n=this.baseRadius(),h=this.radius();if(this._display.angle=0,"circular"==e)this.setAll({paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}),this.setRaw("x",void 0),this.setRaw("y",void 0),this._text.set("orientation",i),this._text.set("radius",h);else{0==n&&(s=0,h=0);let t=h*r,u=h*a;"radial"==e?(this.setRaw("x",t),this.setRaw("y",u),s<90||s>270||"auto"!=i?(this._display.angle=s,this._flipped=!1):(this._display.angle=s+180,this._flipped=!0),this._dirty.rotation=!1):"adjusted"==e?(this.setRaw("centerX",l.p),this.setRaw("centerY",l.p),this.setRaw("x",t),this.setRaw("y",u)):"regular"==e&&(this.setRaw("x",t),this.setRaw("y",u))}this.markDirtyPosition(),this.markDirtyBounds()}}_updatePosition(){let e=this.get("textType","regular"),t=this.get("inside",!1),i=0,s=0,a=this.get("labelAngle",0),r=this.localBounds(),n=r.right-r.left,h=r.bottom-r.top;if("radial"==e){if(this._flipped){let e=this.get("centerX");e instanceof l.P&&(n*=1-2*e.value),i=n*(0,l.z)(a),s=n*(0,l.A)(a)}}else t||"adjusted"!=e||(i=n/2*(0,l.z)(a),s=h/2*(0,l.A)(a));this.setRaw("dx",i),this.setRaw("dy",s),super._updatePosition()}get text(){return this._text}}Object.defineProperty(u,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialLabel"}),Object.defineProperty(u,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:l.L.classNames.concat([u.className])});let o=Math.abs,c=Math.atan2,d=Math.cos,p=Math.max,g=Math.min,y=Math.sin,b=Math.sqrt,f=Math.PI,m=f/2,_=2*f;function x(e){return e>=1?m:e<=-1?-m:Math.asin(e)}function v(e){return e.innerRadius}function w(e){return e.outerRadius}function k(e){return e.startAngle}function D(e){return e.endAngle}function A(e){return e&&e.padAngle}function R(e,t,i,s,a,l,r){var n=e-i,h=t-s,u=(r?l:-l)/b(n*n+h*h),o=u*h,c=-u*n,d=e+o,g=t+c,y=i+o,f=s+c,m=(d+y)/2,_=(g+f)/2,x=y-d,v=f-g,w=x*x+v*v,k=a-l,D=d*f-y*g,A=(v<0?-1:1)*b(p(0,k*k*w-D*D)),R=(D*v-x*A)/w,P=(-D*x-v*A)/w,T=(D*v+x*A)/w,L=(-D*x+v*A)/w,N=R-m,C=P-_,S=T-m,j=L-_;return N*N+C*C>S*S+j*j&&(R=T,P=L),{cx:R,cy:P,x01:-o,y01:-c,x11:R*(a/k-1),y11:P*(a/k-1)}}class P extends l.e{constructor(){super(...arguments),Object.defineProperty(this,"ix",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"iy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_generator",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=v,t=w,i=(0,a.c)(0),s=null,l=k,r=D,n=A,h=null,u=(0,a.w)(p);function p(){var a,p,v=+e.apply(this,arguments),w=+t.apply(this,arguments),k=l.apply(this,arguments)-m,D=r.apply(this,arguments)-m,A=o(D-k),P=D>k;if(h||(h=a=u()),w<v&&(p=w,w=v,v=p),w>1e-12)if(A>_-1e-12)h.moveTo(w*d(k),w*y(k)),h.arc(0,0,w,k,D,!P),v>1e-12&&(h.moveTo(v*d(D),v*y(D)),h.arc(0,0,v,D,k,P));else{var T,L,N=k,C=D,S=k,j=D,O=A,I=A,M=n.apply(this,arguments)/2,B=M>1e-12&&(s?+s.apply(this,arguments):b(v*v+w*w)),z=g(o(w-v)/2,+i.apply(this,arguments)),F=z,H=z;if(B>1e-12){var X=x(B/v*y(M)),Y=x(B/w*y(M));(O-=2*X)>1e-12?(S+=X*=P?1:-1,j-=X):(O=0,S=j=(k+D)/2),(I-=2*Y)>1e-12?(N+=Y*=P?1:-1,C-=Y):(I=0,N=C=(k+D)/2)}var V=w*d(N),W=w*y(N),U=v*d(j),E=v*y(j);if(z>1e-12){var K,q=w*d(C),G=w*y(C),J=v*d(S),Q=v*y(S);if(A<f)if(K=function(e,t,i,s,a,l,r,n){var h=i-e,u=s-t,o=r-a,c=n-l,d=c*h-o*u;if(!(d*d<1e-12))return[e+(d=(o*(t-l)-c*(e-a))/d)*h,t+d*u]}(V,W,J,Q,q,G,U,E)){var Z,$=V-K[0],ee=W-K[1],et=q-K[0],ei=G-K[1],es=1/y(((Z=($*et+ee*ei)/(b($*$+ee*ee)*b(et*et+ei*ei)))>1?0:Z<-1?f:Math.acos(Z))/2),ea=b(K[0]*K[0]+K[1]*K[1]);F=g(z,(v-ea)/(es-1)),H=g(z,(w-ea)/(es+1))}else F=H=0}I>1e-12?H>1e-12?(T=R(J,Q,V,W,w,H,P),L=R(q,G,U,E,w,H,P),h.moveTo(T.cx+T.x01,T.cy+T.y01),H<z?h.arc(T.cx,T.cy,H,c(T.y01,T.x01),c(L.y01,L.x01),!P):(h.arc(T.cx,T.cy,H,c(T.y01,T.x01),c(T.y11,T.x11),!P),h.arc(0,0,w,c(T.cy+T.y11,T.cx+T.x11),c(L.cy+L.y11,L.cx+L.x11),!P),h.arc(L.cx,L.cy,H,c(L.y11,L.x11),c(L.y01,L.x01),!P))):(h.moveTo(V,W),h.arc(0,0,w,N,C,!P)):h.moveTo(V,W),v>1e-12&&O>1e-12?F>1e-12?(T=R(U,E,q,G,v,-F,P),L=R(V,W,J,Q,v,-F,P),h.lineTo(T.cx+T.x01,T.cy+T.y01),F<z?h.arc(T.cx,T.cy,F,c(T.y01,T.x01),c(L.y01,L.x01),!P):(h.arc(T.cx,T.cy,F,c(T.y01,T.x01),c(T.y11,T.x11),!P),h.arc(0,0,v,c(T.cy+T.y11,T.cx+T.x11),c(L.cy+L.y11,L.cx+L.x11),P),h.arc(L.cx,L.cy,F,c(L.y11,L.x11),c(L.y01,L.x01),!P))):h.arc(0,0,v,j,S,P):h.lineTo(U,E)}else h.moveTo(0,0);if(h.closePath(),a)return h=null,a+""||null}return p.centroid=function(){var i=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,s=(+l.apply(this,arguments)+ +r.apply(this,arguments))/2-f/2;return[d(s)*i,y(s)*i]},p.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:(0,a.c)(+t),p):e},p.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:(0,a.c)(+e),p):t},p.cornerRadius=function(e){return arguments.length?(i="function"==typeof e?e:(0,a.c)(+e),p):i},p.padRadius=function(e){return arguments.length?(s=null==e?null:"function"==typeof e?e:(0,a.c)(+e),p):s},p.startAngle=function(e){return arguments.length?(l="function"==typeof e?e:(0,a.c)(+e),p):l},p.endAngle=function(e){return arguments.length?(r="function"==typeof e?e:(0,a.c)(+e),p):r},p.padAngle=function(e){return arguments.length?(n="function"==typeof e?e:(0,a.c)(+e),p):n},p.context=function(e){return arguments.length?(h=e??null,p):h},p}()})}_getTooltipPoint(){let e=this.get("tooltipX"),t=this.get("tooltipY"),i=0,s=0;(0,l.k)(e)&&(i=e),(0,l.k)(t)&&(s=t);let a=this.get("radius",0),r=this.get("innerRadius",0);return a+=this.get("dRadius",0),(r+=this.get("dInnerRadius",0))<0&&(r=a+r),e instanceof l.P&&(i=this.ix*(r+(a-r)*e.value)),t instanceof l.P&&(s=this.iy*(r+(a-r)*t.value)),this.get("arc")>=360&&0==r&&(i=0,s=0),{x:i,y:s}}_beforeChanged(){super._beforeChanged(),(this.isDirty("radius")||this.isDirty("arc")||this.isDirty("innerRadius")||this.isDirty("startAngle")||this.isDirty("dRadius")||this.isDirty("dInnerRadius")||this.isDirty("cornerRadius")||this.isDirty("shiftRadius"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){let e=this.get("startAngle",0),t=this.get("arc",0),i=this._generator;t<0&&(e+=t,t*=-1),t>.1&&i.cornerRadius(this.get("cornerRadius",0)),i.context(this._display);let s=this.get("radius",0),a=this.get("innerRadius",0);s+=this.get("dRadius",0),(a+=this.get("dInnerRadius",0))<0&&(a=s+a),i({innerRadius:a,outerRadius:s,startAngle:(e+90)*l.x,endAngle:(e+t+90)*l.x});let r=e+t/2;this.ix=(0,l.z)(r),this.iy=(0,l.A)(r);let n=this.get("shiftRadius",0);this.setRaw("dx",this.ix*n),this.setRaw("dy",this.iy*n),this.markDirtyPosition()}}}Object.defineProperty(P,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Slice"}),Object.defineProperty(P,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:l.e.classNames.concat([P.className])});class T extends l.T{setupDefaultRules(){super.setupDefaultRules();let e=this._root.interfaceColors,t=this.rule.bind(this);t("PercentSeries").setAll({legendLabelText:"{category}",legendValueText:"{valuePercentTotal.formatNumber('0.00p')}",colors:r.C.new(this._root,{}),width:l.a,height:l.a}),t("PieChart").setAll({radius:(0,l.j)(80),startAngle:-90,endAngle:270}),t("PieSeries").setAll({alignLabels:!0,startAngle:-90,endAngle:270}),t("PieSeries").states.create("hidden",{endAngle:-90,opacity:0}),t("Slice",["pie"]).setAll({position:"absolute",isMeasured:!1,x:0,y:0,toggleKey:"active",tooltipText:"{category}: {valuePercentTotal.formatNumber('0.00p')}",strokeWidth:1,strokeOpacity:1,role:"figure",lineJoin:"round"}),t("Slice",["pie"]).states.create("active",{shiftRadius:20,scale:1}),t("Slice",["pie"]).states.create("hoverActive",{scale:1.04}),t("Slice",["pie"]).states.create("hover",{scale:1.04}),t("RadialLabel",["pie"]).setAll({textType:"aligned",radius:10,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",paddingTop:5,paddingBottom:5,populateText:!0}),t("Tick",["pie"]).setAll({location:1}),t("SlicedChart").setAll({paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10}),t("FunnelSeries").setAll({startLocation:0,endLocation:1,orientation:"vertical",alignLabels:!0,sequencedInterpolation:!0}),t("FunnelSlice").setAll({interactive:!0,expandDistance:0}),t("FunnelSlice").states.create("hover",{expandDistance:.15}),t("Label",["funnel"]).setAll({populateText:!0,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",centerY:l.p}),t("Label",["funnel","horizontal"]).setAll({centerX:0,centerY:l.p,rotation:-90}),t("Label",["funnel","vertical"]).setAll({centerY:l.p,centerX:0}),t("Tick",["funnel"]).setAll({location:1}),t("FunnelSlice",["funnel","link"]).setAll({fillOpacity:.5,strokeOpacity:0,expandDistance:-.1}),t("FunnelSlice",["funnel","link","vertical"]).setAll({height:10}),t("FunnelSlice",["funnel","link","horizontal"]).setAll({width:10}),t("PyramidSeries").setAll({valueIs:"area"}),t("FunnelSlice",["pyramid","link"]).setAll({fillOpacity:.5}),t("FunnelSlice",["pyramid","link","vertical"]).setAll({height:0}),t("FunnelSlice",["pyramid","link","horizontal"]).setAll({width:0}),t("FunnelSlice",["pyramid"]).setAll({interactive:!0,expandDistance:0}),t("FunnelSlice",["pyramid"]).states.create("hover",{expandDistance:.15}),t("Label",["pyramid"]).setAll({populateText:!0,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",centerY:l.p}),t("Label",["pyramid","horizontal"]).setAll({centerX:0,centerY:l.p,rotation:-90}),t("Label",["pyramid","vertical"]).setAll({centerY:l.p,centerX:0}),t("Tick",["pyramid"]).setAll({location:1}),t("FunnelSlice",["pictorial"]).setAll({interactive:!0,tooltipText:"{category}: {valuePercentTotal.formatNumber('0.00p')}"}),t("Label",["pictorial"]).setAll({populateText:!0,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",centerY:l.p}),t("Label",["pictorial","horizontal"]).setAll({centerX:0,centerY:l.p,rotation:-90}),t("Label",["pictorial","vertical"]).setAll({centerY:l.p,centerX:0}),t("FunnelSlice",["pictorial","link"]).setAll({fillOpacity:.5,width:0,height:0}),t("Tick",["pictorial"]).setAll({location:.5});{let i=t("Graphics",["pictorial","background"]);i.setAll({fillOpacity:.2}),(0,n.s)(i,"fill",e,"alternativeBackground")}}}class L extends a.S{_afterNew(){this._defaultThemes.push(T.new(this._root)),super._afterNew(),this.chartContainer.children.push(this.seriesContainer),this.seriesContainer.children.push(this.bulletsContainer)}_processSeries(e){super._processSeries(e),this.seriesContainer.children.moveValue(this.bulletsContainer,this.seriesContainer.children.length-1)}}Object.defineProperty(L,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PercentChart"}),Object.defineProperty(L,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:a.S.classNames.concat([L.className])});class N extends a.a{constructor(){super(...arguments),Object.defineProperty(this,"slicesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(l.g.new(this._root,{position:"absolute",isMeasured:!1}))}),Object.defineProperty(this,"labelsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(l.g.new(this._root,{position:"absolute",isMeasured:!1}))}),Object.defineProperty(this,"ticksContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(l.g.new(this._root,{position:"absolute",isMeasured:!1}))}),Object.defineProperty(this,"_lLabels",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_rLabels",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_hLabels",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"slices",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(this._makeSlices())}),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(this._makeLabels())}),Object.defineProperty(this,"ticks",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(this._makeTicks())})}makeSlice(e){let t=this.slicesContainer.children.push(this.slices.make());return t.on("fill",()=>{this.updateLegendMarker(e)}),t.on("fillPattern",()=>{this.updateLegendMarker(e)}),t.on("stroke",()=>{this.updateLegendMarker(e)}),t._setDataItem(e),e.set("slice",t),this.slices.push(t),t}makeLabel(e){let t=this.labelsContainer.children.push(this.labels.make());return t._setDataItem(e),e.set("label",t),this.labels.push(t),t}_shouldMakeBullet(e){return null!=e.get("value")}makeTick(e){let t=this.ticksContainer.children.push(this.ticks.make());return t._setDataItem(e),e.set("tick",t),this.ticks.push(t),t}_afterNew(){this.fields.push("category","fill"),super._afterNew()}_onDataClear(){let e=this.get("colors");e&&e.reset();let t=this.get("patterns");t&&t.reset()}_prepareChildren(){if(super._prepareChildren(),this._lLabels=[],this._rLabels=[],this._hLabels=[],this._valuesDirty){let e=0,t=0,i=0,s=1/0,a=0;(0,l.i)(this._dataItems,i=>{let s=i.get("valueWorking",0);e+=s,t+=Math.abs(s)}),(0,l.i)(this._dataItems,e=>{let l=e.get("valueWorking",0);l>i&&(i=l),l<s&&(s=l),a++;let r=l/t;0==t&&(r=0),e.setRaw("valuePercentTotal",100*r)}),this.setPrivateRaw("valueLow",s),this.setPrivateRaw("valueHigh",i),this.setPrivateRaw("valueSum",e),this.setPrivateRaw("valueAverage",e/a),this.setPrivateRaw("valueAbsoluteSum",t)}}show(e){let t=Object.create(null,{show:{get:()=>super.show}});return(0,s.d)(this,void 0,void 0,function*(){let i=[];i.push(t.show.call(this,e)),i.push(this._sequencedShowHide(!0,e)),yield Promise.all(i)})}hide(e){let t=Object.create(null,{hide:{get:()=>super.hide}});return(0,s.d)(this,void 0,void 0,function*(){let i=[];i.push(t.hide.call(this,e)),i.push(this._sequencedShowHide(!1,e)),yield Promise.all(i)})}_updateChildren(){super._updateChildren(),this._valuesDirty&&(0,l.i)(this._dataItems,e=>{e.get("label").text.markDirtyText()}),(this.isDirty("legendLabelText")||this.isDirty("legendValueText"))&&(0,l.i)(this._dataItems,e=>{this.updateLegendValue(e)}),this._arrange()}_arrange(){this._arrangeDown(this._lLabels),this._arrangeUp(this._lLabels),this._arrangeDown(this._rLabels),this._arrangeUp(this._rLabels),this._arrangeLeft(this._hLabels),this._arrangeRight(this._hLabels),(0,l.i)(this.dataItems,e=>{this._updateTick(e)})}_afterChanged(){super._afterChanged(),this._arrange()}processDataItem(e){if(super.processDataItem(e),null==e.get("fill")){let t=this.get("colors");t&&e.setRaw("fill",t.next())}if(null==e.get("fillPattern")){let t=this.get("patterns");t&&e.setRaw("fillPattern",t.next())}}showDataItem(e,t){let i=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return(0,s.d)(this,void 0,void 0,function*(){let s=[i.showDataItem.call(this,e,t)];(0,l.k)(t)||(t=this.get("stateAnimationDuration",0));let a=this.get("stateAnimationEasing"),r=e.get("value"),n=e.animate({key:"valueWorking",to:r,duration:t,easing:a});n&&s.push(n.waitForStop());let h=e.get("tick");h&&s.push(h.show(t));let u=e.get("label");u&&s.push(u.show(t));let o=e.get("slice");o&&s.push(o.show(t)),o.get("active")&&o.states.applyAnimate("active"),yield Promise.all(s)})}hideDataItem(e,t){let i=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return(0,s.d)(this,void 0,void 0,function*(){let s=[i.hideDataItem.call(this,e,t)],a=this.states.create("hidden",{});(0,l.k)(t)||(t=a.get("stateAnimationDuration",this.get("stateAnimationDuration",0)));let r=a.get("stateAnimationEasing",this.get("stateAnimationEasing")),n=e.animate({key:"valueWorking",to:0,duration:t,easing:r});n&&s.push(n.waitForStop());let h=e.get("tick");h&&s.push(h.hide(t));let u=e.get("label");u&&s.push(u.hide(t));let o=e.get("slice");o.hideTooltip(),o&&s.push(o.hide(t)),yield Promise.all(s)})}disposeDataItem(e){super.disposeDataItem(e);let t=e.get("label");t&&(this.labels.removeValue(t),t.dispose());let i=e.get("tick");i&&(this.ticks.removeValue(i),i.dispose());let s=e.get("slice");s&&(this.slices.removeValue(s),s.dispose())}hoverDataItem(e){let t=e.get("slice");t&&!t.isHidden()&&t.hover()}unhoverDataItem(e){let t=e.get("slice");t&&t.unhover()}updateLegendMarker(e){if(e){let t=e.get("slice");if(t){let i=e.get("legendDataItem");if(i){let e=i.get("markerRectangle");(0,l.i)(l.v,i=>{null!=t.get(i)&&e.set(i,t.get(i))})}}}}_arrangeDown(e){if(e){let t=this._getNextDown();e.sort((e,t)=>e.y>t.y?1:e.y<t.y?-1:0),(0,l.i)(e,e=>{let i=e.label.adjustedLocalBounds(),s=i.top;e.y+s<t&&(e.y=t-s),e.label.set("y",e.y),t=e.y+i.bottom})}}_getNextUp(){return this.labelsContainer.maxHeight()}_getNextDown(){return 0}_arrangeUp(e){if(e){let t=this._getNextUp();e.sort((e,t)=>e.y<t.y?1:e.y>t.y?-1:0),(0,l.i)(e,e=>{let i=e.label.adjustedLocalBounds(),s=i.bottom;e.y+s>t&&(e.y=t-s),e.label.set("y",e.y),t=e.y+i.top})}}_arrangeRight(e){if(e){let t=0;e.sort((e,t)=>e.y>t.y?1:e.y<t.y?-1:0),(0,l.i)(e,e=>{let i=e.label.adjustedLocalBounds(),s=i.left;e.y+s<t&&(e.y=t-s),e.label.set("x",e.y),t=e.y+i.right})}}_arrangeLeft(e){if(e){let t=this.labelsContainer.maxWidth();e.sort((e,t)=>e.y<t.y?1:e.y>t.y?-1:0),(0,l.i)(e,e=>{let i=e.label.adjustedLocalBounds(),s=i.right;e.y+s>t&&(e.y=t-s),e.label.set("x",e.y),t=e.y+i.left})}}_updateSize(){super._updateSize(),this.markDirty()}_updateTick(e){}_dispose(){super._dispose();let e=this.chart;e&&e.series.removeValue(this)}}Object.defineProperty(N,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PercentSeries"}),Object.defineProperty(N,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:a.a.classNames.concat([N.className])});class C extends L{constructor(){super(...arguments),Object.defineProperty(this,"_maxRadius",{enumerable:!0,configurable:!0,writable:!0,value:1})}_afterNew(){super._afterNew(),this.seriesContainer.setAll({x:l.p,y:l.p})}_prepareChildren(){super._prepareChildren();let e=this.chartContainer,t=e.innerWidth(),i=e.innerHeight(),s=this.get("startAngle",0),a=this.get("endAngle",0),r=this.get("innerRadius"),n=(0,l.B)(0,0,s,a,1),h=t/(n.right-n.left),u=i/(n.bottom-n.top),o={left:0,right:0,top:0,bottom:0};if(r instanceof l.P){let e=r.value,n=Math.min(h,u);e=Math.max(n*e,n-Math.min(i,t))/n,o=(0,l.B)(0,0,s,a,e),this.setPrivateRaw("irModifyer",e/r.value)}n=(0,l.D)([n,o]);let c=this._maxRadius;this._maxRadius=Math.min(h,u);let d=(0,l.l)(this.get("radius",0),this._maxRadius);this.seriesContainer.setAll({dy:-d*(n.bottom+n.top)/2,dx:-d*(n.right+n.left)/2}),(this.isDirty("startAngle")||this.isDirty("endAngle")||c!=this._maxRadius)&&this.series.each(e=>{e._markDirtyKey("startAngle")}),(this.isDirty("innerRadius")||this.isDirty("radius"))&&this.series.each(e=>{e._markDirtyKey("innerRadius")})}radius(e){let t=(0,l.l)(this.get("radius",0),this._maxRadius),i=(0,l.l)(this.get("innerRadius",0),t);if(e){let s=this.series.indexOf(e),a=this.series.length,r=e.get("radius");return null!=r?i+(0,l.l)(r,t-i):i+(t-i)/a*(s+1)}return t}innerRadius(e){let t=this.radius(),i=(0,l.l)(this.get("innerRadius",0),t);if(i<0&&(i=t+i),e){let s=this.series.indexOf(e),a=this.series.length,r=e.get("innerRadius");return null!=r?i+(0,l.l)(r,t-i):i+(t-i)/a*s}return i}_updateSize(){super._updateSize(),this.markDirtyKey("radius")}}Object.defineProperty(C,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PieChart"}),Object.defineProperty(C,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:L.classNames.concat([C.className])});class S extends N{_makeSlices(){return new l.t(l.u.new({}),()=>P._new(this._root,{themeTags:(0,l.m)(this.slices.template.get("themeTags",[]),["pie","series"])},[this.slices.template]))}_makeLabels(){return new l.t(l.u.new({}),()=>u._new(this._root,{themeTags:(0,l.m)(this.labels.template.get("themeTags",[]),["pie","series"])},[this.labels.template]))}_makeTicks(){return new l.t(l.u.new({}),()=>a.T._new(this._root,{themeTags:(0,l.m)(this.ticks.template.get("themeTags",[]),["pie","series"])},[this.ticks.template]))}processDataItem(e){super.processDataItem(e);let t=this.makeSlice(e);t.on("scale",()=>{this._updateTick(e)}),t.on("shiftRadius",()=>{this._updateTick(e)}),t.events.on("positionchanged",()=>{this._updateTick(e)});let i=this.makeLabel(e);i.events.on("positionchanged",()=>{this._updateTick(e)}),this.makeTick(e),t.events.on("positionchanged",()=>{i.markDirty()})}_getNextUp(){let e=this.chart;return e?e._maxRadius:this.labelsContainer.maxHeight()/2}_getNextDown(){let e=this.chart;return e?-e._maxRadius:-this.labelsContainer.maxHeight()/2}_prepareChildren(){super._prepareChildren();let e=this.chart;if(e){if(this.isDirty("alignLabels")){let e=this.labels.template;if(this.get("alignLabels"))e.set("textType","aligned");else{let t=e.get("textType");null!=t&&"aligned"!=t||e.set("textType","adjusted")}}if(this._valuesDirty||this.isDirty("radius")||this.isDirty("innerRadius")||this.isDirty("startAngle")||this.isDirty("endAngle")||this.isDirty("alignLabels")){this.markDirtyBounds();let t=this.get("startAngle",e.get("startAngle",-90)),i=this.get("endAngle",e.get("endAngle",270))-t,s=t,a=e.radius(this);this.setPrivateRaw("radius",a);let r=e.innerRadius(this)*e.getPrivate("irModifyer",1);r<0&&(r=a+r),(0,l.i)(this._dataItems,e=>{this.updateLegendValue(e);let t=i*e.get("valuePercentTotal")/100,n=e.get("slice");if(n){n.set("radius",a),n.set("innerRadius",r),n.set("startAngle",s),n.set("arc",t);let i=e.get("fill");n._setDefault("fill",i),n._setDefault("stroke",i);let l=e.get("fillPattern");n._setDefault("fillPattern",l)}let h=(0,l.y)(s+t/2),u=e.get("label");if(u&&(u.setPrivate("radius",a),u.setPrivate("innerRadius",r),u.set("labelAngle",h),"aligned"==u.get("textType"))){let e=a+u.get("radius",0),t=a*(0,l.A)(h);h>90&&h<=270?(u.isHidden()||u.isHiding()||this._lLabels.push({label:u,y:t}),e*=-1,e-=this.labelsContainer.get("paddingLeft",0),u.set("centerX",l.a),u.setPrivateRaw("left",!0)):(u.isHidden()||u.isHiding()||this._rLabels.push({label:u,y:t}),e+=this.labelsContainer.get("paddingRight",0),u.set("centerX",0),u.setPrivateRaw("left",!1)),u.set("x",e),u.set("y",a*(0,l.A)(h))}s+=t,this._updateTick(e)})}}}_updateTick(e){let t=e.get("tick"),i=e.get("label"),s=e.get("slice"),a=t.get("location",1);if(t&&i&&s){let e=(s.get("shiftRadius",0)+s.get("radius",0))*s.get("scale",1)*a,r=i.get("labelAngle",0),n=(0,l.z)(r),h=(0,l.A)(r),u=this.labelsContainer,o=u.get("paddingLeft",0),c=u.get("paddingRight",0),d=0,p=0;d=i.x(),p=i.y();let g=[];if(0!=d||0!=p){if("circular"==i.get("textType")){let e=i.radius()-i.get("paddingBottom",0),t=i.get("labelAngle",0);d=e*(0,l.z)(t),p=e*(0,l.A)(t)}let t=-c;i.getPrivate("left")&&(t=o),g=[{x:s.x()+e*n,y:s.y()+e*h},{x:d+t,y:p},{x:d,y:p}]}t.set("points",g)}}_positionBullet(e){let t=e.get("sprite");if(t){let i=t.dataItem.get("slice");if(i){let s=i.get("innerRadius",0),a=i.get("radius",0),r=i.get("startAngle",0)+i.get("arc",0)*e.get("locationX",.5),n=s+(a-s)*e.get("locationY",.5);t.setAll({x:(0,l.z)(r)*n,y:(0,l.A)(r)*n})}}}}Object.defineProperty(S,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PieSeries"}),Object.defineProperty(S,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:N.classNames.concat([S.className])})}}]);