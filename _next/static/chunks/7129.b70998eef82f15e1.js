"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7129],{9416:(e,t,r)=>{r.d(t,{K:()=>l});var n=r(20538),i=r(87196),o=r(63599),a=r(56911);class s{constructor(){this.position0=(0,a.vt)(),this.position1=(0,a.vt)(),this.faceNormal0=(0,a.vt)(),this.faceNormal1=(0,a.vt)(),this.componentIndex=0,this.cosAngle=0}}function l(e,t,r){let i=e.vertices.position,a=e.vertices.componentIndex,s=N.position0,l=N.position1,c=N.faceNormal0,S=N.faceNormal1,{edges:R,normals:m}=function(e){let t=e.faces.length/3,r=e.faces,n=e.neighbors,i=e.vertices.position;f.length=d.length=0;for(let e=0;e<t;e++){let t=3*e,a=n[t],s=n[t+1],l=n[t+2],c=r[t],u=r[t+1],N=r[t+2];i.getVec(c,O),i.getVec(u,p),i.getVec(N,A),(0,o.d)(p,p,O),(0,o.d)(A,A,O),(0,o.e)(O,p,A),(0,o.n)(O,O),d.pushArray(O),(-1===a||c<u)&&(f.push(c),f.push(u),f.push(e),f.push(a)),(-1===s||u<N)&&(f.push(u),f.push(N),f.push(e),f.push(s)),(-1===l||N<c)&&(f.push(N),f.push(c),f.push(e),f.push(l))}return{edges:f,normals:d}}(e),L=R.length/4,v=t.allocate(L),D=0,M=r?.allocate(L),y=0,C=0,w=0;u.length=0;for(let e=0;e<L;++e){let t=4*e;i.getVec(R.data[t],s),i.getVec(R.data[t+1],l);let r=u.pushNew();r.index=4*e,r.length=(0,o.j)(s,l)}u.sort((e,t)=>t.length-e.length);let P=[],U=[];u.forAll(({length:e,index:u})=>{var f,d,O,p;let A=R.data[u],L=R.data[u+1],b=R.data[u+2],V=R.data[u+3],F=-1===V;if(i.getVec(A,s),i.getVec(L,l),F){let e=3*b;(0,o.i)(c,m.data[e],m.data[e+1],m.data[e+2]),(0,o.c)(S,c),N.componentIndex=a.get(A),N.cosAngle=(0,o.f)(c,S)}else{let e=3*b;if((0,o.i)(c,m.data[e],m.data[e+1],m.data[e+2]),e=3*V,(0,o.i)(S,m.data[e],m.data[e+1],m.data[e+2]),N.componentIndex=a.get(A),N.cosAngle=(0,o.f)(c,S),f=N,d=g,f.cosAngle>d)return;N.cosAngle<-.9999&&(0,o.c)(S,c)}C+=e,w++,F||(O=N,p=h,O.cosAngle<p)?(t.write(v,D++,N),P.push(e)):function(e,t){let r=(0,n.XM)(e.cosAngle);return(0,o.o)(E,e.position1,e.position0),r*((0,o.f)((0,o.e)(I,e.faceNormal0,e.faceNormal1),E)>0?-1:1)>t}(N,T)&&(M&&r&&r.write(M,y++,N),U.push(e))});let b=new Float32Array(P.reverse()),V=new Float32Array(U.reverse()),F=M&&r?{instancesData:M.slice(0,y),lodInfo:{lengths:V}}:void 0;return{regular:{instancesData:v.slice(0,D),lodInfo:{lengths:b}},silhouette:F,averageEdgeLength:C/w}}class c{constructor(){this.index=0,this.length=0}}let u=new i.A({allocator:e=>e||new c,deallocator:null}),f=new i.A({deallocator:null}),d=new i.A({deallocator:null}),N=new s,I=(0,a.vt)(),E=(0,a.vt)(),O=(0,a.vt)(),p=(0,a.vt)(),A=(0,a.vt)(),T=(0,n.kU)(4),g=Math.cos(T),h=Math.cos((0,n.kU)(35))},26434:(e,t,r)=>{r.d(t,{U:()=>o});var n=r(93446),i=r(99419);function o(e,t=0){let r=e.stride;return Array.from(e.fields.keys()).map(n=>{let o=e.fields.get(n),s=o.constructor.ElementCount,l=function(e){let t=a[e];if(t)return t;throw Error("BufferType not supported in WebGL")}(o.constructor.ElementType),c=o.offset,u=o.optional?.glNormalized??!1;return new i._(n,s,l,c,r,u,t)})}let a={u8:n.pe.UNSIGNED_BYTE,u16:n.pe.UNSIGNED_SHORT,u32:n.pe.UNSIGNED_INT,i8:n.pe.BYTE,i16:n.pe.SHORT,i32:n.pe.INT,f32:n.pe.FLOAT}},35715:(e,t,r)=>{r.d(t,{L:()=>i,s:()=>o});var n=r(83094);function i(e,t){return t.push(e.buffer),{buffer:e.buffer,layout:new n.l5(e.layout)}}function o(e){return new n.q3(e.layout).createView(e.buffer)}},53041:(e,t,r)=>{var n;function i(e){return e===n.POSITION}r.d(t,{b:()=>i,r:()=>n}),function(e){e.POSITION="position",e.NORMAL="normal",e.NORMALCOMPRESSED="normalCompressed",e.UV0="uv0",e.COLOR="color",e.SYMBOLCOLOR="symbolColor",e.SIZE="size",e.ROTATION="rotation",e.TANGENT="tangent",e.OFFSET="offset",e.PERSPECTIVEDIVIDE="perspectiveDivide",e.CENTEROFFSETANDDISTANCE="centerOffsetAndDistance",e.LENGTH="length",e.PREVPOSITION="prevPosition",e.NEXTPOSITION="nextPosition",e.SUBDIVISIONFACTOR="subdivisionFactor",e.COLORFEATUREATTRIBUTE="colorFeatureAttribute",e.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",e.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",e.DISTANCETOSTART="distanceToStart",e.UVMAPSPACE="uvMapSpace",e.BOUNDINGRECT="boundingRect",e.UVREGION="uvRegion",e.PROFILERIGHT="profileRight",e.PROFILEUP="profileUp",e.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",e.FEATUREVALUE="featureValue",e.INSTANCEMODELORIGINHI="instanceModelOriginHi",e.INSTANCEMODELORIGINLO="instanceModelOriginLo",e.INSTANCEMODEL="instanceModel",e.INSTANCEMODELNORMAL="instanceModelNormal",e.INSTANCECOLOR="instanceColor",e.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",e.LOCALTRANSFORM="localTransform",e.GLOBALTRANSFORM="globalTransform",e.BOUNDINGSPHERE="boundingSphere",e.MODELORIGIN="modelOrigin",e.MODELSCALEFACTORS="modelScaleFactors",e.FEATUREATTRIBUTE="featureAttribute",e.STATE="state",e.LODLEVEL="lodLevel",e.POSITION0="position0",e.POSITION1="position1",e.NORMAL2COMPRESSED="normal2Compressed",e.COMPONENTINDEX="componentIndex",e.VARIANTOFFSET="variantOffset",e.VARIANTSTROKE="variantStroke",e.VARIANTEXTENSION="variantExtension",e.SIDENESS="sideness",e.START="start",e.END="end",e.UP="up",e.START_UP="startUp",e.END_UP="endUp",e.EXTRUDE="extrude",e.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor",e.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"}(n||(n={}))},78651:(e,t,r)=>{r.d(t,{aT:()=>i,fA:()=>o});var n=r(20538);function i(e,t,r,n,o,s=2){let l=1/(Math.abs(r)+Math.abs(n)+Math.abs(o)),c=r*l,u=n*l,f=o<=0?(c>=0?1:-1)*(1-Math.abs(u)):c,d=o<=0?(u>=0?1:-1)*(1-Math.abs(c)):u,N=t*s;e[N]=a(f),e[N+1]=a(d)}function o(e){let t=e.length/3,r=new Int16Array(2*t),n=0;for(let o=0;o<t;++o)i(r,o,e[n++],e[n++],e[n++]);return r}function a(e){return(0,n.qE)(Math.round(32767*e),-32767,32767)}r(63599),r(56911),r(75169)},87129:(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});var n=r(35715),i=r(91458),o=r(9416),a=r(89887);class s{async extract(e){var t,r;let i=l(e),o=(0,a.o6)(i),s=[i.data.buffer];return{result:(t=o,(r=s).push(t.regular.lodInfo.lengths.buffer),r.push(t.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:(0,n.L)(t.regular.instancesData,r),lodInfo:{lengths:t.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:(0,n.L)(t.silhouette.instancesData,r),lodInfo:{lengths:t.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:t.averageEdgeLength}),transferList:s}}async extractComponentsEdgeLocations(e){let t=l(e),r=(0,a.hx)(t.data,t.skipDeduplicate,t.indices,t.indicesLength),i=(0,o.K)(r,d),s=[];return{result:(0,n.L)(i.regular.instancesData,s),transferList:s}}async extractEdgeLocations(e){let t=l(e),r=(0,a.hx)(t.data,t.skipDeduplicate,t.indices,t.indicesLength),i=(0,o.K)(r,f),s=[];return{result:(0,n.L)(i.regular.instancesData,s),transferList:s}}}function l(e){return{data:i.I$.createView(e.dataBuffer),indices:"Uint32Array"===e.indicesType?new Uint32Array(e.indices):"Uint16Array"===e.indicesType?new Uint16Array(e.indices):e.indices,indicesLength:e.indicesLength,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}}class c{allocate(e){return a.Jb.createBuffer(e)}trim(e,t){return e.slice(0,t)}write(e,t,r){e.position0.setVec(t,r.position0),e.position1.setVec(t,r.position1)}}class u{allocate(e){return a.HY.createBuffer(e)}trim(e,t){return e.slice(0,t)}write(e,t,r){e.position0.setVec(t,r.position0),e.position1.setVec(t,r.position1),e.componentIndex.set(t,r.componentIndex)}}let f=new c,d=new u},89887:(e,t,r)=>{r.d(t,{o6:()=>L,HY:()=>w,hx:()=>v,Jb:()=>C});var n=r(91819);function i(e,t,r){let n=t/3,i=new Uint32Array(r+1),o=new Uint32Array(r+1),a=(e,t)=>{e<t?i[e+1]++:o[t+1]++};for(let t=0;t<n;t++){let r=e[3*t],n=e[3*t+1],i=e[3*t+2];a(r,n),a(n,i),a(i,r)}let s=0,l=0;for(let e=0;e<r;e++){let t=i[e+1],r=o[e+1];i[e+1]=s,o[e+1]=l,s+=t,l+=r}let c=new Uint32Array(6*n),u=i[r],f=(e,t,r)=>{if(e<t){let n=i[e+1]++;c[2*n]=t,c[2*n+1]=r}else{let n=o[t+1]++;c[2*u+2*n]=e,c[2*u+2*n+1]=r}};for(let t=0;t<n;t++){let r=e[3*t],n=e[3*t+1],i=e[3*t+2];f(r,n,t),f(n,i,t),f(i,r,t)}let d=(e,t)=>{let r=2*e,n=t-e;for(let e=1;e<n;e++){let t=c[r+2*e],n=c[r+2*e+1],i=e-1;for(;i>=0&&c[r+2*i]>t;i--)c[r+2*i+2]=c[r+2*i],c[r+2*i+3]=c[r+2*i+1];c[r+2*i+2]=t,c[r+2*i+3]=n}};for(let e=0;e<r;e++)d(i[e],i[e+1]),d(u+o[e],u+o[e+1]);let N=new Int32Array(3*n),I=(t,r)=>t===e[3*r]?0:t===e[3*r+1]?1:t===e[3*r+2]?2:-1,E=(e,t)=>{let r=I(e,t);N[3*t+r]=-1},O=(e,t,r,n)=>{let i=I(e,t);N[3*t+i]=n;let o=I(r,n);N[3*n+o]=t};for(let e=0;e<r;e++){let t=i[e],r=i[e+1],n=o[e],a=o[e+1];for(;t<r&&n<a;){let r=c[2*t],i=c[2*u+2*n];r===i?(O(e,c[2*t+1],i,c[2*u+2*n+1]),t++,n++):r<i?(E(e,c[2*t+1]),t++):(E(i,c[2*u+2*n+1]),n++)}for(;t<r;)E(e,c[2*t+1]),t++;for(;n<a;)E(c[2*u+2*n],c[2*u+2*n+1]),n++}return N}var o=r(83094),a=r(53041),s=r(91458),l=r(33638),c=r(63599),u=r(56911),f=r(26434),d=r(78651);class N{updateSettings(e){this.settings=e,this._edgeHashFunction=e.reducedPrecision?A:p}write(e,t,r){var n;R.seed=this._edgeHashFunction(r);let i=R.getIntRange(0,255),o=R.getIntRange(0,this.settings.variants-1),a=R.getFloat(),s=255*(.5*(Math.abs(n=-(1-Math.min(a/.7,1))+Math.max(0,a-.7)/.30000000000000004)**1.2*Math.sign(n))+.5);e.position0.setVec(t,r.position0),e.position1.setVec(t,r.position1),e.componentIndex.set(t,r.componentIndex),e.variantOffset.set(t,i),e.variantStroke.set(t,o),e.variantExtension.set(t,s)}}let I=new Float32Array(6),E=new Uint32Array(I.buffer),O=new Uint32Array(1);function p(e){return I[0]=e.position0[0],I[1]=e.position0[1],I[2]=e.position0[2],I[3]=e.position1[0],I[4]=e.position1[1],I[5]=e.position1[2],O[0]=31*(31*(31*(31*(31*(166811+E[0])+E[1])+E[2])+E[3])+E[4])+E[5],O[0]}function A(e){I[0]=T(e.position0[0]),I[1]=T(e.position0[1]),I[2]=T(e.position0[2]),I[3]=T(e.position1[0]),I[4]=T(e.position1[1]),I[5]=T(e.position1[2]),O[0]=5381;for(let e=0;e<E.length;e++)O[0]=31*O[0]+E[e];return O[0]}function T(e){return Math.round(1e4*e)/1e4}class g{constructor(){this._commonWriter=new N}updateSettings(e){this._commonWriter.updateSettings(e)}allocate(e){return s.gr.createBuffer(e)}write(e,t,r){this._commonWriter.write(e,t,r),(0,c.g)(S,r.faceNormal0,r.faceNormal1),(0,c.n)(S,S);let{typedBuffer:n,typedBufferStride:i}=e.normalCompressed;(0,d.aT)(n,t,S[0],S[1],S[2],i)}}g.Layout=s.gr,g.glLayout=(0,f.U)(s.gr,1);class h{constructor(){this._commonWriter=new N}updateSettings(e){this._commonWriter.updateSettings(e)}allocate(e){return s.In.createBuffer(e)}write(e,t,r){this._commonWriter.write(e,t,r);{let{typedBuffer:n,typedBufferStride:i}=e.normalCompressed;(0,d.aT)(n,t,r.faceNormal0[0],r.faceNormal0[1],r.faceNormal0[2],i)}{let{typedBuffer:n,typedBufferStride:i}=e.normal2Compressed;(0,d.aT)(n,t,r.faceNormal1[0],r.faceNormal1[1],r.faceNormal1[2],i)}}}h.Layout=s.In,h.glLayout=(0,f.U)(s.In,1);let S=(0,u.vt)(),R=new l.A;var m=r(9416);function L(e){let t=v(e.data,e.skipDeduplicate,e.indices,e.indicesLength);return M.updateSettings(e.writerSettings),y.updateSettings(e.writerSettings),(0,m.K)(t,M,y)}function v(e,t,r,o){if(t){let t=i(r,o,e.count);return new D(r,o,t,e)}let a=(0,n.b)(e.buffer,e.stride/4,{originalIndices:r,originalIndicesLength:o}),l=i(a.indices,o,a.uniqueCount);return{faces:a.indices,facesLength:a.indices.length,neighbors:l,vertices:s.I$.createView(a.buffer)}}class D{constructor(e,t,r,n){this.faces=e,this.facesLength=t,this.neighbors=r,this.vertices=n}}let M=new g,y=new h,C=(0,o.BP)().vec3f(a.r.POSITION0).vec3f(a.r.POSITION1),w=(0,o.BP)().vec3f(a.r.POSITION0).vec3f(a.r.POSITION1).u16(a.r.COMPONENTINDEX)},91458:(e,t,r)=>{r.d(t,{I$:()=>a,In:()=>c,gr:()=>l});var n=r(26434),i=r(83094),o=r(53041);let a=(0,i.BP)().vec3f(o.r.POSITION).u16(o.r.COMPONENTINDEX).freeze(),s=(0,i.BP)().vec2u8(o.r.SIDENESS).freeze(),l=((0,n.U)(s),(0,i.BP)().vec3f(o.r.POSITION0).vec3f(o.r.POSITION1).vec2i16(o.r.NORMALCOMPRESSED).u16(o.r.COMPONENTINDEX).u8(o.r.VARIANTOFFSET,{glNormalized:!0}).u8(o.r.VARIANTSTROKE).u8(o.r.VARIANTEXTENSION,{glNormalized:!0}).freeze()),c=(0,i.BP)().vec3f(o.r.POSITION0).vec3f(o.r.POSITION1).vec2i16(o.r.NORMALCOMPRESSED).vec2i16(o.r.NORMAL2COMPRESSED).u16(o.r.COMPONENTINDEX).u8(o.r.VARIANTOFFSET,{glNormalized:!0}).u8(o.r.VARIANTSTROKE).u8(o.r.VARIANTEXTENSION,{glNormalized:!0}).freeze();o.r.POSITION0,o.r.POSITION1,o.r.COMPONENTINDEX,o.r.VARIANTOFFSET,o.r.VARIANTSTROKE,o.r.VARIANTEXTENSION,o.r.NORMALCOMPRESSED,o.r.NORMAL2COMPRESSED,o.r.SIDENESS},91819:(e,t,r)=>{r.d(t,{b:()=>o});var n=r(20538),i=r(95775);function o(e,t,r){let o=Array.isArray(e),s=o?e.length/t:e.byteLength/(4*t),l=o?e:new Uint32Array(e,0,s*t),c=r?.minReduction??0,u=r?.originalIndices||null,f=u?u.length:0,d=r?.componentOffsets||null,N=0;if(d)for(let e=0;e<d.length-1;e++){let t=d[e+1]-d[e];t>N&&(N=t)}else N=s;let I=Math.floor(1.1*N)+1;(null==a||a.length<2*I)&&(a=new Uint32Array((0,n.cU)(2*I)));for(let e=0;e<2*I;e++)a[e]=0;let E=0,O=!!d&&!!u,p=O?f:s,A=(0,i.my)(s),T=new Uint32Array(f),g=0!==c?Math.ceil(15.366399999999999/(c*c)*c*(1-c)):p,h=1,S=d?d[1]:p;for(let e=0;e<p;e++){if(e===g){let t=1-E/e;if(t+1.96*Math.sqrt(t*(1-t)/e)<c)return null;g*=2}if(e===S){for(let e=0;e<2*I;e++)a[e]=0;if(u)for(let e=d[h-1];e<d[h];e++)T[e]=A[u[e]];S=d[++h]}let r=O?u[e]:e,n=r*t,i=function(e,t,r){let n=0;for(let i=0;i<r;i++)n=(n=e[t+i]+n|0)+(n<<11)+(n>>>2)|0;return n>>>0}(l,n,t),o=i%I,s=E;for(;0!==a[2*o+1];){if(a[2*o]===i){let e=a[2*o+1]-1;if(function(e,t,r,n){for(let i=0;i<n;i++)if(e[t+i]!==e[r+i])return!1;return!0}(l,n,e*t,t)){s=A[e];break}}++o>=I&&(o-=I)}s===E&&(a[2*o]=i,a[2*o+1]=r+1,E++),A[r]=s}if(0!==c&&1-E/s<c)return null;if(O){for(let e=d[h-1];e<T.length;e++)T[e]=A[u[e]];A=(0,i.Dg)(T)}let R=o?Array(E):new Uint32Array(E*t);E=0;for(let e=0;e<p;e++)A[e]===E&&(function(e,t,r,n,i){for(let o=0;o<i;o++)r[n+o]=e[t+o]}(l,(O?u[e]:e)*t,R,E*t,t),E++);if(u&&!O){let e=new Uint32Array(f);for(let t=0;t<e.length;t++)e[t]=A[u[t]];A=(0,i.Dg)(e)}return{buffer:Array.isArray(R)?R:R.buffer,indices:A,uniqueCount:E}}let a=null},99419:(e,t,r)=>{r.d(t,{_:()=>n});class n{constructor(e,t,r,n,i,o=!1,a=0){this.name=e,this.count=t,this.type=r,this.offset=n,this.stride=i,this.normalized=o,this.divisor=a}}}}]);