"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2596],{24602:(e,t,r)=>{r.d(t,{A:()=>p});var n=r(81856),i=r(91838);r(57845),r(61939),r(33638);var a=r(12709),o=r(39960),l=r(72675);let s=class extends l.A{constructor(e){super(e),this.layoutGeometry=null}};(0,n._)([(0,i.MZ)({type:o.A,json:{write:!0}})],s.prototype,"layoutGeometry",void 0);let p=s=(0,n._)([(0,a.$)("esri.rest.knowledgeGraph.Entity")],s)},32421:(e,t,r)=>{r.d(t,{R:()=>i});var n=r(14307);function i(e,t){return null===e?t:new n.A({url:e.field("url")})}},36371:(e,t,r)=>{r.d(t,{A:()=>p});var n=r(81856),i=r(91838);r(57845),r(61939),r(33638);var a=r(12709),o=r(65442),l=r(72675);let s=class extends l.A{constructor(e){super(e),this.originId=null,this.destinationId=null,this.layoutGeometry=null}};(0,n._)([(0,i.MZ)({type:String,json:{write:!0}})],s.prototype,"originId",void 0),(0,n._)([(0,i.MZ)({type:String,json:{write:!0}})],s.prototype,"destinationId",void 0),(0,n._)([(0,i.MZ)({type:o.A,json:{write:!0}})],s.prototype,"layoutGeometry",void 0);let p=s=(0,n._)([(0,a.$)("esri.rest.knowledgeGraph.Relationship")],s)},51696:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(81856),i=r(92713),a=r(91838);r(57845),r(61939),r(33638);var o=r(12709);let l=class extends i.A{constructor(e){super(e),this.properties=null}};(0,n._)([(0,a.MZ)({json:{write:!0}})],l.prototype,"properties",void 0);let s=l=(0,n._)([(0,o.$)("esri.rest.knowledgeGraph.GraphObject")],l)},72596:(e,t,r)=>{r.r(t),r.d(t,{registerFunctions:()=>M});var n=r(48767),i=r(36924),a=r(12894),o=r(30626),l=r(45891),s=r(32421),p=r(88070),u=r(65111),c=r(91463),d=r(6322),f=r(14307),h=r(28015),y=r(29597),g=r(24602),w=r(90979),v=r(90491),m=r(95573),A=r(36371),_=r(74497),G=r(48271);let S=null;async function R(e){let t=n.A.geometryServiceUrl??"";if(!t){for(let t of((0,u.isLoaded)()||await (0,u.load)(),e))t.container[t.indexer]=(0,u.project)(t.container[t.indexer],c.A.WGS84);return}let r=e.map(e=>e.container[e.indexer]),i=new _.A({geometries:r,outSpatialReference:c.A.WGS84}),a=await (0,y.C)(t,i);for(let t=0;t<a.length;t++){let r=e[t];r.container[r.indexer]=a[t]}}async function b(e,t){let n=new h.default({portal:e,id:t});return await n.load(),null===S&&(S=await r.e(6283).then(r.bind(r,56283))),await S.fetchKnowledgeGraph(n.url)}function x(e,t){if(!e)return null;let r={};for(let n in e)r[n]=k(e[n],t);return r}function k(e,t){return null===e?null:(0,G.cy)(e)?e.map(e=>k(e,t)):e instanceof g.A?{graphTypeName:e.typeName,id:e.id,graphType:"entity",properties:x(e.properties,t)}:e instanceof v.A?{graphType:"object",properties:x(e.properties,t)}:e instanceof A.A?{graphTypeName:e.typeName,id:e.id,graphType:"relationship",originId:e.originId??null,destinationId:e.destinationId??null,properties:x(e.properties,t)}:e instanceof m.A?{graphType:"path",path:e.path?e.path.map(e=>k(e,t)):null}:(0,l.l)(e)?function(e,t){if(!e)return e;if(e.spatialReference.isWGS84&&t.spatialReference.isWebMercator)return(0,d.Gh)(e);if(e.spatialReference.equals(t.spatialReference))return e;throw new o.D$(t,o.TX.WrongSpatialReference,null)}(e,t):(0,G.Kg)(e)||(0,G.Et)(e)||(0,G.$P)(e)?e:null}function M(e){"async"===e.mode&&(e.functions.knowledgegraphbyportalitem=function(t,r){return e.standardFunctionAsync(t,r,(e,n,a)=>{if((0,l.D)(a,2,2,t,r),null===a[0])throw new o.D$(t,o.TX.PortalRequired,r);if(a[0]instanceof i.A){let e,r=(0,l.f)(a[1]);return e=t.services?.portal?t.services.portal:f.A.getDefault(),b((0,s.R)(a[0],e),r)}if(!1===(0,G.Kg)(a[0]))throw new o.D$(t,o.TX.InvalidParameter,r);let p=(0,l.f)(a[0]);return b(t.services?.portal??f.A.getDefault(),p)})},e.signatures.push({name:"knowledgegraphbyportalitem",min:2,max:2}),e.functions.querygraph=function(t,n){return e.standardFunctionAsync(t,n,async(e,i,s)=>{(0,l.D)(s,2,4,t,n);let u=s[0];if(!(0,l.r)(u))throw new o.D$(t,o.TX.InvalidParameter,n);let c=s[1];if(!(0,G.Kg)(c))throw new o.D$(t,o.TX.InvalidParameter,n);null===S&&(S=await r.e(6283).then(r.bind(r,56283)));let f=null,h=(0,l.J)(s[2],null);if(!(h instanceof a.A||null===h))throw new o.D$(t,o.TX.InvalidParameter,n);if(h){let e=[];f=function e(t,r,n,i,a){if(null===t)return null;if((0,G.Kg)(t)||(0,G.Et)(t))return t;if((0,l.g)(t)||(0,l.g)(t))return t.toJSDate();if((0,l.j)(t))return t.toStorageFormat();if((0,l.k)(t))return t.toStorageString();if((0,l.q)(t)){let o={};for(let l of t.keys())o[l]=e(t.field(l),r,n,i,a),o[l]instanceof p.A&&a.push({container:o,indexer:l});return o}if((0,G.cy)(t)){let o=t.map(t=>e(t,r,n,i,a));for(let e=0;e<o.length;e++)o[e]instanceof p.A&&a.push({container:o,indexer:e});return o}return(0,l.l)(t)?t.spatialReference.isWGS84?t:t.spatialReference.isWebMercator&&r?(0,d.ci)(t):t:void 0}(h,!0,!1,t,e),(e=e.filter(e=>!e.container[e.indexer].spatialReference.isWGS84)).length>0&&await R(e)}let y=new w.A({openCypherQuery:c,bindParameters:f});(u?.serviceDefinition?.currentVersion??11.3)>11.2&&(y.outputSpatialReference=t.spatialReference);let g=(await S.executeQueryStreaming(u,y)).resultRowsStream.getReader(),v=[];try{for(;;){let{done:e,value:r}=await g.read();if(e)break;if((0,G.cy)(r))for(let e of r)v.push(k(e,t));else{let e=[];for(let n of r)e.push(k(r[n],t));v.push(e)}}}catch(e){throw e}return a.A.convertJsonToArcade(v,(0,l.K)(t),!1,!0)})},e.signatures.push({name:"querygraph",min:2,max:4}))}},72675:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(81856),i=r(91838);r(57845),r(61939),r(33638);var a=r(12709),o=r(51696);let l=class extends o.A{constructor(e){super(e),this.typeName=null,this.id=null}};(0,n._)([(0,i.MZ)({type:String,json:{write:!0}})],l.prototype,"typeName",void 0),(0,n._)([(0,i.MZ)({type:String,json:{write:!0}})],l.prototype,"id",void 0);let s=l=(0,n._)([(0,a.$)("esri.rest.knowledgeGraph.GraphNamedObject")],l)},90491:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(81856);r(61939),r(57845),r(33638),r(32391);var i=r(12709),a=r(51696);let o=class extends a.A{constructor(e){super(e)}},l=o=(0,n._)([(0,i.$)("esri.rest.knowledgeGraph.ObjectValue")],o)},90979:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(81856),i=r(91838);r(57845),r(61939),r(33638);var a=r(12709),o=r(91463),l=r(28690);let s=class extends l.A{constructor(e){super(e),this.openCypherQuery=""}};(0,n._)([(0,i.MZ)()],s.prototype,"openCypherQuery",void 0);let p=s=(0,n._)([(0,a.$)("esri.rest.knowledgeGraph.GraphQuery")],s),u=class extends p{constructor(e){super(e),this.bindParameters=null,this.bindGeometryQuantizationParameters=null,this.outputQuantizationParameters=null,this.outputSpatialReference=null,this.provenanceBehavior=null}};(0,n._)([(0,i.MZ)()],u.prototype,"bindParameters",void 0),(0,n._)([(0,i.MZ)()],u.prototype,"bindGeometryQuantizationParameters",void 0),(0,n._)([(0,i.MZ)()],u.prototype,"outputQuantizationParameters",void 0),(0,n._)([(0,i.MZ)({type:o.A})],u.prototype,"outputSpatialReference",void 0),(0,n._)([(0,i.MZ)()],u.prototype,"provenanceBehavior",void 0);let c=u=(0,n._)([(0,a.$)("esri.rest.knowledgeGraph.GraphQueryStreaming")],u)},95573:(e,t,r)=>{r.d(t,{A:()=>p});var n=r(81856),i=r(92713),a=r(91838);r(57845),r(61939),r(33638);var o=r(12709),l=r(51696);let s=class extends i.A{constructor(e){super(e),this.path=[]}};(0,n._)([(0,a.MZ)({type:[l.A],json:{write:!0}})],s.prototype,"path",void 0);let p=s=(0,n._)([(0,o.$)("esri.rest.knowledgeGraph.Path")],s)}}]);